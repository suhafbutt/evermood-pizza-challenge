  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:10:24.558660', '2024-11-19 14:10:24.558660') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.4ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:10:24.560362', '2024-11-19 14:10:24.560362') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:10:24.561423', '2024-11-19 14:10:24.561423') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (2.4ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:10:24.569552', '2024-11-19 14:10:24.569552') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:10:24.574837', '2024-11-19 14:10:24.574837') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:10:24.575706', '2024-11-19 14:10:24.575706') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:10:24.577422', '2024-11-19 14:10:24.577422') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:10:24.578349', '2024-11-19 14:10:24.578349') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:10:24.579237', '2024-11-19 14:10:24.579237') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.0ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:10:37.455708', '2024-11-19 14:10:37.455708') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:10:37.456774', '2024-11-19 14:10:37.456774') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:10:37.457629', '2024-11-19 14:10:37.457629') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:10:37.458493', '2024-11-19 14:10:37.458493') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:10:37.459346', '2024-11-19 14:10:37.459346') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:10:37.460158', '2024-11-19 14:10:37.460158') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:10:37.460983', '2024-11-19 14:10:37.460983') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:10:37.461793', '2024-11-19 14:10:37.461793') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:10:37.462610', '2024-11-19 14:10:37.462610') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:10:49.639013', '2024-11-19 14:10:49.639013') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:10:49.640118', '2024-11-19 14:10:49.640118') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:10:49.640950', '2024-11-19 14:10:49.640950') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:10:49.641824', '2024-11-19 14:10:49.641824') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:10:49.642666', '2024-11-19 14:10:49.642666') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:10:49.643478', '2024-11-19 14:10:49.643478') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:10:49.644335', '2024-11-19 14:10:49.644335') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:10:49.645155', '2024-11-19 14:10:49.645155') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:10:49.645939', '2024-11-19 14:10:49.645939') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:15:03.190411', '2024-11-19 14:15:03.190411') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:15:03.191453', '2024-11-19 14:15:03.191453') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:15:03.192554', '2024-11-19 14:15:03.192554') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:15:03.193395', '2024-11-19 14:15:03.193395') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:15:03.194229', '2024-11-19 14:15:03.194229') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:15:03.195000', '2024-11-19 14:15:03.195000') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:15:03.195943', '2024-11-19 14:15:03.195943') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:15:03.196922', '2024-11-19 14:15:03.196922') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:15:03.197720', '2024-11-19 14:15:03.197720') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:15:36.867295', '2024-11-19 14:15:36.867295') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:15:36.868328', '2024-11-19 14:15:36.868328') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:15:36.869387', '2024-11-19 14:15:36.869387') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:15:36.870210', '2024-11-19 14:15:36.870210') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:15:36.871008', '2024-11-19 14:15:36.871008') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:15:36.871774', '2024-11-19 14:15:36.871774') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:15:36.872749', '2024-11-19 14:15:36.872749') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:15:36.873787', '2024-11-19 14:15:36.873787') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:15:36.874561', '2024-11-19 14:15:36.874561') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:16:26.155113', '2024-11-19 14:16:26.155113') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:16:26.156353', '2024-11-19 14:16:26.156353') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:16:26.157179', '2024-11-19 14:16:26.157179') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:16:26.158031', '2024-11-19 14:16:26.158031') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:16:26.158865', '2024-11-19 14:16:26.158865') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:16:26.159674', '2024-11-19 14:16:26.159674') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:16:26.160542', '2024-11-19 14:16:26.160542') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:16:26.161374', '2024-11-19 14:16:26.161374') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:16:26.162177', '2024-11-19 14:16:26.162177') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (4.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:17:55.955590', '2024-11-19 14:17:55.955590') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:17:55.960640', '2024-11-19 14:17:55.960640') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:17:55.961521', '2024-11-19 14:17:55.961521') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:17:55.962353', '2024-11-19 14:17:55.962353') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:17:55.963514', '2024-11-19 14:17:55.963514') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:17:55.964281', '2024-11-19 14:17:55.964281') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:17:55.965366', '2024-11-19 14:17:55.965366') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:17:55.966370', '2024-11-19 14:17:55.966370') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:17:55.967225', '2024-11-19 14:17:55.967225') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:17:55.971040', '2024-11-19 14:17:55.971040') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:17:55.973186', '2024-11-19 14:17:55.973186') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 19 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (2.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:18:59.250757', '2024-11-19 14:18:59.250757') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:18:59.251978', '2024-11-19 14:18:59.251978') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:18:59.252859', '2024-11-19 14:18:59.252859') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:18:59.253708', '2024-11-19 14:18:59.253708') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:18:59.254555', '2024-11-19 14:18:59.254555') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:18:59.255379', '2024-11-19 14:18:59.255379') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:18:59.256219', '2024-11-19 14:18:59.256219') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:18:59.257052', '2024-11-19 14:18:59.257052') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (2.9ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:18:59.257852', '2024-11-19 14:18:59.257852') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:18:59.261284', '2024-11-19 14:18:59.261284') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:18:59.262162', '2024-11-19 14:18:59.262162') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 22 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 23 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 24 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 24 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 24 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('642287e8-ddf1-437d-9252-249f3a5ecd72', 'OPEN', '2024-11-19 14:18:59.275416', '2024-11-19 14:18:59.275416') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "item_id", "size_id", "created_at", "updated_at") VALUES (1, 24, 24, '2024-11-19 14:18:59.275926', '2024-11-19 14:18:59.275926') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 22 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 23 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 24 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 22 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 23 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 24 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 22 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 23 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 24 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:19:10.991173', '2024-11-19 14:19:10.991173') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:19:10.992393', '2024-11-19 14:19:10.992393') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:19:10.993191', '2024-11-19 14:19:10.993191') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:19:10.994004', '2024-11-19 14:19:10.994004') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:19:10.994787', '2024-11-19 14:19:10.994787') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:19:10.995551', '2024-11-19 14:19:10.995551') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:19:10.999312', '2024-11-19 14:19:10.999312') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:19:11.000137', '2024-11-19 14:19:11.000137') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:19:11.000906', '2024-11-19 14:19:11.000906') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:19:11.001892', '2024-11-19 14:19:11.001892') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:19:11.002715', '2024-11-19 14:19:11.002715') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 25 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 26 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 27 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 27 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 27 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('a3e24dad-d2ea-4bea-a94e-853b842b7dab', 'OPEN', '2024-11-19 14:19:11.015337', '2024-11-19 14:19:11.015337') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "item_id", "size_id", "created_at", "updated_at") VALUES (1, 27, 27, '2024-11-19 14:19:11.015820', '2024-11-19 14:19:11.015820') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119132033)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20241119132033' /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119132033)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119132033') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 25 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 26 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 27 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 25 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 26 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 27 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 25 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 26 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 27 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:22:18.164206', '2024-11-19 14:22:18.164206') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:22:18.165318', '2024-11-19 14:22:18.165318') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:22:18.166206', '2024-11-19 14:22:18.166206') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:22:18.167121', '2024-11-19 14:22:18.167121') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:22:18.167958', '2024-11-19 14:22:18.167958') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:22:18.168778', '2024-11-19 14:22:18.168778') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:22:18.169627', '2024-11-19 14:22:18.169627') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:22:18.170436', '2024-11-19 14:22:18.170436') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (3.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:22:18.171243', '2024-11-19 14:22:18.171243') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:22:18.175121', '2024-11-19 14:22:18.175121') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:22:18.175988', '2024-11-19 14:22:18.175988') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.6ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 28 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 29 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 30 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (2.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 28 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (2.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 29 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 30 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 28 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 29 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 30 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:22:55.429438', '2024-11-19 14:22:55.429438') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:22:55.430517', '2024-11-19 14:22:55.430517') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:22:55.431374', '2024-11-19 14:22:55.431374') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:22:55.432261', '2024-11-19 14:22:55.432261') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:22:55.433092', '2024-11-19 14:22:55.433092') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:22:55.433884', '2024-11-19 14:22:55.433884') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:22:55.434707', '2024-11-19 14:22:55.434707') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:22:55.435561', '2024-11-19 14:22:55.435561') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:22:55.439053', '2024-11-19 14:22:55.439053') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:22:55.439913', '2024-11-19 14:22:55.439913') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:22:55.440763', '2024-11-19 14:22:55.440763') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 31 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 32 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 33 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (2.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 31 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (2.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 32 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 33 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 31 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 32 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 33 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:26:57.071797', '2024-11-19 14:26:57.071797') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:26:57.072871', '2024-11-19 14:26:57.072871') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:26:57.073703', '2024-11-19 14:26:57.073703') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:26:57.074630', '2024-11-19 14:26:57.074630') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:26:57.075465', '2024-11-19 14:26:57.075465') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:26:57.076274', '2024-11-19 14:26:57.076274') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:26:57.077083', '2024-11-19 14:26:57.077083') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:26:57.077899', '2024-11-19 14:26:57.077899') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:26:57.081866', '2024-11-19 14:26:57.081866') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:26:57.082771', '2024-11-19 14:26:57.082771') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:26:57.083636', '2024-11-19 14:26:57.083636') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('ee5ac5ac-92d7-411d-ad58-1682f89d8a67', 'OPEN', '2024-11-19 14:26:57.086639', '2024-11-19 14:26:57.086639') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 34 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 35 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 36 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 34 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 35 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 36 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 34 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 35 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 36 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:27:14.789274', '2024-11-19 14:27:14.789274') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:27:14.790499', '2024-11-19 14:27:14.790499') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:27:14.791311', '2024-11-19 14:27:14.791311') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:27:14.792126', '2024-11-19 14:27:14.792126') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:27:14.792927', '2024-11-19 14:27:14.792927') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:27:14.793709', '2024-11-19 14:27:14.793709') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:27:14.797515', '2024-11-19 14:27:14.797515') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:27:14.798342', '2024-11-19 14:27:14.798342') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:27:14.799132', '2024-11-19 14:27:14.799132') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:27:14.800127', '2024-11-19 14:27:14.800127') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:27:14.801012', '2024-11-19 14:27:14.801012') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('60a39b63-691b-4f61-8103-95a9211f6fa3', 'OPEN', '2024-11-19 14:27:14.803420', '2024-11-19 14:27:14.803420') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 37 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 38 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 39 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 39 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "created_at", "updated_at") VALUES (2, 39, 39, '2024-11-19 14:27:14.815973', '2024-11-19 14:27:14.815973') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (1, 37, '2024-11-19 14:27:14.816450', '2024-11-19 14:27:14.816450') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (1, 38, '2024-11-19 14:27:14.816917', '2024-11-19 14:27:14.816917') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (1, 39, '2024-11-19 14:27:14.817573', '2024-11-19 14:27:14.817573') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Count (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 37 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 38 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (5.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (1.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 37 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 38 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 37 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 38 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 14:30:18.886917', '2024-11-19 14:30:18.886917') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 14:30:18.890874', '2024-11-19 14:30:18.890874') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 14:30:18.891717', '2024-11-19 14:30:18.891717') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 14:30:18.892545', '2024-11-19 14:30:18.892545') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 14:30:18.893647', '2024-11-19 14:30:18.893647') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 14:30:18.894430', '2024-11-19 14:30:18.894430') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 14:30:18.895240', '2024-11-19 14:30:18.895240') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 14:30:18.896243', '2024-11-19 14:30:18.896243') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 14:30:18.897166', '2024-11-19 14:30:18.897166') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 14:30:18.898061', '2024-11-19 14:30:18.898061') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 14:30:18.898896', '2024-11-19 14:30:18.898896') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('f70b3618-3136-4e72-8e7f-ea75b11cabb3', 'OPEN', '2024-11-19 14:30:18.899776', '2024-11-19 14:30:18.899776') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 40 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 41 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 42 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 42 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "created_at", "updated_at") VALUES (3, 42, 42, '2024-11-19 14:30:18.907163', '2024-11-19 14:30:18.907163') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (2, 40, '2024-11-19 14:30:18.907620', '2024-11-19 14:30:18.907620') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (2, 41, '2024-11-19 14:30:18.908105', '2024-11-19 14:30:18.908105') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.1ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (2, 42, '2024-11-19 14:30:18.908555', '2024-11-19 14:30:18.908555') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Count (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' AND "offers"."order_id" = 3 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' AND "offers"."order_id" = 3 /* loading for inspect */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.1ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" WHERE "oder_offers"."order_id" = 3 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (1.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 40 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 41 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 42 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 40 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 41 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 42 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 40 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 41 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 42 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:16:55.663578', '2024-11-19 15:16:55.663578') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:16:55.664879', '2024-11-19 15:16:55.664879') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:16:55.665693', '2024-11-19 15:16:55.665693') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:16:55.666703', '2024-11-19 15:16:55.666703') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:16:55.667501', '2024-11-19 15:16:55.667501') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:16:55.668280', '2024-11-19 15:16:55.668280') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:16:55.669357', '2024-11-19 15:16:55.669357') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:16:55.670160', '2024-11-19 15:16:55.670160') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:16:55.670943', '2024-11-19 15:16:55.670943') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 43 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 44 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 45 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 43 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 44 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 45 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 43 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 44 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 45 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.4ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:17:45.911866', '2024-11-19 15:17:45.911866') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:17:45.912931', '2024-11-19 15:17:45.912931') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:17:45.913791', '2024-11-19 15:17:45.913791') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:17:45.914667', '2024-11-19 15:17:45.914667') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:17:45.915521', '2024-11-19 15:17:45.915521') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:17:45.916340', '2024-11-19 15:17:45.916340') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:17:45.917157', '2024-11-19 15:17:45.917157') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:17:45.918022', '2024-11-19 15:17:45.918022') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:17:45.918840', '2024-11-19 15:17:45.918840') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 46 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 47 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 48 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (2.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 46 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 47 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 48 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 46 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 47 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 48 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:18:08.712345', '2024-11-19 15:18:08.712345') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:18:08.713413', '2024-11-19 15:18:08.713413') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:18:08.714277', '2024-11-19 15:18:08.714277') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:18:08.715135', '2024-11-19 15:18:08.715135') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:18:08.715973', '2024-11-19 15:18:08.715973') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:18:08.716826', '2024-11-19 15:18:08.716826') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:18:08.717684', '2024-11-19 15:18:08.717684') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:18:08.718522', '2024-11-19 15:18:08.718522') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:18:08.719333', '2024-11-19 15:18:08.719333') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.1ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 49 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 50 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 51 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 49 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 50 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 51 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 49 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 50 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 51 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:18:15.942784', '2024-11-19 15:18:15.942784') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:18:15.943835', '2024-11-19 15:18:15.943835') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:18:15.944806', '2024-11-19 15:18:15.944806') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:18:15.945640', '2024-11-19 15:18:15.945640') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:18:15.946564', '2024-11-19 15:18:15.946564') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:18:15.947502', '2024-11-19 15:18:15.947502') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:18:15.948544', '2024-11-19 15:18:15.948544') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:18:15.949363', '2024-11-19 15:18:15.949363') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:18:15.950182', '2024-11-19 15:18:15.950182') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "multiplier" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar, "type" varchar, "discount" integer, "target" varchar, "target_size" varchar, "from" integer, "to" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "order_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_ingredient_id" ON "order_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_order_item_id" ON "order_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar, "state" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "multiplier" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aoder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_order_id" ON "aoder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_offer_id" ON "aoder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aoder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aoder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_order_id" ON "aoder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_offer_id" ON "aoder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aoder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
, CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_order_item_id" ON "aorder_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_ingredient_id" ON "aorder_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_94dafb583e"
FOREIGN KEY ("ingredient_id")
  REFERENCES "ingredients" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_ingredient_id" ON "order_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_order_item_id" ON "order_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_order_item_id" ON "aorder_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_ingredient_id" ON "aorder_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_94dafb583e"
FOREIGN KEY ("ingredient_id")
  REFERENCES "ingredients" ("id")
, CONSTRAINT "fk_rails_bcf714d908"
FOREIGN KEY ("order_item_id")
  REFERENCES "order_items" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_ingredient_id" ON "order_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_order_item_id" ON "order_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_size_id" ON "aorder_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_id" ON "aorder_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_order_id" ON "aorder_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_size_id" ON "aorder_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_id" ON "aorder_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_order_id" ON "aorder_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_size_id" ON "aorder_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_id" ON "aorder_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_order_id" ON "aorder_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119140813) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 15:18:22.236380', '2024-11-19 15:18:22.236381') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '94f5c0809da151dc536c9572166b6322d84ce3c0', '2024-11-19 15:18:22.237209', '2024-11-19 15:18:22.237209') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "multiplier" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar, "type" varchar, "discount" integer, "target" varchar, "target_size" varchar, "from" integer, "to" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_ingredient_id" ON "order_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_order_item_id" ON "order_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar, "state" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "multiplier" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" float, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aoder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_order_id" ON "aoder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_offer_id" ON "aoder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aoder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aoder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_order_id" ON "aoder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aoder_offers_on_offer_id" ON "aoder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aoder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
, CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("id","order_id","offer_id","created_at","updated_at")
                     SELECT "id","order_id","offer_id","created_at","updated_at" FROM "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aoder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_order_item_id" ON "aorder_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_ingredient_id" ON "aorder_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_94dafb583e"
FOREIGN KEY ("ingredient_id")
  REFERENCES "ingredients" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_ingredient_id" ON "order_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_order_item_id" ON "order_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_order_item_id" ON "aorder_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_item_ingredients_on_ingredient_id" ON "aorder_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_item_ingredients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_item_id" integer NOT NULL, "ingredient_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_94dafb583e"
FOREIGN KEY ("ingredient_id")
  REFERENCES "ingredients" ("id")
, CONSTRAINT "fk_rails_bcf714d908"
FOREIGN KEY ("order_item_id")
  REFERENCES "order_items" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_ingredient_id" ON "order_item_ingredients" ("ingredient_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_item_ingredients_on_order_item_id" ON "order_item_ingredients" ("order_item_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("id","order_item_id","ingredient_id","created_at","updated_at")
                     SELECT "id","order_item_id","ingredient_id","created_at","updated_at" FROM "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_size_id" ON "aorder_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_id" ON "aorder_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_order_id" ON "aorder_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_size_id" ON "aorder_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_id" ON "aorder_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_order_id" ON "aorder_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mPRAGMA foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorder_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_size_id" ON "aorder_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_pizza_id" ON "aorder_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorder_items_on_order_id" ON "aorder_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "aorder_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "pizza_id" integer NOT NULL, "pizza_size_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("id","order_id","pizza_id","pizza_size_id","created_at","updated_at")
                     SELECT "id","order_id","pizza_id","pizza_size_id","created_at","updated_at" FROM "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorder_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119140813) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 15:18:22.291637', '2024-11-19 15:18:22.291637') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.0ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 15:18:22.292155' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '94f5c0809da151dc536c9572166b6322d84ce3c0', '2024-11-19 15:18:22.292595', '2024-11-19 15:18:22.292595') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:18:22.307692', '2024-11-19 15:18:22.307692') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:18:22.308919', '2024-11-19 15:18:22.308919') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:18:22.309805', '2024-11-19 15:18:22.309805') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:18:22.311549', '2024-11-19 15:18:22.311549') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:18:22.312445', '2024-11-19 15:18:22.312445') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:18:22.314552', '2024-11-19 15:18:22.314552') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:18:22.316417', '2024-11-19 15:18:22.316417') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:18:22.317265', '2024-11-19 15:18:22.317265') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:18:22.318086', '2024-11-19 15:18:22.318086') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:18:47.109464', '2024-11-19 15:18:47.109464') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:18:47.110470', '2024-11-19 15:18:47.110470') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:18:47.111555', '2024-11-19 15:18:47.111555') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:18:47.112364', '2024-11-19 15:18:47.112364') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:18:47.113324', '2024-11-19 15:18:47.113324') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:18:47.114231', '2024-11-19 15:18:47.114231') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:18:47.115080', '2024-11-19 15:18:47.115080') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:18:47.115879', '2024-11-19 15:18:47.115879') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:18:47.116649', '2024-11-19 15:18:47.116649') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.1ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:19:05.319457', '2024-11-19 15:19:05.319457') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:19:05.320598', '2024-11-19 15:19:05.320598') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:19:05.321423', '2024-11-19 15:19:05.321423') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:19:05.322298', '2024-11-19 15:19:05.322298') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:19:05.323229', '2024-11-19 15:19:05.323229') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:19:05.324120', '2024-11-19 15:19:05.324120') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:19:05.324913', '2024-11-19 15:19:05.324913') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:19:05.325714', '2024-11-19 15:19:05.325714') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:19:05.326491', '2024-11-19 15:19:05.326491') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:19:16.116762', '2024-11-19 15:19:16.116762') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:19:16.117831', '2024-11-19 15:19:16.117831') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:19:16.118676', '2024-11-19 15:19:16.118676') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:19:16.119520', '2024-11-19 15:19:16.119520') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:19:16.120384', '2024-11-19 15:19:16.120384') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:19:16.121214', '2024-11-19 15:19:16.121214') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:19:16.122054', '2024-11-19 15:19:16.122054') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:19:16.122879', '2024-11-19 15:19:16.122879') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:19:16.123692', '2024-11-19 15:19:16.123692') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('3a9ec8b7-afd7-4be7-918a-6e6dd5b923a4', 'OPEN', '2024-11-19 15:19:16.125496', '2024-11-19 15:19:16.125496') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "created_at", "updated_at") VALUES (1, 12, 12, '2024-11-19 15:19:16.137978', '2024-11-19 15:19:16.137978') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (1, 10, '2024-11-19 15:19:16.138471', '2024-11-19 15:19:16.138471') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (1, 11, '2024-11-19 15:19:16.138943', '2024-11-19 15:19:16.138943') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (1, 12, '2024-11-19 15:19:16.139403', '2024-11-19 15:19:16.139403') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.2ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:20:04.716668', '2024-11-19 15:20:04.716668') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (3.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:20:04.717689', '2024-11-19 15:20:04.717689') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:20:04.721841', '2024-11-19 15:20:04.721841') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:20:04.722682', '2024-11-19 15:20:04.722682') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:20:04.723482', '2024-11-19 15:20:04.723482') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:20:04.724493', '2024-11-19 15:20:04.724493') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:20:04.725277', '2024-11-19 15:20:04.725277') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:20:04.726188', '2024-11-19 15:20:04.726188') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:20:04.726982', '2024-11-19 15:20:04.726982') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 15:20:04.731571', '2024-11-19 15:20:04.731571') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 15:20:04.736050', '2024-11-19 15:20:04.736050') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('55377269-3855-4d13-b5bc-604cdbc244d6', 'OPEN', '2024-11-19 15:20:04.737236', '2024-11-19 15:20:04.737236') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 13 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "created_at", "updated_at") VALUES (2, 15, 15, '2024-11-19 15:20:04.744738', '2024-11-19 15:20:04.744738') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (2, 13, '2024-11-19 15:20:04.745279', '2024-11-19 15:20:04.745279') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (2, 14, '2024-11-19 15:20:04.745751', '2024-11-19 15:20:04.745751') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (2, 15, '2024-11-19 15:20:04.746198', '2024-11-19 15:20:04.746198') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "offers" WHERE "offers"."type" = 'Promotion' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.0ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.3ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (4.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.2ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:20:58.539817', '2024-11-19 15:20:58.539817') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:20:58.544318', '2024-11-19 15:20:58.544318') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:20:58.545184', '2024-11-19 15:20:58.545184') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:20:58.545990', '2024-11-19 15:20:58.545990') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:20:58.547038', '2024-11-19 15:20:58.547038') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:20:58.547814', '2024-11-19 15:20:58.547814') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:20:58.548597', '2024-11-19 15:20:58.548597') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:20:58.549630', '2024-11-19 15:20:58.549630') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:20:58.550560', '2024-11-19 15:20:58.550560') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 15:20:58.551354', '2024-11-19 15:20:58.551354') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 15:20:58.552175', '2024-11-19 15:20:58.552175') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('d1eb03dc-723a-4c10-9bdb-c3cc965873ab', 'OPEN', '2024-11-19 15:20:58.553050', '2024-11-19 15:20:58.553050') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 16 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "created_at", "updated_at") VALUES (3, 18, 18, '2024-11-19 15:20:58.560389', '2024-11-19 15:20:58.560389') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (3, 16, '2024-11-19 15:20:58.560825', '2024-11-19 15:20:58.560825') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (3, 17, '2024-11-19 15:20:58.561286', '2024-11-19 15:20:58.561286') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (3, 18, '2024-11-19 15:20:58.564670', '2024-11-19 15:20:58.564670') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' AND "offers"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Discount' AND "offers"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (0.2ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (4.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.3ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.2ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.2ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.2ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.4ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 15:22:07.970793', '2024-11-19 15:22:07.970793') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 15:22:07.975616', '2024-11-19 15:22:07.975616') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 15:22:07.976465', '2024-11-19 15:22:07.976465') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 15:22:07.977274', '2024-11-19 15:22:07.977274') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 15:22:07.978339', '2024-11-19 15:22:07.978339') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 15:22:07.979100', '2024-11-19 15:22:07.979100') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 15:22:07.979873', '2024-11-19 15:22:07.979873') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 15:22:07.980913', '2024-11-19 15:22:07.980913') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 15:22:07.981785', '2024-11-19 15:22:07.981785') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 15:22:07.982594', '2024-11-19 15:22:07.982594') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 15:22:07.983413', '2024-11-19 15:22:07.983413') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('81e2c54f-226c-4fa1-8928-8883926eca52', 'OPEN', '2024-11-19 15:22:07.984270', '2024-11-19 15:22:07.984270') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 19 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "created_at", "updated_at") VALUES (4, 21, 21, '2024-11-19 15:22:07.991780', '2024-11-19 15:22:07.991780') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (4, 19, '2024-11-19 15:22:07.992234', '2024-11-19 15:22:07.992234') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (4, 20, '2024-11-19 15:22:07.992701', '2024-11-19 15:22:07.992701') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Create (0.0ms)[0m  [1m[32mINSERT INTO "order_item_ingredients" ("order_item_id", "ingredient_id", "created_at", "updated_at") VALUES (4, 21, '2024-11-19 15:22:07.996274', '2024-11-19 15:22:07.996274') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (4, 5, '2024-11-19 15:22:07.999262', '2024-11-19 15:22:07.999262') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (4, 6, '2024-11-19 15:22:08.000612', '2024-11-19 15:22:08.000612') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Count (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Load (5.6ms)[0m  [1m[34mSELECT "order_item_ingredients".* FROM "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.3ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItemIngredient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "order_item_ingredients" WHERE "order_item_ingredients"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.1ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.1ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.1ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.1ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.1ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItemIngredients (20241119140813)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "order_item_ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20241119140813' /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119132033)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20241119132033' /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119132033)
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (21.9ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (11.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:00:07.765089', '2024-11-19 16:00:07.765092') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '1054b38713b1780d4a6d406a821d47f471bcea75', '2024-11-19 16:00:07.768238', '2024-11-19 16:00:07.768240') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (3.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (72.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (136.8ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (69.1ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (10.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:10:06.823485', '2024-11-19 16:10:06.823486') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '75afca33f13d1a994c441357ff2b77f0549dc616', '2024-11-19 16:10:06.825298', '2024-11-19 16:10:06.825298') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:10:06.863708', '2024-11-19 16:10:06.863709') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 16:10:06.864936' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '75afca33f13d1a994c441357ff2b77f0549dc616', '2024-11-19 16:10:06.865648', '2024-11-19 16:10:06.865649') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (67.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (36.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (114.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (64.1ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (9.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:11:04.570320', '2024-11-19 16:11:04.570324') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '75afca33f13d1a994c441357ff2b77f0549dc616', '2024-11-19 16:11:04.573620', '2024-11-19 16:11:04.573622') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (7.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:11:04.620846', '2024-11-19 16:11:04.620847') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 16:11:04.621867' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '75afca33f13d1a994c441357ff2b77f0549dc616', '2024-11-19 16:11:04.622841', '2024-11-19 16:11:04.622842') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Count (2.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (70.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (36.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (110.7ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (50.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (10.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:13:53.760516', '2024-11-19 16:13:53.760517') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '75afca33f13d1a994c441357ff2b77f0549dc616', '2024-11-19 16:13:53.762119', '2024-11-19 16:13:53.762120') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (5.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119135237) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119132033),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 16:13:53.797629', '2024-11-19 16:13:53.797630') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 16:13:53.798516' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '75afca33f13d1a994c441357ff2b77f0549dc616', '2024-11-19 16:13:53.799366', '2024-11-19 16:13:53.799367') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119161418') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (29.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (2.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (1.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (2.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 16:15:35.302014', '2024-11-19 16:15:35.302014') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 16:15:35.306658', '2024-11-19 16:15:35.306658') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 16:15:35.308386', '2024-11-19 16:15:35.308386') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.0ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 16:15:35.314191', '2024-11-19 16:15:35.314191') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 16:15:35.316144', '2024-11-19 16:15:35.316144') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 16:15:35.317567', '2024-11-19 16:15:35.317567') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.3ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 16:15:35.323932', '2024-11-19 16:15:35.323932') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 16:15:35.330213', '2024-11-19 16:15:35.330213') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 16:15:35.331799', '2024-11-19 16:15:35.331799') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.3ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 16:15:35.340945', '2024-11-19 16:15:35.340945') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 16:15:35.344547', '2024-11-19 16:15:35.344547') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.0ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('bf3766b1-c650-41ef-bd7b-d83d9deea1fd', 'OPEN', '2024-11-19 16:15:35.349979', '2024-11-19 16:15:35.349979') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Count (28.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" ORDER BY "pizzas"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" ORDER BY "pizzas"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (1.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" ORDER BY "pizza_sizes"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.8ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20241119161418' /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119161418') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (1.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" ORDER BY "pizza_sizes"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" ORDER BY "pizzas"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (3.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 16:20:58.382493', '2024-11-19 16:20:58.382493') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.8ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.6ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.0ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (4.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.0ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.1ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 16:21:07.163885', '2024-11-19 16:21:07.163885') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 16:21:07.166078', '2024-11-19 16:21:07.166078') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 16:21:07.167628', '2024-11-19 16:21:07.167628') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.8ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 16:21:07.173020', '2024-11-19 16:21:07.173020') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 16:21:07.174699', '2024-11-19 16:21:07.174699') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.8ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 16:21:07.176241', '2024-11-19 16:21:07.176241') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 16:21:07.177953', '2024-11-19 16:21:07.177953') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 16:21:07.179617', '2024-11-19 16:21:07.179617') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 16:21:07.181271', '2024-11-19 16:21:07.181271') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 16:21:07.183029', '2024-11-19 16:21:07.183029') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 16:21:07.184907', '2024-11-19 16:21:07.184907') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('5a9bfc24-02c4-4c48-9146-fc4e3eda98be', 'OPEN', '2024-11-19 16:21:07.186748', '2024-11-19 16:21:07.186748') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 6, 6, NULL, NULL, '2024-11-19 16:21:07.192408', '2024-11-19 16:21:07.192408') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('4f843e65-3441-4ecc-baa0-ef9451fae200', 'OPEN', '2024-11-19 16:21:07.194117', '2024-11-19 16:21:07.194117') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (1.1ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.7ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.5ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 16:22:48.605311', '2024-11-19 16:22:48.605311') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 16:22:48.606990', '2024-11-19 16:22:48.606990') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 16:22:48.608514', '2024-11-19 16:22:48.608514') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 16:22:48.609822', '2024-11-19 16:22:48.609822') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 16:22:48.611203', '2024-11-19 16:22:48.611203') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 16:22:48.612772', '2024-11-19 16:22:48.612772') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (2.0ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 16:22:48.614421', '2024-11-19 16:22:48.614421') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 16:22:48.617350', '2024-11-19 16:22:48.617350') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 16:22:48.618576', '2024-11-19 16:22:48.618576') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 16:22:48.619889', '2024-11-19 16:22:48.619889') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.5ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 16:22:48.621601', '2024-11-19 16:22:48.621601') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('5abe60f3-a16a-4237-adeb-934081be10e0', 'OPEN', '2024-11-19 16:22:48.622979', '2024-11-19 16:22:48.622979') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 9, 9, NULL, NULL, '2024-11-19 16:22:48.628765', '2024-11-19 16:22:48.628765') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('4823cdc6-bf34-44c2-a03c-f8a61aaf4f4c', 'OPEN', '2024-11-19 16:22:48.630011', '2024-11-19 16:22:48.630011') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 7, 9, '{Onions,Cheese,Olives}', NULL, '2024-11-19 16:22:48.632481', '2024-11-19 16:22:48.632481') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 9, 8, NULL, '{Onions,Olives}', '2024-11-19 16:22:48.634718', '2024-11-19 16:22:48.634718') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 7, 7, NULL, NULL, '2024-11-19 16:22:48.640775', '2024-11-19 16:22:48.640775') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('c8760a75-e5a9-4061-a802-86b1b2098691', 'OPEN', '2024-11-19 16:22:48.642122', '2024-11-19 16:22:48.642122') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 0 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.2ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (4.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.4ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 16:23:29.679295', '2024-11-19 16:23:29.679295') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 16:23:29.681055', '2024-11-19 16:23:29.681055') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 16:23:29.682598', '2024-11-19 16:23:29.682598') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 16:23:29.684268', '2024-11-19 16:23:29.684268') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 16:23:29.685797', '2024-11-19 16:23:29.685797') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 16:23:29.687328', '2024-11-19 16:23:29.687328') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 16:23:29.688665', '2024-11-19 16:23:29.688665') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 16:23:29.690496', '2024-11-19 16:23:29.690496') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 16:23:29.691934', '2024-11-19 16:23:29.691934') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 16:23:29.693260', '2024-11-19 16:23:29.693260') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 16:23:29.694988', '2024-11-19 16:23:29.694988') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('917ee280-b641-4d47-bd64-ec12408e53df', 'OPEN', '2024-11-19 16:23:29.696700', '2024-11-19 16:23:29.696700') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (7, 12, 12, NULL, NULL, '2024-11-19 16:23:29.701702', '2024-11-19 16:23:29.701702') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (3.4ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('f9e0bcac-0c1f-4528-b85e-4fb19dddf843', 'OPEN', '2024-11-19 16:23:29.703336', '2024-11-19 16:23:29.703336') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 10, 12, '{Onions,Cheese,Olives}', NULL, '2024-11-19 16:23:29.708603', '2024-11-19 16:23:29.708603') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 12, 11, NULL, '{Onions,Olives}', '2024-11-19 16:23:29.711124', '2024-11-19 16:23:29.711124') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 10, 10, NULL, NULL, '2024-11-19 16:23:29.713269', '2024-11-19 16:23:29.713269') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('f03c2cbf-6471-4360-ace2-dc273a4d8c81', 'OPEN', '2024-11-19 16:23:29.714453', '2024-11-19 16:23:29.714453') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 11, 11, '{Onions}', '{Cheese}', '2024-11-19 16:23:29.717442', '2024-11-19 16:23:29.717442') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 11, 10, '{}', '{}', '2024-11-19 16:23:29.719786', '2024-11-19 16:23:29.719786') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 11, 10, '{}', '{}', '2024-11-19 16:23:29.722353', '2024-11-19 16:23:29.722353') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 11, 10, '{}', '{}', '2024-11-19 16:23:29.724837', '2024-11-19 16:23:29.724837') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 11, 10, '{Olives}', '{}', '2024-11-19 16:23:29.727325', '2024-11-19 16:23:29.727325') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.9ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (9, 7, '2024-11-19 16:23:29.733607', '2024-11-19 16:23:29.733607') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (9, 8, '2024-11-19 16:23:29.737918', '2024-11-19 16:23:29.737918') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Started GET "/" for 127.0.0.1 at 2024-11-19 21:27:51 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/suhafbutt/.asdf/installs/ruby/3.3.0/lib/ruby/gems/3.3.0/gems/railties-8.0.0/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/suhafbutt/.asdf/installs/ruby/3.3.0/lib/ruby/gems/3.3.0/gems/railties-8.0.0/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 3.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:27:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (8.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 7.4ms | GC: 5.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 26.6ms | GC: 5.6ms)
  Rendered layout layouts/application.html.erb (Duration: 26.7ms | GC: 5.6ms)
Completed 500 Internal Server Error in 76ms (ActiveRecord: 18.4ms (1 query, 0 cached) | GC: 5.7ms)


  
ActionView::Template::Error (undefined method `offer_id' for an instance of Order)
Caused by: NoMethodError (undefined method `offer_id' for an instance of Order)

Information for: ActionView::Template::Error (undefined method `offer_id' for an instance of Order):
    1: <div id="<%= dom_id order %>">
    2:   <p>
    3:     <strong>Offer:</strong>
    4:     <%= order.offer_id %>
    5:   </p>
    6: 
    7:   <p>
  
app/views/orders/_order.html.erb:4
app/views/orders/index.html.erb:9
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `offer_id' for an instance of Order):
  
app/views/orders/_order.html.erb:4
app/views/orders/index.html.erb:9
app/views/orders/index.html.erb:8
Started GET "/favicon.ico" for 127.0.0.1 at 2024-11-19 21:27:57 +0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:28:30 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (2.9ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 16.3ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 24.5ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 24.6ms | GC: 1.2ms)
Completed 500 Internal Server Error in 47ms (ActiveRecord: 12.6ms (2 queries, 0 cached) | GC: 3.0ms)


  
ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x000000012379d168>)
Caused by: NoMethodError (undefined method `order_path' for an instance of #<Class:0x000000012379d168>)

Information for: ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x000000012379d168>):
     8:   <% @orders.each do |order| %>
     9:     <%= render order %>
    10:     <p>
    11:       <%= link_to "Show this order", order %>
    12:     </p>
    13:   <% end %>
    14: </div>
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `order_path' for an instance of #<Class:0x000000012379d168>):
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:29:25 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 8.2ms | GC: 0.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.1ms | GC: 2.5ms)
  Rendered layout layouts/application.html.erb (Duration: 18.7ms | GC: 3.0ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 9.7ms (2 queries, 0 cached) | GC: 5.9ms)


  
ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>)
Caused by: NoMethodError (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>)

Information for: ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>):
     8:   <% @orders.each do |order| %>
     9:     <%= render order %>
    10:     <p>
    11:       <%= link_to "Show this order", order %>
    12:     </p>
    13:   <% end %>
    14: </div>
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>):
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:29:27 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 500 Internal Server Error in 41ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>)
Caused by: NoMethodError (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>)

Information for: ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>):
     8:   <% @orders.each do |order| %>
     9:     <%= render order %>
    10:     <p>
    11:       <%= link_to "Show this order", order %>
    12:     </p>
    13:   <% end %>
    14: </div>
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `order_path' for an instance of #<Class:0x00000001245765f0>):
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:30:02 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 8.8ms | GC: 0.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | GC: 0.4ms)
Completed 500 Internal Server Error in 38ms (ActiveRecord: 10.6ms (2 queries, 0 cached) | GC: 1.1ms)


  
ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>)
Caused by: NoMethodError (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>)

Information for: ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>):
     8:   <% @orders.each do |order| %>
     9:     <%= render order %>
    10:     <p>
    11:       <%= link_to "Show this order", order %>
    12:     </p>
    13:   <% end %>
    14: </div>
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>):
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:30:03 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>)
Caused by: NoMethodError (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>)

Information for: ActionView::Template::Error (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>):
     8:   <% @orders.each do |order| %>
     9:     <%= render order %>
    10:     <p>
    11:       <%= link_to "Show this order", order %>
    12:     </p>
    13:   <% end %>
    14: </div>
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `order_path' for an instance of #<Class:0x0000000123790be8>):
  
app/views/orders/index.html.erb:11
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:30:32 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 7.1ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 15.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.7ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 11.7ms | ActiveRecord: 8.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/application-8b441ae0.css" for 127.0.0.1 at 2024-11-19 21:30:32 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:30:32 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:30:32 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:30:33 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:30:33 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:30:33 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:30:33 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:30:33 +0500
Started GET "/orders/new" for 127.0.0.1 at 2024-11-19 21:30:38 +0500
Processing by OrdersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (Duration: 16.6ms | GC: 1.2ms)
  Rendered orders/new.html.erb within layouts/application (Duration: 17.6ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 17.9ms | GC: 1.2ms)
Completed 200 OK in 55ms (Views: 18.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.2ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:30:39 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.8ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.8ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.7ms | GC: 0.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 7.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 7.5ms | GC: 0.4ms)
Completed 200 OK in 46ms (Views: 5.0ms | ActiveRecord: 2.8ms (4 queries, 0 cached) | GC: 0.4ms)


Started GET "/orders/new" for 127.0.0.1 at 2024-11-19 21:30:44 +0500
Processing by OrdersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered orders/new.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 2.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:30:45 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.7ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.9ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.5ms)
Completed 200 OK in 50ms (Views: 5.3ms | ActiveRecord: 2.4ms (4 queries, 0 cached) | GC: 0.5ms)


Started GET "/orders/new" for 127.0.0.1 at 2024-11-19 21:30:46 +0500
Processing by OrdersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered orders/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.2ms)
Completed 200 OK in 28ms (Views: 2.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:30:48 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.4ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.3ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | GC: 0.3ms)
Completed 200 OK in 41ms (Views: 3.9ms | ActiveRecord: 1.9ms (4 queries, 0 cached) | GC: 0.3ms)


  [1m[36mOrder Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:34:08 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 21.2ms | GC: 0.7ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.4ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 35.2ms | GC: 4.7ms)
  Rendered layout layouts/application.html.erb (Duration: 36.4ms | GC: 4.9ms)
Completed 200 OK in 58ms (Views: 14.8ms | ActiveRecord: 23.4ms (4 queries, 0 cached) | GC: 8.1ms)


Started GET "/orders/new" for 127.0.0.1 at 2024-11-19 21:34:10 +0500
Processing by OrdersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered orders/new.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 2.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:34:12 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:4
  Rendered orders/_order.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 2.9ms | ActiveRecord: 1.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (12.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (1.1ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 5.5ms | GC: 0.7ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 25.2ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 26.1ms | GC: 0.8ms)
Completed 200 OK in 46ms (Views: 7.5ms | ActiveRecord: 19.5ms (4 queries, 0 cached) | GC: 0.9ms)


Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:40:29 +0500
Started GET "/orders/new" for 127.0.0.1 at 2024-11-19 21:40:31 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:40:31 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Processing by OrdersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered orders/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 30ms (Views: 1.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 4.6ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:52:25 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (1.7ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 5.5ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 13.1ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.8ms)
Completed 200 OK in 52ms (Views: 11.1ms | ActiveRecord: 11.1ms (4 queries, 0 cached) | GC: 1.1ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:52:26 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:52:26 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 9.9ms | GC: 0.2ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 0.5ms)
Completed 200 OK in 45ms (Views: 9.5ms | ActiveRecord: 16.8ms (4 queries, 0 cached) | GC: 0.8ms)


Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:54:16 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/assets/turbo.min-5dd5a71a.js.map" for 127.0.0.1 at 2024-11-19 21:54:20 +0500
Started GET "/assets/stimulus.min-2395e199.js.map" for 127.0.0.1 at 2024-11-19 21:54:20 +0500
  [1m[36mOrder Load (18.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:55:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 16.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 5.3ms | GC: 4.2ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 30.4ms | GC: 4.2ms)
  Rendered layout layouts/application.html.erb (Duration: 32.0ms | GC: 4.5ms)
Completed 200 OK in 57ms (Views: 15.4ms | ActiveRecord: 20.7ms (4 queries, 0 cached) | GC: 4.5ms)


Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:55:56 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:55:56 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:55:56 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:55:56 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:55:57 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:55:57 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:55:57 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:55:57 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:55:57 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:56:35 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 4.2ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.2ms)
Completed 200 OK in 32ms (Views: 3.8ms | ActiveRecord: 1.1ms (4 queries, 0 cached) | GC: 0.2ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:56:35 +0500
Turbo::StreamsChannel stopped streaming from orders
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:56:35 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:56:35 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.5ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | GC: 0.2ms)
Completed 200 OK in 40ms (Views: 4.9ms | ActiveRecord: 1.3ms (4 queries, 0 cached) | GC: 0.2ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Turbo::StreamsChannel stopped streaming from orders
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:56:40 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.4ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.0ms)
Completed 200 OK in 46ms (Views: 5.2ms | ActiveRecord: 1.8ms (4 queries, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Turbo::StreamsChannel stopped streaming from orders
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:56:43 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:56:44 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:56:44 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 9.1ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 15.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 10.3ms | ActiveRecord: 11.2ms (4 queries, 0 cached) | GC: 0.5ms)


Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:59:27 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.7ms | GC: 0.4ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 7.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | GC: 0.4ms)
Completed 200 OK in 44ms (Views: 6.3ms | ActiveRecord: 2.3ms (4 queries, 0 cached) | GC: 0.4ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Turbo::StreamsChannel stopped streaming from orders
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 21:59:28 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 21:59:29 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 21:59:29 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:4
  Rendered orders/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 4.0ms | ActiveRecord: 7.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:00:41 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:01:13 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:4
  Rendered orders/index.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 2.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:01:13 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:01:13 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:01:13 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:01:13 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:01:13 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 22:01:14 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:01:14 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:01:14 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:01:14 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:01:14 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:02:43 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 11.0ms | GC: 0.2ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 24.6ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 27.6ms | GC: 1.0ms)
Completed 200 OK in 61ms (Views: 13.0ms | ActiveRecord: 22.0ms (4 queries, 0 cached) | GC: 5.0ms)


Started GET "/assets/controllers/application-b4ba3b51.js" for 127.0.0.1 at 2024-11-19 22:02:43 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:02:43 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:02:43 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.0ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.1ms)
Completed 200 OK in 46ms (Views: 6.6ms | ActiveRecord: 1.8ms (4 queries, 0 cached) | GC: 0.3ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Turbo::StreamsChannel stopped streaming from orders
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:02:50 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:02:51 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:02:51 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.7ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (1.0ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 7.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 5.2ms | ActiveRecord: 3.1ms (4 queries, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Turbo::StreamsChannel stopped streaming from orders
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel stopped streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:02:52 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 13.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 21.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | GC: 0.0ms)
Completed 200 OK in 55ms (Views: 9.9ms | ActiveRecord: 17.4ms (4 queries, 0 cached) | GC: 1.9ms)


Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:04:42 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:04:43 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:04:43 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 9.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 16.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 9.3ms | ActiveRecord: 11.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:07:30 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:07:45 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 0.4ms)
Completed 200 OK in 30ms (Views: 3.9ms | ActiveRecord: 1.7ms (4 queries, 0 cached) | GC: 0.4ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:08:03 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 8.4ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 9.6ms | ActiveRecord: 9.3ms (4 queries, 0 cached) | GC: 0.6ms)


Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:08:03 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:08:03 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:08:03 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.7ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.4ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.4ms)
Completed 200 OK in 43ms (Views: 5.4ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 0.4ms)


Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:08:04 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:08:05 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:08:05 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:08:05 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:08:08 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.5ms)
Completed 200 OK in 43ms (Views: 5.8ms | ActiveRecord: 2.0ms (4 queries, 0 cached) | GC: 0.5ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:08:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 8.4ms | GC: 0.3ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.4ms | GC: 0.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.9ms | GC: 3.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | GC: 3.0ms)
Completed 200 OK in 42ms (Views: 12.1ms | ActiveRecord: 11.4ms (4 queries, 0 cached) | GC: 3.0ms)


Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:08:57 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:08:57 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:08:57 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:08:57 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:08:57 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:08:57 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.6ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.3ms)
Completed 200 OK in 43ms (Views: 5.8ms | ActiveRecord: 1.8ms (4 queries, 0 cached) | GC: 0.3ms)


Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:08:58 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 7.5ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14.4ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 0.6ms)
Completed 200 OK in 40ms (Views: 8.4ms | ActiveRecord: 9.3ms (4 queries, 0 cached) | GC: 0.9ms)


Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.7ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.6ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 4.7ms | ActiveRecord: 2.2ms (4 queries, 0 cached) | GC: 0.3ms)


Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:09:05 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:09:06 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:09:20 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 6.9ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 13.6ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | GC: 0.3ms)
Completed 200 OK in 39ms (Views: 9.4ms | ActiveRecord: 7.8ms (4 queries, 0 cached) | GC: 0.6ms)


Started GET "/application.js" for 127.0.0.1 at 2024-11-19 22:09:20 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:09:20 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:09:20 +0500
  
ActionController::RoutingError (No route matches [GET] "/application.js"):
  
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:09:20 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:09:20 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:09:21 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:09:21 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:09:21 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 8.6ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14.7ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | GC: 0.3ms)
Completed 200 OK in 38ms (Views: 8.6ms | ActiveRecord: 9.9ms (4 queries, 0 cached) | GC: 0.4ms)


Started GET "/application.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
  
ActionController::RoutingError (No route matches [GET] "/application.js"):
  
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:09:35 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 10.8ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 16.8ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | GC: 0.5ms)
Completed 200 OK in 47ms (Views: 9.5ms | ActiveRecord: 10.2ms (4 queries, 0 cached) | GC: 0.7ms)


Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:09:43 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.7ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.9ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | GC: 0.1ms)
Completed 200 OK in 42ms (Views: 4.7ms | ActiveRecord: 2.0ms (4 queries, 0 cached) | GC: 0.1ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/assets/controllers/application-a0f81b95.js" for 127.0.0.1 at 2024-11-19 22:09:44 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:09:45 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:09:45 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:09:45 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:10:08 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 9.1ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.1ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 0.5ms)
Completed 200 OK in 42ms (Views: 9.0ms | ActiveRecord: 12.1ms (4 queries, 0 cached) | GC: 0.8ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:11:10 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 9.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.0ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 11.6ms | ActiveRecord: 11.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:11:11 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | GC: 0.0ms)
Completed 200 OK in 41ms (Views: 4.6ms | ActiveRecord: 1.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:11:44 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 8.4ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 17.0ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | GC: 0.3ms)
Completed 200 OK in 38ms (Views: 8.8ms | ActiveRecord: 11.8ms (4 queries, 0 cached) | GC: 0.4ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:12:11 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 7.4ms | GC: 0.2ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 13.8ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | GC: 0.6ms)
Completed 200 OK in 47ms (Views: 10.7ms | ActiveRecord: 9.4ms (4 queries, 0 cached) | GC: 3.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:12:12 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.2ms)
Completed 200 OK in 44ms (Views: 5.6ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 0.4ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 9.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | GC: 2.1ms)
Completed 200 OK in 44ms (Views: 10.7ms | ActiveRecord: 9.8ms (4 queries, 0 cached) | GC: 2.1ms)


Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:12:28 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:12:29 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.5ms | GC: 0.2ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.0ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | GC: 0.2ms)
Completed 200 OK in 40ms (Views: 4.9ms | ActiveRecord: 1.8ms (4 queries, 0 cached) | GC: 0.2ms)


Started GET "/assets/turbo.min-fae85750.js" for 127.0.0.1 at 2024-11-19 22:12:29 +0500
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2024-11-19 22:12:29 +0500
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2024-11-19 22:12:29 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-19 22:12:30 +0500
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2024-11-19 22:12:30 +0500
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2024-11-19 22:12:30 +0500
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:15:45 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 8.5ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.6ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 16.1ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | GC: 0.1ms)
Completed 200 OK in 44ms (Views: 10.6ms | ActiveRecord: 11.7ms (4 queries, 0 cached) | GC: 0.7ms)


Started GET "/assets/controllers/application-bd561f53.js" for 127.0.0.1 at 2024-11-19 22:15:45 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:15:45 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:15:45 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Writing application-8b441ae0.css
Writing application-bfcdf840.js
Writing controllers/hello_controller-708796bd.js
Writing controllers/index-ee64e1f1.js
Writing controllers/application-bd561f53.js
Writing stimulus.min-4b1e420e.js
Writing stimulus-d59b3b7f.js
Writing stimulus.min-2395e199.js.map
Writing stimulus-importmap-autoloader-64cc03e1.js
Writing stimulus-autoloader-9d447422.js
Writing stimulus-loading-1fc53fe7.js
Writing turbo.min-5dd5a71a.js.map
Writing turbo-86e38c3c.js
Writing turbo.min-fae85750.js
Writing actiontext.esm-f1c04d34.js
Writing actiontext-a4ee937e.js
Writing trix-4f753c97.js
Writing trix-c4e7be2d.css
Writing action_cable-5212cfee.js
Writing actioncable.esm-e0ec9819.js
Writing actioncable-ac25813f.js
Writing activestorage.esm-f2909226.js
Writing activestorage-32201f68.js
Writing rails-ujs.esm-e925103b.js
Writing rails-ujs-20eaf715.js
Writing application-8b441ae0.css
Writing application-bfcdf840.js
Writing controllers/hello_controller-708796bd.js
Writing controllers/index-ee64e1f1.js
Writing controllers/application-bd561f53.js
Writing stimulus.min-4b1e420e.js
Writing stimulus-d59b3b7f.js
Writing stimulus.min-2395e199.js.map
Writing stimulus-importmap-autoloader-64cc03e1.js
Writing stimulus-autoloader-9d447422.js
Writing stimulus-loading-1fc53fe7.js
Writing turbo.min-5dd5a71a.js.map
Writing turbo-86e38c3c.js
Writing turbo.min-fae85750.js
Writing actiontext.esm-f1c04d34.js
Writing actiontext-a4ee937e.js
Writing trix-4f753c97.js
Writing trix-c4e7be2d.css
Writing action_cable-5212cfee.js
Writing actioncable.esm-e0ec9819.js
Writing actioncable-ac25813f.js
Writing activestorage.esm-f2909226.js
Writing activestorage-32201f68.js
Writing rails-ujs.esm-e925103b.js
Writing rails-ujs-20eaf715.js
Writing application-8b441ae0.css
Writing application-bfcdf840.js
Writing controllers/hello_controller-708796bd.js
Writing controllers/index-ee64e1f1.js
Writing controllers/application-bd561f53.js
Writing stimulus.min-4b1e420e.js
Writing stimulus-d59b3b7f.js
Writing stimulus.min-2395e199.js.map
Writing stimulus-importmap-autoloader-64cc03e1.js
Writing stimulus-autoloader-9d447422.js
Writing stimulus-loading-1fc53fe7.js
Writing turbo.min-5dd5a71a.js.map
Writing turbo-86e38c3c.js
Writing turbo.min-fae85750.js
Writing actiontext.esm-f1c04d34.js
Writing actiontext-a4ee937e.js
Writing trix-4f753c97.js
Writing trix-c4e7be2d.css
Writing action_cable-5212cfee.js
Writing actioncable.esm-e0ec9819.js
Writing actioncable-ac25813f.js
Writing activestorage.esm-f2909226.js
Writing activestorage-32201f68.js
Writing rails-ujs.esm-e925103b.js
Writing rails-ujs-20eaf715.js
Writing application-8b441ae0.css
Writing application-bfcdf840.js
Writing controllers/hello_controller-708796bd.js
Writing controllers/index-ee64e1f1.js
Writing controllers/application-bd561f53.js
Writing stimulus.min-4b1e420e.js
Writing stimulus-d59b3b7f.js
Writing stimulus.min-2395e199.js.map
Writing stimulus-importmap-autoloader-64cc03e1.js
Writing stimulus-autoloader-9d447422.js
Writing stimulus-loading-1fc53fe7.js
Writing turbo.min-5dd5a71a.js.map
Writing turbo-86e38c3c.js
Writing turbo.min-fae85750.js
Writing actiontext.esm-f1c04d34.js
Writing actiontext-a4ee937e.js
Writing trix-4f753c97.js
Writing trix-c4e7be2d.css
Writing action_cable-5212cfee.js
Writing actioncable.esm-e0ec9819.js
Writing actioncable-ac25813f.js
Writing activestorage.esm-f2909226.js
Writing activestorage-32201f68.js
Writing rails-ujs.esm-e925103b.js
Writing rails-ujs-20eaf715.js
Writing application-8b441ae0.css
Writing application-bfcdf840.js
Writing controllers/hello_controller-708796bd.js
Writing controllers/index-ee64e1f1.js
Writing controllers/application-bd561f53.js
Writing stimulus.min-4b1e420e.js
Writing stimulus-d59b3b7f.js
Writing stimulus.min-2395e199.js.map
Writing stimulus-importmap-autoloader-64cc03e1.js
Writing stimulus-autoloader-9d447422.js
Writing stimulus-loading-1fc53fe7.js
Writing turbo.min-5dd5a71a.js.map
Writing turbo-86e38c3c.js
Writing turbo.min-fae85750.js
Writing actiontext.esm-f1c04d34.js
Writing actiontext-a4ee937e.js
Writing trix-4f753c97.js
Writing trix-c4e7be2d.css
Writing action_cable-5212cfee.js
Writing actioncable.esm-e0ec9819.js
Writing actioncable-ac25813f.js
Writing activestorage.esm-f2909226.js
Writing activestorage-32201f68.js
Writing rails-ujs.esm-e925103b.js
Writing rails-ujs-20eaf715.js
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:21:15 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:21:15 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:21:49 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:21:49 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:21:49 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (1.1ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 12.2ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.0ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 26.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.3ms | GC: 0.0ms)
Completed 200 OK in 94ms (Views: 18.9ms | ActiveRecord: 20.4ms (4 queries, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:21:49 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:21:50 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:21:50 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:24:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (10.8ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 11.8ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 2.0ms | GC: 0.7ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.1ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | GC: 1.3ms)
Completed 200 OK in 83ms (Views: 6.9ms | ActiveRecord: 12.9ms (4 queries, 0 cached) | GC: 30.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:24:29 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:24:29 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:24:29 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:25:05 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.3ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 4.2ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.3ms)
Completed 200 OK in 34ms (Views: 4.1ms | ActiveRecord: 1.2ms (4 queries, 0 cached) | GC: 0.3ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:05 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:25:05 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:05 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:25:06 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.9ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 2.1ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 7.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.0ms)
Completed 200 OK in 46ms (Views: 5.5ms | ActiveRecord: 2.6ms (4 queries, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:06 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:25:06 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:06 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:25:27 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.4ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.3ms)
  [1m[36mPromotion Ids (0.2ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 0.9ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.5ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.6ms)
Completed 200 OK in 48ms (Views: 5.6ms | ActiveRecord: 1.5ms (4 queries, 0 cached) | GC: 9.4ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:27 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:25:27 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:27 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:25:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Ids (0.5ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 7 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.7ms | GC: 0.1ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mPromotion Ids (0.4ms)[0m  [1m[34mSELECT "offers"."id" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:5
  Rendered orders/_order.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | GC: 0.1ms)
Completed 200 OK in 44ms (Views: 5.1ms | ActiveRecord: 2.2ms (4 queries, 0 cached) | GC: 0.1ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:28 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:25:28 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:25:28 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:27:39 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.4ms | GC: 11.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.4ms | GC: 11.3ms)
Completed 200 OK in 45ms (Views: 17.5ms | ActiveRecord: 5.8ms (1 query, 0 cached) | GC: 11.3ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:27:40 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:27:40 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/7" for 127.0.0.1 at 2024-11-19 22:27:49 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"7"}
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 7 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
Completed 400 Bad Request in 36ms (ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty or invalid: order):
  
app/controllers/orders_controller.rb:46:in `order_params'
app/controllers/orders_controller.rb:30:in `block in update'
app/controllers/orders_controller.rb:29:in `update'
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"Im9yZGVycyI=--5951f4a84881703566f9e6cdfd99689d05ea3363fcf01d3a592dd00fbab23977"}
Turbo::StreamsChannel stopped streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:29:34 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 7.5ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | GC: 2.1ms)
Completed 200 OK in 33ms (Views: 7.5ms | ActiveRecord: 5.2ms (1 query, 0 cached) | GC: 2.1ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2024-11-19 22:29:34 +0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:29:35 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:29:35 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/7" for 127.0.0.1 at 2024-11-19 22:29:37 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"7"}
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 7 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (1.3ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 17:29:37.873347' WHERE "orders"."id" = 7 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
[ActionCable] Broadcasting to orders: "<turbo-stream action=\"remove\" target=\"order_7\"></turbo-stream>"
Redirected to http://127.0.0.1:3000/orders/7
Turbo::StreamsChannel transmitting "<turbo-stream action=\"remove\" target=\"order_7\"></turbo-stream>" (via streamed from orders)
Completed 302 Found in 49ms (ActiveRecord: 4.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders/7" for 127.0.0.1 at 2024-11-19 22:29:37 +0500
  
ActionController::RoutingError (No route matches [GET] "/orders/7"):
  
Unsubscribing from channel: {"channel":"Turbo::StreamsChannel","signed_stream_name":"Im9yZGVycyI=--5951f4a84881703566f9e6cdfd99689d05ea3363fcf01d3a592dd00fbab23977"}
Turbo::StreamsChannel stopped streaming from orders
[ActiveJob] Enqueued Turbo::Streams::BroadcastStreamJob (Job ID: a523b404-c924-454a-b51b-04c26ff9aa4f) to Async(default) with arguments: "Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc", {:content=>"<turbo-stream request-id=\"bdbc43ee-4140-4a82-81c0-083e3813a53d\" action=\"refresh\"></turbo-stream>"}
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [a523b404-c924-454a-b51b-04c26ff9aa4f] Performing Turbo::Streams::BroadcastStreamJob (Job ID: a523b404-c924-454a-b51b-04c26ff9aa4f) from Async(default) enqueued at 2024-11-19T17:29:38.425184000Z with arguments: "Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc", {:content=>"<turbo-stream request-id=\"bdbc43ee-4140-4a82-81c0-083e3813a53d\" action=\"refresh\"></turbo-stream>"}
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [a523b404-c924-454a-b51b-04c26ff9aa4f] [ActionCable] Broadcasting to Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzc: "<turbo-stream request-id=\"bdbc43ee-4140-4a82-81c0-083e3813a53d\" action=\"refresh\"></turbo-stream>"
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [a523b404-c924-454a-b51b-04c26ff9aa4f] Performed Turbo::Streams::BroadcastStreamJob (Job ID: a523b404-c924-454a-b51b-04c26ff9aa4f) from Async(default) in 0.63ms
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:31:17 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.8ms)
Completed 200 OK in 29ms (Views: 5.7ms | ActiveRecord: 3.7ms (1 query, 0 cached) | GC: 1.0ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-19 22:31:18 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:31:18 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/8" for 127.0.0.1 at 2024-11-19 22:31:24 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"8"}
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 8 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (1.3ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 17:31:24.111869' WHERE "orders"."id" = 8 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
[ActionCable] Broadcasting to orders: "<turbo-stream action=\"remove\" target=\"order_8\"></turbo-stream>"
Turbo::StreamsChannel transmitting "<turbo-stream action=\"remove\" target=\"order_8\"></turbo-stream>" (via streamed from orders)
Completed 200 OK in 52ms (Views: 0.3ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] Enqueued Turbo::Streams::BroadcastStreamJob (Job ID: 37bdde5c-a978-4167-a48b-1f3028ede092) to Async(default) with arguments: "Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg", {:content=>"<turbo-stream request-id=\"bad66d83-ab78-428d-b256-05213804ea93\" action=\"refresh\"></turbo-stream>"}
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [37bdde5c-a978-4167-a48b-1f3028ede092] Performing Turbo::Streams::BroadcastStreamJob (Job ID: 37bdde5c-a978-4167-a48b-1f3028ede092) from Async(default) enqueued at 2024-11-19T17:31:24.623358000Z with arguments: "Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg", {:content=>"<turbo-stream request-id=\"bad66d83-ab78-428d-b256-05213804ea93\" action=\"refresh\"></turbo-stream>"}
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [37bdde5c-a978-4167-a48b-1f3028ede092] [ActionCable] Broadcasting to Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzg: "<turbo-stream request-id=\"bad66d83-ab78-428d-b256-05213804ea93\" action=\"refresh\"></turbo-stream>"
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [37bdde5c-a978-4167-a48b-1f3028ede092] Performed Turbo::Streams::BroadcastStreamJob (Job ID: 37bdde5c-a978-4167-a48b-1f3028ede092) from Async(default) in 1.32ms
Started PATCH "/orders/9" for 127.0.0.1 at 2024-11-19 22:31:26 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"9"}
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (1.4ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 17:31:26.608039' WHERE "orders"."id" = 9 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
[ActionCable] Broadcasting to orders: "<turbo-stream action=\"remove\" target=\"order_9\"></turbo-stream>"
Completed 200 OK in 43ms (Views: 0.0ms | ActiveRecord: 3.0ms (2 queries, 0 cached) | GC: 0.0ms)


Turbo::StreamsChannel transmitting "<turbo-stream action=\"remove\" target=\"order_9\"></turbo-stream>" (via streamed from orders)
[ActiveJob] Enqueued Turbo::Streams::BroadcastStreamJob (Job ID: 93ef11d9-43a1-48b1-835b-c9164622c57a) to Async(default) with arguments: "Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk", {:content=>"<turbo-stream request-id=\"6bdcd521-8260-4009-bd6d-b9e655ba6067\" action=\"refresh\"></turbo-stream>"}
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [93ef11d9-43a1-48b1-835b-c9164622c57a] Performing Turbo::Streams::BroadcastStreamJob (Job ID: 93ef11d9-43a1-48b1-835b-c9164622c57a) from Async(default) enqueued at 2024-11-19T17:31:27.119368000Z with arguments: "Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk", {:content=>"<turbo-stream request-id=\"6bdcd521-8260-4009-bd6d-b9e655ba6067\" action=\"refresh\"></turbo-stream>"}
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [93ef11d9-43a1-48b1-835b-c9164622c57a] [ActionCable] Broadcasting to Z2lkOi8vZXZlcm1vb2QtY2hhbGxlbmdlL09yZGVyLzk: "<turbo-stream request-id=\"6bdcd521-8260-4009-bd6d-b9e655ba6067\" action=\"refresh\"></turbo-stream>"
[ActiveJob] [Turbo::Streams::BroadcastStreamJob] [93ef11d9-43a1-48b1-835b-c9164622c57a] Performed Turbo::Streams::BroadcastStreamJob (Job ID: 93ef11d9-43a1-48b1-835b-c9164622c57a) from Async(default) in 1.18ms
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:31:38 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/index.html.erb within layouts/application (Duration: 2.9ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | GC: 0.4ms)
Completed 200 OK in 42ms (Views: 3.8ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.4ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-19 22:31:38 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-19 22:31:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.3ms)
Completed 200 OK in 28ms (Views: 3.1ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.8ms)


Started GET "/orders/new" for 127.0.0.1 at 2024-11-19 22:31:57 +0500
Processing by OrdersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (Duration: 2.5ms | GC: 0.1ms)
  Rendered orders/new.html.erb within layouts/application (Duration: 3.3ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.1ms)
Completed 200 OK in 44ms (Views: 4.0ms | ActiveRecord: 4.0ms (0 queries, 0 cached) | GC: 0.3ms)


  [1m[36mOrder Load (124.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mAPP_ENV[0m, [36mAPP_NAME[0m, [36mSECRET_KEY_BASE[0m, [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, [36mREDIS_HOST[0m, and [36mREDIS_PORT[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (117.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (53.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (166.4ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (60.4ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (8.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 19:54:15.233751', '2024-11-19 19:54:15.233752') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '18306bbf74d676cdd2d3beaaa9c69e736cc485d7', '2024-11-19 19:54:15.238408', '2024-11-19 19:54:15.238409') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 19:54:15.276522', '2024-11-19 19:54:15.276523') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 19:54:15.277475' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '18306bbf74d676cdd2d3beaaa9c69e736cc485d7', '2024-11-19 19:54:15.278206', '2024-11-19 19:54:15.278207') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.4ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.2ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 19:54:15.331490', '2024-11-19 19:54:15.331490') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 19:54:15.336053', '2024-11-19 19:54:15.336053') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 19:54:15.337608', '2024-11-19 19:54:15.337608') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (2.2ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 19:54:15.342963', '2024-11-19 19:54:15.342963') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (4.9ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 19:54:15.354656', '2024-11-19 19:54:15.354656') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 19:54:15.360545', '2024-11-19 19:54:15.360545') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 19:54:15.364279', '2024-11-19 19:54:15.364279') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 19:54:15.365790', '2024-11-19 19:54:15.365790') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 19:54:15.367322', '2024-11-19 19:54:15.367322') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 19:54:15.373917', '2024-11-19 19:54:15.373917') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.5ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 19:54:15.376988', '2024-11-19 19:54:15.376988') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('4c196035-58df-46a0-8ae3-fde3fa36a689', 'OPEN', '2024-11-19 19:54:15.380338', '2024-11-19 19:54:15.380338') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 19:54:15.391850', '2024-11-19 19:54:15.391850') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('38cc01eb-3a89-4b05-9f4c-421453427842', 'OPEN', '2024-11-19 19:54:15.393143', '2024-11-19 19:54:15.393143') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 19:54:15.395680', '2024-11-19 19:54:15.395680') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 19:54:15.400420', '2024-11-19 19:54:15.400420') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 19:54:15.402365', '2024-11-19 19:54:15.402365') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('bdbcc952-6828-4609-9020-435fe23d6a94', 'OPEN', '2024-11-19 19:54:15.403537', '2024-11-19 19:54:15.403537') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 19:54:15.405833', '2024-11-19 19:54:15.405833') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 19:54:15.407931', '2024-11-19 19:54:15.407931') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 19:54:15.410174', '2024-11-19 19:54:15.410174') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 19:54:15.411931', '2024-11-19 19:54:15.411931') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 19:54:15.413714', '2024-11-19 19:54:15.413714') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 19:54:15.417856', '2024-11-19 19:54:15.417856') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.1ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 19:54:15.419810', '2024-11-19 19:54:15.419810') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (5.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.5ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (4.3ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.7ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (3.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.1ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.7ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 19:57:17.127558', '2024-11-19 19:57:17.127558') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 19:57:17.129342', '2024-11-19 19:57:17.129342') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 19:57:17.130788', '2024-11-19 19:57:17.130788') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 19:57:17.132445', '2024-11-19 19:57:17.132445') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 19:57:17.135681', '2024-11-19 19:57:17.135681') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 19:57:17.137191', '2024-11-19 19:57:17.137191') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 19:57:17.138535', '2024-11-19 19:57:17.138535') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 19:57:17.140790', '2024-11-19 19:57:17.140790') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 19:57:17.142039', '2024-11-19 19:57:17.142039') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 19:57:17.143550', '2024-11-19 19:57:17.143550') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.4ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 19:57:17.145265', '2024-11-19 19:57:17.145265') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('58f5baea-3a4a-4a38-a877-31215e5eb192', 'OPEN', '2024-11-19 19:57:17.146532', '2024-11-19 19:57:17.146532') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.9ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-19 19:57:17.151663', '2024-11-19 19:57:17.151663') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('97ffec5e-5994-415c-a480-6b2c08f24548', 'OPEN', '2024-11-19 19:57:17.153614', '2024-11-19 19:57:17.153614') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-19 19:57:17.155790', '2024-11-19 19:57:17.155790') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-19 19:57:17.157825', '2024-11-19 19:57:17.157825') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-19 19:57:17.159858', '2024-11-19 19:57:17.159858') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('89f0fcff-9765-4653-ad98-d6256b16ea04', 'OPEN', '2024-11-19 19:57:17.161680', '2024-11-19 19:57:17.161680') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-19 19:57:17.164201', '2024-11-19 19:57:17.164201') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 19:57:17.166333', '2024-11-19 19:57:17.166333') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 19:57:17.169651', '2024-11-19 19:57:17.169651') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 19:57:17.171584', '2024-11-19 19:57:17.171584') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-19 19:57:17.173880', '2024-11-19 19:57:17.173880') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-19 19:57:17.175928', '2024-11-19 19:57:17.175928') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.2ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-19 19:57:17.178327', '2024-11-19 19:57:17.178327') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (29.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (58.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (28.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (166.6ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (71.3ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (10.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 20:00:11.312679', '2024-11-19 20:00:11.312680') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '18306bbf74d676cdd2d3beaaa9c69e736cc485d7', '2024-11-19 20:00:11.314519', '2024-11-19 20:00:11.314520') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (8.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 20:00:11.371329', '2024-11-19 20:00:11.371332') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 20:00:11.372620' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '18306bbf74d676cdd2d3beaaa9c69e736cc485d7', '2024-11-19 20:00:11.373519', '2024-11-19 20:00:11.373519') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 20:00:11.423465', '2024-11-19 20:00:11.423465') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 20:00:11.425954', '2024-11-19 20:00:11.425954') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 20:00:11.427454', '2024-11-19 20:00:11.427454') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.1ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 20:00:11.432351', '2024-11-19 20:00:11.432351') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (4.1ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 20:00:11.439023', '2024-11-19 20:00:11.439023') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 20:00:11.447036', '2024-11-19 20:00:11.447036') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 20:00:11.452955', '2024-11-19 20:00:11.452955') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 20:00:11.454765', '2024-11-19 20:00:11.454765') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 20:00:11.456131', '2024-11-19 20:00:11.456131') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (2.0ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 20:00:11.469486', '2024-11-19 20:00:11.469486') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 20:00:11.475834', '2024-11-19 20:00:11.475834') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('d9c19a95-270a-4d87-8373-63c644385df7', 'OPEN', '2024-11-19 20:00:11.480719', '2024-11-19 20:00:11.480719') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (1.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 20:00:11.493028', '2024-11-19 20:00:11.493028') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('79fe61da-8e4b-48a5-bffe-6ffc2d618af2', 'OPEN', '2024-11-19 20:00:11.496228', '2024-11-19 20:00:11.496228') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 20:00:11.499677', '2024-11-19 20:00:11.499677') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.9ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 20:00:11.507752', '2024-11-19 20:00:11.507752') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 20:00:11.511582', '2024-11-19 20:00:11.511582') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.1ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('94d33448-3661-419e-8ddf-e3994416b73a', 'OPEN', '2024-11-19 20:00:11.513102', '2024-11-19 20:00:11.513102') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 20:00:11.516434', '2024-11-19 20:00:11.516434') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 20:00:11.518819', '2024-11-19 20:00:11.518819') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 20:00:11.521412', '2024-11-19 20:00:11.521412') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 20:00:11.523707', '2024-11-19 20:00:11.523707') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 20:00:11.525625', '2024-11-19 20:00:11.525625') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.2ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 20:00:11.535662', '2024-11-19 20:00:11.535662') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 20:00:11.539182', '2024-11-19 20:00:11.539182') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (27.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-20 01:21:53 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 13.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 30.8ms | GC: 11.3ms)
Completed 200 OK in 163ms (Views: 30.4ms | ActiveRecord: 15.8ms (1 query, 0 cached) | GC: 19.2ms)


Started GET "/assets/application-078f7bdf.js" for 127.0.0.1 at 2024-11-20 01:21:53 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-20 01:21:53 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 01:21:53 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/1" for 127.0.0.1 at 2024-11-20 01:21:56 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"1"}
  [1m[36mOrder Load (12.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 1 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (1.3ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 20:21:56.504055' WHERE "orders"."id" = 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
Completed 200 OK in 59ms (Views: 0.1ms | ActiveRecord: 15.0ms (2 queries, 0 cached) | GC: 0.7ms)


Started PATCH "/orders/2" for 127.0.0.1 at 2024-11-20 01:21:58 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"2"}
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 2 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (0.9ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 20:21:58.578646' WHERE "orders"."id" = 2 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
Completed 200 OK in 41ms (Views: 0.0ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/orders/3" for 127.0.0.1 at 2024-11-20 01:22:00 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (0.8ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 20:22:00.075963' WHERE "orders"."id" = 3 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
Completed 200 OK in 34ms (Views: 0.0ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)


[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (7872.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.8ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.0ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.8ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (4.1ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.7ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.6ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.1ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.1ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 20:24:04.596418', '2024-11-19 20:24:04.596418') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 20:24:04.598644', '2024-11-19 20:24:04.598644') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 20:24:04.600278', '2024-11-19 20:24:04.600278') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 20:24:04.602095', '2024-11-19 20:24:04.602095') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 20:24:04.603712', '2024-11-19 20:24:04.603712') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 20:24:04.605215', '2024-11-19 20:24:04.605215') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 20:24:04.606762', '2024-11-19 20:24:04.606762') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 20:24:04.609331', '2024-11-19 20:24:04.609331') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 20:24:04.610805', '2024-11-19 20:24:04.610805') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.1ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 20:24:04.612376', '2024-11-19 20:24:04.612376') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 20:24:04.614387', '2024-11-19 20:24:04.614387') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES (NULL, 'OPEN', '2024-11-19 20:24:04.616040', '2024-11-19 20:24:04.616040') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-19 20:24:04.621811', '2024-11-19 20:24:04.621811') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES (NULL, 'OPEN', '2024-11-19 20:24:04.623314', '2024-11-19 20:24:04.623314') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-19 20:24:04.626113', '2024-11-19 20:24:04.626113') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-19 20:24:04.629757', '2024-11-19 20:24:04.629757') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-19 20:24:04.632224', '2024-11-19 20:24:04.632224') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES (NULL, 'OPEN', '2024-11-19 20:24:04.633790', '2024-11-19 20:24:04.633790') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-19 20:24:04.636583', '2024-11-19 20:24:04.636583') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 20:24:04.639312', '2024-11-19 20:24:04.639312') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 20:24:04.641882', '2024-11-19 20:24:04.641882') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 20:24:04.645339', '2024-11-19 20:24:04.645339') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-19 20:24:04.647785', '2024-11-19 20:24:04.647785') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-19 20:24:04.650534', '2024-11-19 20:24:04.650534') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-19 20:24:04.653522', '2024-11-19 20:24:04.653522') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-20 01:24:11 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.7ms)
Completed 200 OK in 29ms (Views: 5.5ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.7ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 01:24:11 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 01:24:11 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (2.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 ORDER BY "order_items"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 ORDER BY "order_items"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 ORDER BY "order_items"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" WHERE "order_items"."order_id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (1.8ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (1.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (2.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.8ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (3.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (1.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (1.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.8ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.8ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (1.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.8ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (1.1ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (104.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (2.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (1.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (1.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.8ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-20 02:56:44 +0500
Processing by OrdersController#index as HTML
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
SyntaxError (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/models/order.rb:32: syntax error, unexpected end-of-input, expecting `end' or dummy end
...invoice amount by a percentage.
...                               ^
):
  
app/models/order.rb:32: syntax error, unexpected end-of-input, expecting `end' or dummy end
app/controllers/orders_controller.rb:5:in `index'
Started GET "/favicon.ico" for 127.0.0.1 at 2024-11-20 02:56:45 +0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
  [1m[36mOrder Load (103.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (2.9ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (1.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.8ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.7ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.9ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (1.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') ORDER BY "order_items"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to AddAmountToOrder (20241119222144)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "orders" ADD "amount" float /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119222144') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.6ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (3.7ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.9ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.7ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.1ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:23:44.085279', '2024-11-19 22:23:44.085279') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:23:44.087432', '2024-11-19 22:23:44.087432') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:23:44.089022', '2024-11-19 22:23:44.089022') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:23:44.090696', '2024-11-19 22:23:44.090696') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:23:44.092298', '2024-11-19 22:23:44.092298') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:23:44.093799', '2024-11-19 22:23:44.093799') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:23:44.095274', '2024-11-19 22:23:44.095274') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:23:44.097801', '2024-11-19 22:23:44.097801') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:23:44.099159', '2024-11-19 22:23:44.099159') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:23:44.100647', '2024-11-19 22:23:44.100647') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:23:44.102357', '2024-11-19 22:23:44.102357') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:23:44.104104', '2024-11-19 22:23:44.104104', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (7, 9, 9, NULL, NULL, '2024-11-19 22:23:44.112751', '2024-11-19 22:23:44.112751') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:23:44.114299', '2024-11-19 22:23:44.114299', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 7, 9, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:23:44.117758', '2024-11-19 22:23:44.117758') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 9, 8, NULL, '{Onions,Olives}', '2024-11-19 22:23:44.119794', '2024-11-19 22:23:44.119794') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 7, 7, NULL, NULL, '2024-11-19 22:23:44.122288', '2024-11-19 22:23:44.122288') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:23:44.123318', '2024-11-19 22:23:44.123318', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 8, '{Onions}', '{Cheese}', '2024-11-19 22:23:44.126127', '2024-11-19 22:23:44.126127') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{}', '{}', '2024-11-19 22:23:44.128547', '2024-11-19 22:23:44.128547') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{}', '{}', '2024-11-19 22:23:44.131585', '2024-11-19 22:23:44.131585') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{}', '{}', '2024-11-19 22:23:44.135600', '2024-11-19 22:23:44.135600') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{Olives}', '{}', '2024-11-19 22:23:44.137901', '2024-11-19 22:23:44.137901') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.5ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (9, 5, '2024-11-19 22:23:44.140158', '2024-11-19 22:23:44.140158') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (9, 6, '2024-11-19 22:23:44.142539', '2024-11-19 22:23:44.142539') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (31.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 22 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 23 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 24 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 25 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 26 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 27 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.6ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.4ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.7ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.7ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.2ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.3ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:24:24.440349', '2024-11-19 22:24:24.440349') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:24:24.443370', '2024-11-19 22:24:24.443370') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:24:24.445065', '2024-11-19 22:24:24.445065') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:24:24.446835', '2024-11-19 22:24:24.446835') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:24:24.448289', '2024-11-19 22:24:24.448289') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:24:24.449713', '2024-11-19 22:24:24.449713') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:24:24.451270', '2024-11-19 22:24:24.451270') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:24:24.454082', '2024-11-19 22:24:24.454082') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:24:24.455654', '2024-11-19 22:24:24.455654') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.2ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:24:24.457181', '2024-11-19 22:24:24.457181') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:24:24.459468', '2024-11-19 22:24:24.459468') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:24:24.461225', '2024-11-19 22:24:24.461225', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (10, 12, 12, NULL, NULL, '2024-11-19 22:24:24.470177', '2024-11-19 22:24:24.470177') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:24:24.471787', '2024-11-19 22:24:24.471787', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (11, 10, 12, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:24:24.475986', '2024-11-19 22:24:24.475986') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (11, 12, 11, NULL, '{Onions,Olives}', '2024-11-19 22:24:24.478783', '2024-11-19 22:24:24.478783') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (11, 10, 10, NULL, NULL, '2024-11-19 22:24:24.481837', '2024-11-19 22:24:24.481837') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:24:24.483526', '2024-11-19 22:24:24.483526', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 11, '{Onions}', '{Cheese}', '2024-11-19 22:24:24.487075', '2024-11-19 22:24:24.487075') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{}', '{}', '2024-11-19 22:24:24.489780', '2024-11-19 22:24:24.489780') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{}', '{}', '2024-11-19 22:24:24.492900', '2024-11-19 22:24:24.492900') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{}', '{}', '2024-11-19 22:24:24.497096', '2024-11-19 22:24:24.497096') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{Olives}', '{}', '2024-11-19 22:24:24.499763', '2024-11-19 22:24:24.499763') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (12, 7, '2024-11-19 22:24:24.502369', '2024-11-19 22:24:24.502369') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (12, 8, '2024-11-19 22:24:24.505022', '2024-11-19 22:24:24.505022') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (28.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 28 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 29 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (5.2ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 30 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 31 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 32 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 33 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 34 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 35 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 36 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.7ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (4.0ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (2.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.0ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.6ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.5ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.7ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:27:01.226982', '2024-11-19 22:27:01.226982') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:27:01.228931', '2024-11-19 22:27:01.228931') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:27:01.230408', '2024-11-19 22:27:01.230408') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (2.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:27:01.231643', '2024-11-19 22:27:01.231643') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:27:01.235166', '2024-11-19 22:27:01.235166') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:27:01.236435', '2024-11-19 22:27:01.236435') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.0ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:27:01.237904', '2024-11-19 22:27:01.237904') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:27:01.239649', '2024-11-19 22:27:01.239649') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:27:01.241034', '2024-11-19 22:27:01.241034') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:27:01.242472', '2024-11-19 22:27:01.242472') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:27:01.244165', '2024-11-19 22:27:01.244165') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:27:01.251031', '2024-11-19 22:27:01.251031', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (13, 15, 15, NULL, NULL, '2024-11-19 22:27:01.253864', '2024-11-19 22:27:01.253864') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (29.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (54.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (41.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (118.3ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (59.2ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (29.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:30:36.181271', '2024-11-19 22:30:36.181273') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99c1980acb9f62e20ce93d0c6358b0bf2d747cc6', '2024-11-19 22:30:36.183699', '2024-11-19 22:30:36.183699') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (9.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:30:36.257318', '2024-11-19 22:30:36.257319') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 22:30:36.258770' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99c1980acb9f62e20ce93d0c6358b0bf2d747cc6', '2024-11-19 22:30:36.259910', '2024-11-19 22:30:36.259911') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:30:36.303682', '2024-11-19 22:30:36.303682') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:30:36.309456', '2024-11-19 22:30:36.309456') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:30:36.310961', '2024-11-19 22:30:36.310961') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:30:36.315586', '2024-11-19 22:30:36.315586') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.1ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:30:36.317343', '2024-11-19 22:30:36.317343') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:30:36.319353', '2024-11-19 22:30:36.319353') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:30:36.322929', '2024-11-19 22:30:36.322929') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (3.2ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:30:36.324543', '2024-11-19 22:30:36.324543') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:30:36.328591', '2024-11-19 22:30:36.328591') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:30:36.335432', '2024-11-19 22:30:36.335432') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:30:36.338634', '2024-11-19 22:30:36.338634') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `calculate_amount'
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:30:36.344539', '2024-11-19 22:30:36.344539', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (1.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:30:36.363921', '2024-11-19 22:30:36.363921') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (93.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (50.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (128.6ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (63.4ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (10.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:33:04.711189', '2024-11-19 22:33:04.711189') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99c1980acb9f62e20ce93d0c6358b0bf2d747cc6', '2024-11-19 22:33:04.713093', '2024-11-19 22:33:04.713094') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (8.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:33:04.768789', '2024-11-19 22:33:04.768790') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 22:33:04.769909' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99c1980acb9f62e20ce93d0c6358b0bf2d747cc6', '2024-11-19 22:33:04.770725', '2024-11-19 22:33:04.770726') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.5ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (1.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:33:23.883625', '2024-11-19 22:33:23.883625') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:33:23.886560', '2024-11-19 22:33:23.886560') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:33:23.888746', '2024-11-19 22:33:23.888746') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.0ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:33:23.893645', '2024-11-19 22:33:23.893645') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:33:23.895611', '2024-11-19 22:33:23.895611') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:33:23.897292', '2024-11-19 22:33:23.897292') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (5.0ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:33:23.901202', '2024-11-19 22:33:23.901202') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:33:23.907090', '2024-11-19 22:33:23.907090') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:33:23.908336', '2024-11-19 22:33:23.908336') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.4ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:33:23.916909', '2024-11-19 22:33:23.916909') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:33:23.920336', '2024-11-19 22:33:23.920336') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (4.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:33:23.925274', '2024-11-19 22:33:23.925274', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (1.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:33:23.938643', '2024-11-19 22:33:23.938643') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:33:23.940864', '2024-11-19 22:33:23.940864', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:33:23.943503', '2024-11-19 22:33:23.943503') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:33:23.945426', '2024-11-19 22:33:23.945426') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:33:23.947262', '2024-11-19 22:33:23.947262') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (2.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:33:23.948202', '2024-11-19 22:33:23.948202', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:33:23.952962', '2024-11-19 22:33:23.952962') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:33:23.955721', '2024-11-19 22:33:23.955721') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:33:23.958075', '2024-11-19 22:33:23.958075') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:33:23.960794', '2024-11-19 22:33:23.960794') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:33:23.963044', '2024-11-19 22:33:23.963044') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:33:23.971524', '2024-11-19 22:33:23.971524') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:33:23.975384', '2024-11-19 22:33:23.975384') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (30.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (73.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (39.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (122.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (60.8ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (9.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:34:45.981190', '2024-11-19 22:34:45.981191') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99c1980acb9f62e20ce93d0c6358b0bf2d747cc6', '2024-11-19 22:34:45.982761', '2024-11-19 22:34:45.982762') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (7.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:34:46.032309', '2024-11-19 22:34:46.032310') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 22:34:46.033363' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99c1980acb9f62e20ce93d0c6358b0bf2d747cc6', '2024-11-19 22:34:46.034167', '2024-11-19 22:34:46.034168') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:34:46.071492', '2024-11-19 22:34:46.071492') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:34:46.075760', '2024-11-19 22:34:46.075760') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:34:46.077347', '2024-11-19 22:34:46.077347') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.8ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:34:46.081665', '2024-11-19 22:34:46.081665') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.2ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:34:46.083433', '2024-11-19 22:34:46.083433') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:34:46.085587', '2024-11-19 22:34:46.085587') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:34:46.089101', '2024-11-19 22:34:46.089101') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (2.2ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:34:46.090759', '2024-11-19 22:34:46.090759') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:34:46.093891', '2024-11-19 22:34:46.093891') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:34:46.100046', '2024-11-19 22:34:46.100046') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.5ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:34:46.103063', '2024-11-19 22:34:46.103063') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (2.2ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:34:46.106621', '2024-11-19 22:34:46.106621', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:34:46.116452', '2024-11-19 22:34:46.116452') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:34:46.117716', '2024-11-19 22:34:46.117716', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:34:46.120329', '2024-11-19 22:34:46.120329') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:34:46.122393', '2024-11-19 22:34:46.122393') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (2.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:34:46.126022', '2024-11-19 22:34:46.126022') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:34:46.126966', '2024-11-19 22:34:46.126966', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:34:46.129454', '2024-11-19 22:34:46.129454') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:34:46.131643', '2024-11-19 22:34:46.131643') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:34:46.133597', '2024-11-19 22:34:46.133597') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:34:46.135482', '2024-11-19 22:34:46.135482') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:34:46.138324', '2024-11-19 22:34:46.138324') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:34:46.142584', '2024-11-19 22:34:46.142584') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.2ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:34:46.144698', '2024-11-19 22:34:46.144698') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to EnablePgcryptoExtension (20241119125641)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (1618.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125641') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.2ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.9ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.6ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.1ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:35:52.979624', '2024-11-19 22:35:52.979624') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:35:52.981564', '2024-11-19 22:35:52.981564') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:35:52.982865', '2024-11-19 22:35:52.982865') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:35:52.984441', '2024-11-19 22:35:52.984441') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:35:52.986073', '2024-11-19 22:35:52.986073') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:35:52.990381', '2024-11-19 22:35:52.990381') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:35:52.991696', '2024-11-19 22:35:52.991696') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:35:52.993110', '2024-11-19 22:35:52.993110') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:35:52.994683', '2024-11-19 22:35:52.994683') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:35:52.996045', '2024-11-19 22:35:52.996045') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:35:52.997792', '2024-11-19 22:35:52.997792') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:35:52.999382', '2024-11-19 22:35:52.999382', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-19 22:35:53.004807', '2024-11-19 22:35:53.004807') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:35:53.005877', '2024-11-19 22:35:53.005877', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:35:53.008206', '2024-11-19 22:35:53.008206') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-19 22:35:53.010597', '2024-11-19 22:35:53.010597') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-19 22:35:53.012701', '2024-11-19 22:35:53.012701') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:35:53.013981', '2024-11-19 22:35:53.013981', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-19 22:35:53.018475', '2024-11-19 22:35:53.018475') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:35:53.021063', '2024-11-19 22:35:53.021063') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:35:53.023469', '2024-11-19 22:35:53.023469') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:35:53.025746', '2024-11-19 22:35:53.025746') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-19 22:35:53.027882', '2024-11-19 22:35:53.027882') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-19 22:35:53.030525', '2024-11-19 22:35:53.030525') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-19 22:35:53.032965', '2024-11-19 22:35:53.032965') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (30.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (74.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (29.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (120.7ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (55.2ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (9.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (4.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642),
(20241119125641); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:36:17.507344', '2024-11-19 22:36:17.507346') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:36:17.509446', '2024-11-19 22:36:17.509447') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (7.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (2.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642),
(20241119125641); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:36:17.563028', '2024-11-19 22:36:17.563030') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 22:36:17.564308' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:36:17.565181', '2024-11-19 22:36:17.565182') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.4ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:36:17.612435', '2024-11-19 22:36:17.612435') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:36:17.615002', '2024-11-19 22:36:17.615002') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:36:17.616950', '2024-11-19 22:36:17.616950') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (8.4ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:36:17.636432', '2024-11-19 22:36:17.636432') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:36:17.647233', '2024-11-19 22:36:17.647233') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:36:17.648872', '2024-11-19 22:36:17.648872') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:36:17.652801', '2024-11-19 22:36:17.652801') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:36:17.654602', '2024-11-19 22:36:17.654602') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:36:17.655945', '2024-11-19 22:36:17.655945') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:36:17.661930', '2024-11-19 22:36:17.661930') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:36:17.664840', '2024-11-19 22:36:17.664840') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:36:17.670076', '2024-11-19 22:36:17.670076', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (1.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:36:17.679253', '2024-11-19 22:36:17.679253') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:36:17.681129', '2024-11-19 22:36:17.681129', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:36:17.683623', '2024-11-19 22:36:17.683623') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:36:17.689261', '2024-11-19 22:36:17.689261') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:36:17.691458', '2024-11-19 22:36:17.691458') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:36:17.693299', '2024-11-19 22:36:17.693299', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:36:17.695952', '2024-11-19 22:36:17.695952') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:36:17.698459', '2024-11-19 22:36:17.698459') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:36:17.701075', '2024-11-19 22:36:17.701075') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:36:17.703207', '2024-11-19 22:36:17.703207') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:36:17.705380', '2024-11-19 22:36:17.705380') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:36:17.711813', '2024-11-19 22:36:17.711813') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:36:17.714919', '2024-11-19 22:36:17.714919') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.6ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.7ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (4.2ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (3.7ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.7ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.1ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:36:28.547039', '2024-11-19 22:36:28.547039') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:36:28.549086', '2024-11-19 22:36:28.549086') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:36:28.550687', '2024-11-19 22:36:28.550687') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:36:28.552481', '2024-11-19 22:36:28.552481') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:36:28.553886', '2024-11-19 22:36:28.553886') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:36:28.555345', '2024-11-19 22:36:28.555345') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:36:28.556950', '2024-11-19 22:36:28.556950') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:36:28.559539', '2024-11-19 22:36:28.559539') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:36:28.561172', '2024-11-19 22:36:28.561172') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:36:28.562690', '2024-11-19 22:36:28.562690') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:36:28.564541', '2024-11-19 22:36:28.564541') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:36:28.566067', '2024-11-19 22:36:28.566067', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-19 22:36:28.570443', '2024-11-19 22:36:28.570443') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:36:28.572274', '2024-11-19 22:36:28.572274', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:36:28.574862', '2024-11-19 22:36:28.574862') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-19 22:36:28.578448', '2024-11-19 22:36:28.578448') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-19 22:36:28.581025', '2024-11-19 22:36:28.581025') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES (NULL, 'OPEN', '2024-11-19 22:36:28.582414', '2024-11-19 22:36:28.582414', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-19 22:36:28.585223', '2024-11-19 22:36:28.585223') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:36:28.587661', '2024-11-19 22:36:28.587661') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:36:28.589988', '2024-11-19 22:36:28.589988') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:36:28.592910', '2024-11-19 22:36:28.592910') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-19 22:36:28.595236', '2024-11-19 22:36:28.595236') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.6ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-19 22:36:28.597985', '2024-11-19 22:36:28.597985') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-19 22:36:28.600645', '2024-11-19 22:36:28.600645') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (29.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (5.2ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.6ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (4.3ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (3.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (1.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.8ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.9ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.5ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.2ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.1ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:37:59.410404', '2024-11-19 22:37:59.410404') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.4ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:37:59.412557', '2024-11-19 22:37:59.412557') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:37:59.413860', '2024-11-19 22:37:59.413860') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:37:59.415394', '2024-11-19 22:37:59.415394') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:37:59.418742', '2024-11-19 22:37:59.418742') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:37:59.420192', '2024-11-19 22:37:59.420192') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:37:59.421365', '2024-11-19 22:37:59.421365') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:37:59.422852', '2024-11-19 22:37:59.422852') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:37:59.424056', '2024-11-19 22:37:59.424056') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:37:59.425334', '2024-11-19 22:37:59.425334') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:37:59.427481', '2024-11-19 22:37:59.427481') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('d628f7b0-d283-40d9-aa1c-e8aaf98f89dd', 'OPEN', '2024-11-19 22:37:59.429050', '2024-11-19 22:37:59.429050', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (7, 9, 9, NULL, NULL, '2024-11-19 22:37:59.433962', '2024-11-19 22:37:59.433962') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('2a1043f8-b136-406f-a8bf-23ab46c0c7d7', 'OPEN', '2024-11-19 22:37:59.435560', '2024-11-19 22:37:59.435560', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 7, 9, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:37:59.437796', '2024-11-19 22:37:59.437796') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 9, 8, NULL, '{Onions,Olives}', '2024-11-19 22:37:59.439777', '2024-11-19 22:37:59.439777') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (8, 7, 7, NULL, NULL, '2024-11-19 22:37:59.441900', '2024-11-19 22:37:59.441900') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('5f8a13b9-be1c-405e-9d3e-db9f41ced54b', 'OPEN', '2024-11-19 22:37:59.443004', '2024-11-19 22:37:59.443004', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 8, '{Onions}', '{Cheese}', '2024-11-19 22:37:59.445506', '2024-11-19 22:37:59.445506') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{}', '{}', '2024-11-19 22:37:59.447412', '2024-11-19 22:37:59.447412') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{}', '{}', '2024-11-19 22:37:59.450901', '2024-11-19 22:37:59.450901') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{}', '{}', '2024-11-19 22:37:59.453304', '2024-11-19 22:37:59.453304') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (9, 8, 7, '{Olives}', '{}', '2024-11-19 22:37:59.455602', '2024-11-19 22:37:59.455602') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.0ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (9, 5, '2024-11-19 22:37:59.457561', '2024-11-19 22:37:59.457561') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (9, 6, '2024-11-19 22:37:59.460415', '2024-11-19 22:37:59.460415') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (31.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 19 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (9, 7) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (8, 7) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (1.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (1.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 7 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 22 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 23 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 9 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:40:17.785998', "amount" = 13.964999999999996 WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (4.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 24 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 9 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:40:17.800247', "amount" = 13.965 WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 25 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 9 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:40:17.809288', "amount" = 13.964999999999998 WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 26 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 9 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:40:17.820675', "amount" = 9.974999999999998 WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 27 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 9 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 9 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mOrder Update (0.9ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:40:17.827058', "amount" = 0.0 WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:34:in `update_amount'
  [1m[36mOderOffer Load (0.2ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.0ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.6ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.2ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:40:17.866637', '2024-11-19 22:40:17.866637') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:40:17.868448', '2024-11-19 22:40:17.868448') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:40:17.870062', '2024-11-19 22:40:17.870062') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:40:17.871572', '2024-11-19 22:40:17.871572') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:40:17.873711', '2024-11-19 22:40:17.873711') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:40:17.875192', '2024-11-19 22:40:17.875192') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.9ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:40:17.876570', '2024-11-19 22:40:17.876570') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:40:17.878341', '2024-11-19 22:40:17.878341') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:40:17.879946', '2024-11-19 22:40:17.879946') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:40:17.881247', '2024-11-19 22:40:17.881247') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:40:17.882922', '2024-11-19 22:40:17.882922') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('47466fc5-1201-46b1-a89c-2e8fab984a88', 'OPEN', '2024-11-19 22:40:17.884533', '2024-11-19 22:40:17.884533', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (10, 12, 12, NULL, NULL, '2024-11-19 22:40:17.887797', '2024-11-19 22:40:17.887797') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('e023f5fa-f7e1-4b17-892f-e32f36644094', 'OPEN', '2024-11-19 22:40:17.892683', '2024-11-19 22:40:17.892683', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (11, 10, 12, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:40:17.895706', '2024-11-19 22:40:17.895706') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (11, 12, 11, NULL, '{Onions,Olives}', '2024-11-19 22:40:17.902484', '2024-11-19 22:40:17.902484') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (10, 12) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (12, 11) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (11, 10, 10, NULL, NULL, '2024-11-19 22:40:17.908816', '2024-11-19 22:40:17.908816') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (10, 12) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (12, 11, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('2f872adc-9fa6-4685-8480-6a14a0f3d96f', 'OPEN', '2024-11-19 22:40:17.913325', '2024-11-19 22:40:17.913325', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 11, '{Onions}', '{Cheese}', '2024-11-19 22:40:17.916016', '2024-11-19 22:40:17.916016') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{}', '{}', '2024-11-19 22:40:17.923160', '2024-11-19 22:40:17.923160') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (11, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{}', '{}', '2024-11-19 22:40:17.928195', '2024-11-19 22:40:17.928195') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (11, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (2.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{}', '{}', '2024-11-19 22:40:17.943187', '2024-11-19 22:40:17.943187') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (11, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (12, 11, 10, '{Olives}', '{}', '2024-11-19 22:40:17.951570', '2024-11-19 22:40:17.951570') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (11, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (12, 7, '2024-11-19 22:40:17.957425', '2024-11-19 22:40:17.957425') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (12, 8, '2024-11-19 22:40:17.959923', '2024-11-19 22:40:17.959923') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (29.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 28 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (2.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 29 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (12, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (11, 10) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.8ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (12, 10)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (11, 10)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 30 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 31 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 32 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mOrder Update (0.9ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:06.082572', "amount" = 13.964999999999996 WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 33 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:06.095797', "amount" = 13.965 WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 34 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:06.109918', "amount" = 13.964999999999998 WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 35 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 11[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:06.120537', "amount" = 9.974999999999998 WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 36 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 12 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 12[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 12 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:25:in `block in promotion_discount'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 12[0m
  ↳ app/models/order.rb:18:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:06.127061', "amount" = 0.0 WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:37:in `update_amount'
  [1m[36mOderOffer Load (0.2ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.7ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (0.9ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:41:06.161212', '2024-11-19 22:41:06.161212') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:41:06.162716', '2024-11-19 22:41:06.162716') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:41:06.164983', '2024-11-19 22:41:06.164983') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:41:06.166545', '2024-11-19 22:41:06.166545') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:41:06.168137', '2024-11-19 22:41:06.168137') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:41:06.169742', '2024-11-19 22:41:06.169742') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:41:06.171240', '2024-11-19 22:41:06.171240') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:41:06.172850', '2024-11-19 22:41:06.172850') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:41:06.174350', '2024-11-19 22:41:06.174350') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:41:06.175886', '2024-11-19 22:41:06.175886') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:41:06.177405', '2024-11-19 22:41:06.177405') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('0a43054f-680f-44cd-9531-9cd29f279db8', 'OPEN', '2024-11-19 22:41:06.179278', '2024-11-19 22:41:06.179278', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.9ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (13, 15, 15, NULL, NULL, '2024-11-19 22:41:06.181680', '2024-11-19 22:41:06.181680') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.4ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('69c2ee81-8ed8-4bbb-ad86-9f65e9e1e334', 'OPEN', '2024-11-19 22:41:06.188145', '2024-11-19 22:41:06.188145', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 13 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (14, 13, 15, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:41:06.191331', '2024-11-19 22:41:06.191331') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (14, 15, 14, NULL, '{Onions,Olives}', '2024-11-19 22:41:06.198425', '2024-11-19 22:41:06.198425') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (13, 15) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (15, 14) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (13, 15)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (15, 14)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 13 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (14, 13, 13, NULL, NULL, '2024-11-19 22:41:06.205326', '2024-11-19 22:41:06.205326') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (13, 15) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (15, 14, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (13, 15)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (15, 14, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('4b83a774-ef0b-42f6-95ec-b5d84bcb5f13', 'OPEN', '2024-11-19 22:41:06.210982', '2024-11-19 22:41:06.210982', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (15, 14, 14, '{Onions}', '{Cheese}', '2024-11-19 22:41:06.214461', '2024-11-19 22:41:06.214461') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:23:in `promotion_discount'
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (15, 14, 13, '{}', '{}', '2024-11-19 22:41:06.221198', '2024-11-19 22:41:06.221198') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (15, 14, 13, '{}', '{}', '2024-11-19 22:41:06.226274', '2024-11-19 22:41:06.226274') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (15, 14, 13, '{}', '{}', '2024-11-19 22:41:06.231422', '2024-11-19 22:41:06.231422') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (15, 14, 13, '{Olives}', '{}', '2024-11-19 22:41:06.237911', '2024-11-19 22:41:06.237911') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (15, 9, '2024-11-19 22:41:06.244898', '2024-11-19 22:41:06.244898') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.2ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (15, 10, '2024-11-19 22:41:06.247563', '2024-11-19 22:41:06.247563') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 37 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 13 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (1.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.8ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.329078', "amount" = 0.0 WHERE "orders"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 38 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (15, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.9ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (15, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (14, 13)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.8ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.353767', "amount" = 11.5 WHERE "orders"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 39 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.8ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.362211', "amount" = 3.5 WHERE "orders"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 40 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.367326', "amount" = 0.0 WHERE "orders"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 41 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.387565', "amount" = 13.964999999999996 WHERE "orders"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 42 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.401337', "amount" = 13.965 WHERE "orders"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 43 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.411226', "amount" = 13.964999999999998 WHERE "orders"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 44 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 14[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.422244', "amount" = 9.974999999999998 WHERE "orders"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 45 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 15 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:26:in `update_order_amount'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 15[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 15 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small')[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mCACHE Discount Sum (0.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 15[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.428970', "amount" = 0.0 WHERE "orders"."id" = 15 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOderOffer Load (0.2ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.5ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.8ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.2ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.7ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 10 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.1ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 13 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 14 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.2ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 15 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:41:35.466557', '2024-11-19 22:41:35.466557') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:41:35.468297', '2024-11-19 22:41:35.468297') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:41:35.469715', '2024-11-19 22:41:35.469715') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.4ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:41:35.471432', '2024-11-19 22:41:35.471432') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:41:35.472811', '2024-11-19 22:41:35.472811') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:41:35.474114', '2024-11-19 22:41:35.474114') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:41:35.475508', '2024-11-19 22:41:35.475508') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:41:35.477076', '2024-11-19 22:41:35.477076') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:41:35.478962', '2024-11-19 22:41:35.478962') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:41:35.480121', '2024-11-19 22:41:35.480121') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:41:35.481711', '2024-11-19 22:41:35.481711') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('d09bde9d-7ebf-4e03-8c21-5450992c4c8f', 'OPEN', '2024-11-19 22:41:35.483414', '2024-11-19 22:41:35.483414', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (16, 18, 18, NULL, NULL, '2024-11-19 22:41:35.486431', '2024-11-19 22:41:35.486431') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 16 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 16 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 16 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 16[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.492531', "amount" = 10.4 WHERE "orders"."id" = 16 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.2ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('6de623d8-742c-486c-a518-39db39407ac8', 'OPEN', '2024-11-19 22:41:35.493983', '2024-11-19 22:41:35.493983', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 16 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (17, 16, 18, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:41:35.497191', '2024-11-19 22:41:35.497191') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 16 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 16[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.503575', "amount" = 35.75 WHERE "orders"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (17, 18, 17, NULL, '{Onions,Olives}', '2024-11-19 22:41:35.506009', '2024-11-19 22:41:35.506009') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (16, 18) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (18, 17) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (16, 18)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (18, 17)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.511543', "amount" = 43.75 WHERE "orders"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 16 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (17, 16, 16, NULL, NULL, '2024-11-19 22:41:35.514222', '2024-11-19 22:41:35.514222') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (16, 18) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (18, 17, 16) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (16, 18)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (18, 17, 16)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (2.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.525856', "amount" = 47.25 WHERE "orders"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (2.2ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('8e8f6ea0-f96e-4a95-ae1d-f342af552cad', 'OPEN', '2024-11-19 22:41:35.531376', '2024-11-19 22:41:35.531376', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (18, 17, 17, '{Onions}', '{Cheese}', '2024-11-19 22:41:35.536749', '2024-11-19 22:41:35.536749') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.543310', "amount" = 6.0 WHERE "orders"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (18, 17, 16, '{}', '{}', '2024-11-19 22:41:35.545449', '2024-11-19 22:41:35.545449') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.549998', "amount" = 10.2 WHERE "orders"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (18, 17, 16, '{}', '{}', '2024-11-19 22:41:35.552941', '2024-11-19 22:41:35.552941') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.557869', "amount" = 14.399999999999999 WHERE "orders"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (18, 17, 16, '{}', '{}', '2024-11-19 22:41:35.560403', '2024-11-19 22:41:35.560403') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.564461', "amount" = 18.599999999999998 WHERE "orders"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (18, 17, 16, '{Olives}', '{}', '2024-11-19 22:41:35.567256', '2024-11-19 22:41:35.567256') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16)[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:41:35.572624', "amount" = 29.099999999999994 WHERE "orders"."id" = 18 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:38:in `update_amount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (18, 11, '2024-11-19 22:41:35.575497', '2024-11-19 22:41:35.575497') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (18, 12, '2024-11-19 22:41:35.577578', '2024-11-19 22:41:35.577578') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (27.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (2.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (1.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (1.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (2.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 18 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 16 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 18 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (17, 16) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.6ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 18 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 17 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 16 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 18 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (3.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 46 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 47 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (5.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 48 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 49 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 50 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 51 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 52 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 53 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 54 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.2ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (4.4ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (2.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.1ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 12 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 16 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 17 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 18 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:48:12.126466', '2024-11-19 22:48:12.126466') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:48:12.128590', '2024-11-19 22:48:12.128590') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:48:12.130301', '2024-11-19 22:48:12.130301') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (2.9ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:48:12.131861', '2024-11-19 22:48:12.131861') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:48:12.135779', '2024-11-19 22:48:12.135779') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:48:12.137305', '2024-11-19 22:48:12.137305') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.0ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:48:12.138932', '2024-11-19 22:48:12.138932') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:48:12.140861', '2024-11-19 22:48:12.140861') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:48:12.142400', '2024-11-19 22:48:12.142400') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.0ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:48:12.143975', '2024-11-19 22:48:12.143975') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:48:12.146001', '2024-11-19 22:48:12.146001') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('c706f6a7-e249-4b7f-8aad-54a524943328', 'OPEN', '2024-11-19 22:48:12.147643', '2024-11-19 22:48:12.147643', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 19 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (1.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 19 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 19 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.161175', "amount" = 0.0 WHERE "orders"."id" = 19 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (1.0ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (19, 21, 21, NULL, NULL, '2024-11-19 22:48:12.161857', '2024-11-19 22:48:12.161857') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('7ae71ec6-5290-43e1-a24d-2de289a7b733', 'OPEN', '2024-11-19 22:48:12.163797', '2024-11-19 22:48:12.163797', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 19 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.169039', "amount" = 0.0 WHERE "orders"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (20, 19, 21, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:48:12.169645', '2024-11-19 22:48:12.169645') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 19 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.8ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.176553', "amount" = 35.75 WHERE "orders"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (20, 21, 20, NULL, '{Onions,Olives}', '2024-11-19 22:48:12.177143', '2024-11-19 22:48:12.177143') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 19 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (19, 21) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (21, 20) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.183118', "amount" = 43.75 WHERE "orders"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (20, 19, 19, NULL, NULL, '2024-11-19 22:48:12.183726', '2024-11-19 22:48:12.183726') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('56528fef-ebb8-41b4-8ccc-b9e2982a538c', 'OPEN', '2024-11-19 22:48:12.187157', '2024-11-19 22:48:12.187157', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:14:in `calculate_amount'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.192947', "amount" = 0.0 WHERE "orders"."id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (21, 20, 20, '{Onions}', '{Cheese}', '2024-11-19 22:48:12.193559', '2024-11-19 22:48:12.193559') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.199173', "amount" = 6.0 WHERE "orders"."id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (21, 20, 19, '{}', '{}', '2024-11-19 22:48:12.199667', '2024-11-19 22:48:12.199667') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (20, 19) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.204108', "amount" = 10.2 WHERE "orders"."id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (21, 20, 19, '{}', '{}', '2024-11-19 22:48:12.204587', '2024-11-19 22:48:12.204587') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (20, 19) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mOrder Update (1.8ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.209058', "amount" = 14.399999999999999 WHERE "orders"."id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (21, 20, 19, '{}', '{}', '2024-11-19 22:48:12.211214', '2024-11-19 22:48:12.211214') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (20, 19) /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:48:12.215223', "amount" = 18.599999999999998 WHERE "orders"."id" = 21 /*application='EvermoodChallenge'*/[0m
  ↳ app/models/order.rb:35:in `update_amount'
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (21, 20, 19, '{Olives}', '{}', '2024-11-19 22:48:12.215807', '2024-11-19 22:48:12.215807') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (21, 13, '2024-11-19 22:48:12.218532', '2024-11-19 22:48:12.218532') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (21, 14, '2024-11-19 22:48:12.222029', '2024-11-19 22:48:12.222029') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (24.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (2.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 21 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (1.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (20, 19) /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.7ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (2.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 21 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 20 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 19 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Update (0.9ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = '2024-11-19 22:50:02.741118', "amount" = 19.664999999999996 WHERE "orders"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (64.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (47.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (114.8ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (45.7ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (8.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (4.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:56:20.722394', '2024-11-19 22:56:20.722395') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:56:20.723984', '2024-11-19 22:56:20.723984') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (5.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (2.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:56:20.775065', '2024-11-19 22:56:20.775066') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 22:56:20.776445' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:56:20.777235', '2024-11-19 22:56:20.777236') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:56:20.818642', '2024-11-19 22:56:20.818642') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:56:20.820780', '2024-11-19 22:56:20.820780') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:56:20.822460', '2024-11-19 22:56:20.822460') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:56:20.826639', '2024-11-19 22:56:20.826639') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:56:20.828289', '2024-11-19 22:56:20.828289') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:56:20.829804', '2024-11-19 22:56:20.829804') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:56:20.834981', '2024-11-19 22:56:20.834981') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:56:20.836606', '2024-11-19 22:56:20.836606') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:56:20.838046', '2024-11-19 22:56:20.838046') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:56:20.844488', '2024-11-19 22:56:20.844488') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:56:20.847363', '2024-11-19 22:56:20.847363') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('464c3e90-0d28-47fb-b4d9-a1aef9ff05ef', 'OPEN', '2024-11-19 22:56:20.852547', '2024-11-19 22:56:20.852547', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:56:20.861028', '2024-11-19 22:56:20.861028') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('92a30605-3eaa-40dc-8968-36492369a7ca', 'OPEN', '2024-11-19 22:56:20.862244', '2024-11-19 22:56:20.862244', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:56:20.864680', '2024-11-19 22:56:20.864680') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (2.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:56:20.868355', '2024-11-19 22:56:20.868355') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:56:20.870500', '2024-11-19 22:56:20.870500') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('06138028-cbdf-4f19-8928-52108b8f6590', 'OPEN', '2024-11-19 22:56:20.871397', '2024-11-19 22:56:20.871397', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:56:20.874068', '2024-11-19 22:56:20.874068') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:56:20.875993', '2024-11-19 22:56:20.875993') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:56:20.877938', '2024-11-19 22:56:20.877938') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:56:20.881119', '2024-11-19 22:56:20.881119') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:56:20.883013', '2024-11-19 22:56:20.883013') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:56:20.887882', '2024-11-19 22:56:20.887882') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.1ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:56:20.890176', '2024-11-19 22:56:20.890176') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.1ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.8ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.1ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:56:29.473952', '2024-11-19 22:56:29.473952') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:56:29.476097', '2024-11-19 22:56:29.476097') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:56:29.477607', '2024-11-19 22:56:29.477607') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:56:29.478887', '2024-11-19 22:56:29.478887') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:56:29.480520', '2024-11-19 22:56:29.480520') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:56:29.484872', '2024-11-19 22:56:29.484872') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:56:29.486419', '2024-11-19 22:56:29.486419') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:56:29.487808', '2024-11-19 22:56:29.487808') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:56:29.489500', '2024-11-19 22:56:29.489500') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:56:29.490958', '2024-11-19 22:56:29.490958') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:56:29.492532', '2024-11-19 22:56:29.492532') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('ba2f9a6f-5612-469f-80a6-7ccfd9943d14', 'OPEN', '2024-11-19 22:56:29.494331', '2024-11-19 22:56:29.494331', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-19 22:56:29.498698', '2024-11-19 22:56:29.498698') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('6d66c106-7523-40f1-ba09-f6b6abeb10ce', 'OPEN', '2024-11-19 22:56:29.499858', '2024-11-19 22:56:29.499858', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:56:29.502289', '2024-11-19 22:56:29.502289') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-19 22:56:29.504524', '2024-11-19 22:56:29.504524') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-19 22:56:29.507099', '2024-11-19 22:56:29.507099') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('63142eb7-cbae-4ccf-bb81-def777f6aff5', 'OPEN', '2024-11-19 22:56:29.508205', '2024-11-19 22:56:29.508205', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-19 22:56:29.512804', '2024-11-19 22:56:29.512804') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:56:29.515711', '2024-11-19 22:56:29.515711') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:56:29.517830', '2024-11-19 22:56:29.517830') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 22:56:29.520256', '2024-11-19 22:56:29.520256') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-19 22:56:29.522524', '2024-11-19 22:56:29.522524') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-19 22:56:29.525468', '2024-11-19 22:56:29.525468') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.2ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-19 22:56:29.528209', '2024-11-19 22:56:29.528209') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (29.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (74.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (30.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (112.2ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (55.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (8.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (3.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:56:54.216772', '2024-11-19 22:56:54.216772') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:56:54.218375', '2024-11-19 22:56:54.218376') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (7.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (2.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:56:54.267363', '2024-11-19 22:56:54.267364') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-19 22:56:54.268273' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:56:54.268973', '2024-11-19 22:56:54.268973') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:56:54.310432', '2024-11-19 22:56:54.310432') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:56:54.312608', '2024-11-19 22:56:54.312608') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:56:54.314169', '2024-11-19 22:56:54.314169') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:56:54.318146', '2024-11-19 22:56:54.318146') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:56:54.319824', '2024-11-19 22:56:54.319824') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:56:54.321388', '2024-11-19 22:56:54.321388') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:56:54.325130', '2024-11-19 22:56:54.325130') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:56:54.326871', '2024-11-19 22:56:54.326871') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:56:54.331706', '2024-11-19 22:56:54.331706') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:56:54.338420', '2024-11-19 22:56:54.338420') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:56:54.341394', '2024-11-19 22:56:54.341394') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('c8f0813f-b9fd-4647-9d7e-1931249c334e', 'OPEN', '2024-11-19 22:56:54.345155', '2024-11-19 22:56:54.345155', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:56:54.353168', '2024-11-19 22:56:54.353168') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('5cea7167-179e-47ef-b7a5-5846303fc9c5', 'OPEN', '2024-11-19 22:56:54.354342', '2024-11-19 22:56:54.354342', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:56:54.356866', '2024-11-19 22:56:54.356866') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:56:54.360994', '2024-11-19 22:56:54.360994') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:56:54.363445', '2024-11-19 22:56:54.363445') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('aa96efd4-835e-4b28-bd4b-2985308a3ae3', 'OPEN', '2024-11-19 22:56:54.364408', '2024-11-19 22:56:54.364408', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:56:54.366712', '2024-11-19 22:56:54.366712') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:56:54.369042', '2024-11-19 22:56:54.369042') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:56:54.371106', '2024-11-19 22:56:54.371106') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:56:54.372912', '2024-11-19 22:56:54.372912') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:56:54.374691', '2024-11-19 22:56:54.374691') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:56:54.380579', '2024-11-19 22:56:54.380579') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.1ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:56:54.382651', '2024-11-19 22:56:54.382651') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (31.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (7807.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (75.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (28.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (198.6ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (66.3ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (35.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (11.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pgcrypto" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" integer NOT NULL, "offer_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" character varying, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "amount" float) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119222144) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119161418),
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:57:50.971238', '2024-11-19 22:57:50.971239') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '45dbfa89be8f86487da5135e43fb3b048e7e0c93', '2024-11-19 22:57:50.973476', '2024-11-19 22:57:50.973477') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (29.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.1ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.4ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:58:01.521030', '2024-11-19 22:58:01.521030') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:58:01.523973', '2024-11-19 22:58:01.523973') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:58:01.526028', '2024-11-19 22:58:01.526028') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.2ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:58:01.533947', '2024-11-19 22:58:01.533947') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:58:01.536128', '2024-11-19 22:58:01.536128') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:58:01.537669', '2024-11-19 22:58:01.537669') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:58:01.542971', '2024-11-19 22:58:01.542971') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:58:01.549772', '2024-11-19 22:58:01.549772') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:58:01.551038', '2024-11-19 22:58:01.551038') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.5ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:58:01.560158', '2024-11-19 22:58:01.560158') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:58:01.563897', '2024-11-19 22:58:01.563897') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('a26f498b-51ea-42e7-a05d-4c2e1ec88c90', 'OPEN', '2024-11-19 22:58:01.568718', '2024-11-19 22:58:01.568718', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.9ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:58:01.583134', '2024-11-19 22:58:01.583134') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('0858d120-d8db-4963-95da-362890dc41b8', 'OPEN', '2024-11-19 22:58:01.588069', '2024-11-19 22:58:01.588069', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:58:01.591079', '2024-11-19 22:58:01.591079') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:58:01.593303', '2024-11-19 22:58:01.593303') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:58:01.595917', '2024-11-19 22:58:01.595917') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (3.1ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at", "amount") VALUES ('b77b5943-ba73-4490-9137-fddf6865488e', 'OPEN', '2024-11-19 22:58:01.597037', '2024-11-19 22:58:01.597037', NULL) RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:58:01.601870', '2024-11-19 22:58:01.601870') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:58:01.604021', '2024-11-19 22:58:01.604021') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:58:01.606463', '2024-11-19 22:58:01.606463') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:58:01.608847', '2024-11-19 22:58:01.608847') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:58:01.611212', '2024-11-19 22:58:01.611212') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.1ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:58:01.619725', '2024-11-19 22:58:01.619725') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:58:01.622827', '2024-11-19 22:58:01.622827') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (61.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (28.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (177.2ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (65.9ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (22.1ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-19 22:59:10.247793', '2024-11-19 22:59:10.247795') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'da39a3ee5e6b4b0d3255bfef95601890afd80709', '2024-11-19 22:59:10.250603', '2024-11-19 22:59:10.250604') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to CreateOffers (20241119125642)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125642') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrders (20241119125857)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125857') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzas (20241119131450)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131450') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateIngredients (20241119131502)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131502') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzaSizes (20241119132025)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119132025') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOderOffers (20241119135237)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119135237') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119161418') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.1ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 22:59:16.351773', '2024-11-19 22:59:16.351773') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 22:59:16.354999', '2024-11-19 22:59:16.354999') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 22:59:16.356870', '2024-11-19 22:59:16.356870') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.1ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 22:59:16.364068', '2024-11-19 22:59:16.364068') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (5.5ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 22:59:16.366106', '2024-11-19 22:59:16.366106') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 22:59:16.372611', '2024-11-19 22:59:16.372611') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.1ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 22:59:16.380107', '2024-11-19 22:59:16.380107') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 22:59:16.382083', '2024-11-19 22:59:16.382083') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 22:59:16.383574', '2024-11-19 22:59:16.383574') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.1ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 22:59:16.392962', '2024-11-19 22:59:16.392962') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 22:59:16.396762', '2024-11-19 22:59:16.396762') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('0ec9fcd3-505c-4757-8275-e1f1c405c748', 'OPEN', '2024-11-19 22:59:16.403756', '2024-11-19 22:59:16.403756') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (1.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-19 22:59:16.419667', '2024-11-19 22:59:16.419667') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('29190d64-5704-4c7c-a9fe-a266775b1892', 'OPEN', '2024-11-19 22:59:16.422227', '2024-11-19 22:59:16.422227') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-19 22:59:16.425185', '2024-11-19 22:59:16.425185') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-19 22:59:16.427598', '2024-11-19 22:59:16.427598') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-19 22:59:16.430172', '2024-11-19 22:59:16.430172') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('9e67524f-8024-4716-a62f-5fa8ec16d866', 'OPEN', '2024-11-19 22:59:16.431600', '2024-11-19 22:59:16.431600') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-19 22:59:16.434549', '2024-11-19 22:59:16.434549') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:59:16.437182', '2024-11-19 22:59:16.437182') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:59:16.439750', '2024-11-19 22:59:16.439750') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-19 22:59:16.442246', '2024-11-19 22:59:16.442246') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-19 22:59:16.444757', '2024-11-19 22:59:16.444757') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-19 22:59:16.456764', '2024-11-19 22:59:16.456764') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.5ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-19 22:59:16.460509', '2024-11-19 22:59:16.460509') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrder Load (32.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-20 03:59:58 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 10.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | GC: 0.0ms)
Completed 200 OK in 72ms (Views: 12.8ms | ActiveRecord: 14.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 03:59:59 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 03:59:59 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:01:17 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.5ms)
Completed 200 OK in 29ms (Views: 5.1ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.9ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:01:17 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:01:17 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:01:26 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 4.3ms | ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:01:26 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:01:26 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:01:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 2.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 2.8ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:01:28 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:01:28 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:01:28 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:01:29 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 2.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 2.4ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:01:29 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:01:29 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:01:29 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:02:39 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/_order.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 4.9ms | ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.2ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:02:39 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:02:39 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:04:52 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mOrderItem Load (1.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:9
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:10
  Rendered orders/_order.html.erb (Duration: 40.1ms | GC: 0.4ms)
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:9
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:10
  Rendered orders/_order.html.erb (Duration: 4.3ms | GC: 0.0ms)
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:9
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:10
  Rendered orders/_order.html.erb (Duration: 4.5ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 53.9ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 55.0ms | GC: 0.4ms)
Completed 200 OK in 81ms (Views: 25.7ms | ActiveRecord: 35.6ms (22 queries, 12 cached) | GC: 0.5ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:04:53 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:04:53 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:05:33 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (2.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (1.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 39.2ms | GC: 3.0ms)
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (1, 3) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (3, 2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.1ms | GC: 0.7ms)
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 3 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (1.0ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 38.8ms | GC: 19.9ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 92.0ms | GC: 23.7ms)
  Rendered layout layouts/application.html.erb (Duration: 93.2ms | GC: 23.9ms)
Completed 200 OK in 113ms (Views: 68.0ms | ActiveRecord: 26.9ms (50 queries, 22 cached) | GC: 24.0ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:05:34 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:05:34 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:09:01 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 32.3ms | GC: 0.6ms)
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (1, 3) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (3, 2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.1ms | GC: 0.0ms)
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 3 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 20.4ms | GC: 3.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 68.2ms | GC: 4.2ms)
  Rendered layout layouts/application.html.erb (Duration: 69.5ms | GC: 4.3ms)
Completed 200 OK in 92ms (Views: 45.5ms | ActiveRecord: 27.1ms (50 queries, 22 cached) | GC: 4.6ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:09:02 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:09:02 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:10:24 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 32.7ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (1, 3) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (3, 2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.9ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (1.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 3 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.7ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 22.8ms | GC: 3.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 70.3ms | GC: 4.3ms)
  Rendered layout layouts/application.html.erb (Duration: 71.5ms | GC: 4.4ms)
Completed 200 OK in 98ms (Views: 45.8ms | ActiveRecord: 28.3ms (56 queries, 22 cached) | GC: 4.7ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:10:24 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:10:24 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:10:59 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 1.3ms | GC: 0.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.5ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | GC: 0.1ms)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 4.1ms (1 query, 0 cached) | GC: 0.5ms)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <%= turbo_frame_tag dom_id(order) do %>
  <div id="<%= dom_id(order) %>">
    <div class="col-sm-6">
      <p>Order ID: <%= order.uuid %></p>
      <p>Created At: <%= order.created_at %></p>
      <p>Promotions: <%= order.promotions.pluck(:code).join(', ') || - %></p>
      <p>Discounts: <%= order.discounts.pluck(:code).join(', ') || - %></p>
      <p>Total price: <%= order.amount %></p>
    </div>
    <div class="col-sm-6">
      <ul>
        <% order.order_items.each do |item| %>
          <li><%= item.pizza.name %> (<%= item.pizza_size.name %>)</li>
          <% if item.add.present? %>
            <ul>
              <li>Add: <%= item.add.join(', ')%></li>
            </ul>
          <% end %>
          <% if item.remove.present?%>
            <ul>
              <li>Remove: <%= item.remove.join(', ')%></li>
            </ul>
          <% end %>
        <% end %>
      </ul>
    </div>
    
    <%= button_to "Mark as Completed", order_path(order), method: :patch, data: { turbo_frame: dom_id(order), turbo_confirm: "Are you sure?" } %>
  </div>
  <hr>
<% end %>
)
Caused by: ActiveSupport::SyntaxErrorProxy (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:6: syntax error, unexpected ')'
....pluck(:code).join(', ') || - ); @output_buffer.safe_append=...
...                              ^
/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:7: syntax error, unexpected ')'
....pluck(:code).join(', ') || - ); @output_buffer.safe_append=...
...                              ^
)

Information for: ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <%= turbo_frame_tag dom_id(order) do %>
  <div id="<%= dom_id(order) %>">
    <div class="col-sm-6">
      <p>Order ID: <%= order.uuid %></p>
      <p>Created At: <%= order.created_at %></p>
      <p>Promotions: <%= order.promotions.pluck(:code).join(', ') || - %></p>
      <p>Discounts: <%= order.discounts.pluck(:code).join(', ') || - %></p>
      <p>Total price: <%= order.amount %></p>
    </div>
    <div class="col-sm-6">
      <ul>
        <% order.order_items.each do |item| %>
          <li><%= item.pizza.name %> (<%= item.pizza_size.name %>)</li>
          <% if item.add.present? %>
            <ul>
              <li>Add: <%= item.add.join(', ')%></li>
            </ul>
          <% end %>
          <% if item.remove.present?%>
            <ul>
              <li>Remove: <%= item.remove.join(', ')%></li>
            </ul>
          <% end %>
        <% end %>
      </ul>
    </div>
    
    <%= button_to "Mark as Completed", order_path(order), method: :patch, data: { turbo_frame: dom_id(order), turbo_confirm: "Are you sure?" } %>
  </div>
  <hr>
<% end %>
):
1:    <%= turbo_frame_tag dom_id(order) do %>
2:      <div id="<%= dom_id(order) %>">
3:        <div class="col-sm-6">
4:          <p>Order ID: <%= order.uuid %></p>
5:          <p>Created At: <%= order.created_at %></p>
6:          <p>Promotions: <%= order.promotions.pluck(:code).join(', ') || - %></p>
7:          <p>Discounts: <%= order.discounts.pluck(:code).join(', ') || - %></p>
8:          <p>Total price: <%= order.amount %></p>
9:        </div>
10:        <div class="col-sm-6">
11:          <ul>
12:            <% order.order_items.each do |item| %>
13:              <li><%= item.pizza.name %> (<%= item.pizza_size.name %>)</li>
14:              <% if item.add.present? %>
15:                <ul>
16:                  <li>Add: <%= item.add.join(', ')%></li>
17:                </ul>
18:              <% end %>
19:              <% if item.remove.present?%>
20:                <ul>
21:                  <li>Remove: <%= item.remove.join(', ')%></li>
22:                </ul>
23:              <% end %>
24:            <% end %>
25:          </ul>
26:        </div>
27:        
28:        <%= button_to "Mark as Completed", order_path(order), method: :patch, data: { turbo_frame: dom_id(order), turbo_confirm: "Are you sure?" } %>
29:      </div>
30:      <hr>
31:    <% end %>
  
app/views/orders/_order.html.erb:6: syntax error, unexpected ')'
app/views/orders/_order.html.erb:7: syntax error, unexpected ')'
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: ActiveSupport::SyntaxErrorProxy (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:6: syntax error, unexpected ')'
....pluck(:code).join(', ') || - ); @output_buffer.safe_append=...
...                              ^
/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:7: syntax error, unexpected ')'
....pluck(:code).join(', ') || - ); @output_buffer.safe_append=...
...                              ^
):
  
app/views/orders/_order.html.erb:6: syntax error, unexpected ')'
app/views/orders/_order.html.erb:7: syntax error, unexpected ')'
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/favicon.ico" for 127.0.0.1 at 2024-11-20 04:11:00 +0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:11:54 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  Rendered orders/_order.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.5ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 4.9ms (1 query, 0 cached) | GC: 0.6ms)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <%= turbo_frame_tag dom_id(order) do %>
  <div id="<%= dom_id(order) %>">
    <div class="col-sm-6">
      <p>Order ID: <%= order.uuid %></p>
      <p>Created At: <%= order.created_at %></p>
      <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ') || -}" %></p>
      <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ') || -}" %></p>
      <p>Total price: <%= order.amount %></p>
    </div>
    <div class="col-sm-6">
      <ul>
        <% order.order_items.each do |item| %>
          <li><%= item.pizza.name %> (<%= item.pizza_size.name %>)</li>
          <% if item.add.present? %>
            <ul>
              <li>Add: <%= item.add.join(', ')%></li>
            </ul>
          <% end %>
          <% if item.remove.present?%>
            <ul>
              <li>Remove: <%= item.remove.join(', ')%></li>
            </ul>
          <% end %>
        <% end %>
      </ul>
    </div>
    
    <%= button_to "Mark as Completed", order_path(order), method: :patch, data: { turbo_frame: dom_id(order), turbo_confirm: "Are you sure?" } %>
  </div>
  <hr>
<% end %>
)
Caused by: ActiveSupport::SyntaxErrorProxy (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:6: syntax error, unexpected '}'
...s.pluck(:code).join(', ') || -}" ); @output_buffer.safe_appe...
...                              ^
/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:7: syntax error, unexpected '}'
...s.pluck(:code).join(', ') || -}" ); @output_buffer.safe_appe...
...                              ^
)

Information for: ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <%= turbo_frame_tag dom_id(order) do %>
  <div id="<%= dom_id(order) %>">
    <div class="col-sm-6">
      <p>Order ID: <%= order.uuid %></p>
      <p>Created At: <%= order.created_at %></p>
      <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ') || -}" %></p>
      <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ') || -}" %></p>
      <p>Total price: <%= order.amount %></p>
    </div>
    <div class="col-sm-6">
      <ul>
        <% order.order_items.each do |item| %>
          <li><%= item.pizza.name %> (<%= item.pizza_size.name %>)</li>
          <% if item.add.present? %>
            <ul>
              <li>Add: <%= item.add.join(', ')%></li>
            </ul>
          <% end %>
          <% if item.remove.present?%>
            <ul>
              <li>Remove: <%= item.remove.join(', ')%></li>
            </ul>
          <% end %>
        <% end %>
      </ul>
    </div>
    
    <%= button_to "Mark as Completed", order_path(order), method: :patch, data: { turbo_frame: dom_id(order), turbo_confirm: "Are you sure?" } %>
  </div>
  <hr>
<% end %>
):
1:    <%= turbo_frame_tag dom_id(order) do %>
2:      <div id="<%= dom_id(order) %>">
3:        <div class="col-sm-6">
4:          <p>Order ID: <%= order.uuid %></p>
5:          <p>Created At: <%= order.created_at %></p>
6:          <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ') || -}" %></p>
7:          <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ') || -}" %></p>
8:          <p>Total price: <%= order.amount %></p>
9:        </div>
10:        <div class="col-sm-6">
11:          <ul>
12:            <% order.order_items.each do |item| %>
13:              <li><%= item.pizza.name %> (<%= item.pizza_size.name %>)</li>
14:              <% if item.add.present? %>
15:                <ul>
16:                  <li>Add: <%= item.add.join(', ')%></li>
17:                </ul>
18:              <% end %>
19:              <% if item.remove.present?%>
20:                <ul>
21:                  <li>Remove: <%= item.remove.join(', ')%></li>
22:                </ul>
23:              <% end %>
24:            <% end %>
25:          </ul>
26:        </div>
27:        
28:        <%= button_to "Mark as Completed", order_path(order), method: :patch, data: { turbo_frame: dom_id(order), turbo_confirm: "Are you sure?" } %>
29:      </div>
30:      <hr>
31:    <% end %>
  
app/views/orders/_order.html.erb:6: syntax error, unexpected '}'
app/views/orders/_order.html.erb:7: syntax error, unexpected '}'
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: ActiveSupport::SyntaxErrorProxy (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:6: syntax error, unexpected '}'
...s.pluck(:code).join(', ') || -}" ); @output_buffer.safe_appe...
...                              ^
/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/views/orders/_order.html.erb:7: syntax error, unexpected '}'
...s.pluck(:code).join(', ') || -}" ); @output_buffer.safe_appe...
...                              ^
):
  
app/views/orders/_order.html.erb:6: syntax error, unexpected '}'
app/views/orders/_order.html.erb:7: syntax error, unexpected '}'
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:12:09 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 33.0ms | GC: 2.1ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (1, 3) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (3, 2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.7ms | GC: 0.9ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 3 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 18.1ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 69.8ms | GC: 4.1ms)
  Rendered layout layouts/application.html.erb (Duration: 71.0ms | GC: 4.1ms)
Completed 200 OK in 98ms (Views: 44.6ms | ActiveRecord: 29.0ms (56 queries, 22 cached) | GC: 4.1ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:12:10 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:12:10 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:13:19 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 38.3ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (1, 3) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (3, 2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 2[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.9ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (2, 1) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 3 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 3 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 3[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.7ms | GC: 2.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 73.8ms | GC: 4.5ms)
  Rendered layout layouts/application.html.erb (Duration: 75.2ms | GC: 4.8ms)
Completed 200 OK in 99ms (Views: 45.8ms | ActiveRecord: 31.9ms (56 queries, 22 cached) | GC: 5.2ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:13:19 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:13:19 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/3" for 127.0.0.1 at 2024-11-20 04:13:29 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"3"}
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:42:in `set_order'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mOrder Update (1.8ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-19 23:13:29.243439' WHERE "orders"."id" = 3 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:30:in `block in update'
Completed 200 OK in 47ms (Views: 0.1ms | ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.5ms)


[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (6.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (3.0ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.2ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.8ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-19 23:13:39.949007', '2024-11-19 23:13:39.949007') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-19 23:13:39.950949', '2024-11-19 23:13:39.950949') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-19 23:13:39.952406', '2024-11-19 23:13:39.952406') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.8ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-19 23:13:39.953999', '2024-11-19 23:13:39.953999') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.9ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-19 23:13:39.958603', '2024-11-19 23:13:39.958603') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-19 23:13:39.960460', '2024-11-19 23:13:39.960460') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.2ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-19 23:13:39.962109', '2024-11-19 23:13:39.962109') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-19 23:13:39.964263', '2024-11-19 23:13:39.964263') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-19 23:13:39.965725', '2024-11-19 23:13:39.965725') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.0ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-19 23:13:39.967244', '2024-11-19 23:13:39.967244') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.5ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-19 23:13:39.969193', '2024-11-19 23:13:39.969193') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('691a176b-cfb6-4d2e-a381-96292e05abe5', 'OPEN', '2024-11-19 23:13:39.970626', '2024-11-19 23:13:39.970626') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-19 23:13:39.976453', '2024-11-19 23:13:39.976453') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('1012fdf0-222d-4fc4-80e4-96e979e0e449', 'OPEN', '2024-11-19 23:13:39.977969', '2024-11-19 23:13:39.977969') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-19 23:13:39.980356', '2024-11-19 23:13:39.980356') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-19 23:13:39.982385', '2024-11-19 23:13:39.982385') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-19 23:13:39.984262', '2024-11-19 23:13:39.984262') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('2a910561-6640-4423-b2a8-eaa099321a9a', 'OPEN', '2024-11-19 23:13:39.985239', '2024-11-19 23:13:39.985239') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-19 23:13:39.987440', '2024-11-19 23:13:39.987440') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 23:13:39.989393', '2024-11-19 23:13:39.989393') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 23:13:39.991510', '2024-11-19 23:13:39.991510') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-19 23:13:39.995375', '2024-11-19 23:13:39.995375') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-19 23:13:39.997990', '2024-11-19 23:13:39.997990') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-19 23:13:40.000147', '2024-11-19 23:13:40.000147') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.1ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-19 23:13:40.002388', '2024-11-19 23:13:40.002388') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:13:41 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.7ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.9ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.5ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 38.5ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 38.8ms | GC: 0.6ms)
Completed 200 OK in 60ms (Views: 24.5ms | ActiveRecord: 14.5ms (56 queries, 22 cached) | GC: 0.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:13:42 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:13:42 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:13:42 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:17:46 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.9ms | GC: 0.1ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.5ms | GC: 1.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.4ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 43.7ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 44.4ms | GC: 1.1ms)
Completed 200 OK in 73ms (Views: 31.0ms | ActiveRecord: 13.7ms (56 queries, 22 cached) | GC: 2.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:17:46 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/assets/application-6b851cb2.css" for 127.0.0.1 at 2024-11-20 04:17:46 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:17:46 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:17:46 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:17:47 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.4ms | GC: 1.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.1ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 18.6ms | GC: 0.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 47.4ms | GC: 1.8ms)
  Rendered layout layouts/application.html.erb (Duration: 47.8ms | GC: 1.8ms)
Completed 200 OK in 84ms (Views: 35.9ms | ActiveRecord: 12.2ms (56 queries, 22 cached) | GC: 1.8ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:17:47 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:17:47 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:17:47 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:19:00 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.1ms | GC: 2.1ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.4ms | GC: 1.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 18.5ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 42.9ms | GC: 3.7ms)
  Rendered layout layouts/application.html.erb (Duration: 43.5ms | GC: 3.7ms)
Completed 200 OK in 70ms (Views: 30.7ms | ActiveRecord: 13.0ms (56 queries, 22 cached) | GC: 3.7ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:19:00 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/assets/application-d3bb26df.css" for 127.0.0.1 at 2024-11-20 04:19:00 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:19:00 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:19:00 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:19:01 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.6ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.7ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.4ms | GC: 2.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 49.0ms | GC: 2.6ms)
  Rendered layout layouts/application.html.erb (Duration: 49.4ms | GC: 2.6ms)
Completed 200 OK in 88ms (Views: 36.7ms | ActiveRecord: 12.9ms (56 queries, 22 cached) | GC: 2.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:19:01 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:19:01 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:19:01 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-20 04:19:13 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 31.3ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 10.7ms | GC: 2.3ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:12:in `map'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:21:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:24:in `promotion_discount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" WHERE "order_items"."order_id" = 6 AND (pizzas.name = 'Salami' AND pizza_sizes.name = 'Small') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:26:in `block in promotion_discount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:17:in `size_price_multiplier'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:14:in `amount'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:19:in `discount_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.5ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 65.3ms | GC: 3.4ms)
  Rendered layout layouts/application.html.erb (Duration: 68.6ms | GC: 3.4ms)
Completed 200 OK in 93ms (Views: 44.9ms | ActiveRecord: 25.9ms (56 queries, 22 cached) | GC: 3.5ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-20 04:19:13 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-20 04:19:13 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-21 23:56:30 +0500
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (3.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  Rendered orders/_order.html.erb (Duration: 17.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 29.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.8ms | GC: 0.0ms)
Completed 500 Internal Server Error in 94ms (ActiveRecord: 24.0ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method `order_items' for nil)
Caused by: NoMethodError (undefined method `order_items' for nil)

Information for: ActionView::Template::Error (undefined method `order_items' for nil):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order.rb:22:in `calculate_base_amount'
app/models/order.rb:13:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `order_items' for nil):
  
app/models/order.rb:22:in `calculate_base_amount'
app/models/order.rb:13:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/favicon.ico" for 127.0.0.1 at 2024-11-21 23:56:30 +0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/orders" for 127.0.0.1 at 2024-11-21 23:57:11 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (1.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Sum (1.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 49.0ms | GC: 3.1ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 10.8ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:27:in `calculate_promotion_amount'
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:41:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:49:in `apply_discounts'
  [1m[36mDiscount Sum (0.7ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.4ms | GC: 0.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 85.7ms | GC: 4.3ms)
  Rendered layout layouts/application.html.erb (Duration: 94.8ms | GC: 8.1ms)
Completed 200 OK in 119ms (Views: 59.6ms | ActiveRecord: 38.8ms (56 queries, 22 cached) | GC: 8.3ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-21 23:57:11 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-21 23:57:11 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-21 23:57:30 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (11.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 37.8ms | GC: 1.1ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.5ms | GC: 4.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:27:in `calculate_promotion_amount'
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:41:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:49:in `apply_discounts'
  [1m[36mDiscount Sum (0.7ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 49.8ms | GC: 30.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 125.4ms | GC: 38.8ms)
  Rendered layout layouts/application.html.erb (Duration: 126.5ms | GC: 38.8ms)
Completed 200 OK in 153ms (Views: 82.9ms | ActiveRecord: 45.8ms (56 queries, 22 cached) | GC: 38.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-21 23:57:31 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-21 23:57:31 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (5.5ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 5, 1, '2024-11-21 19:04:18.160506', '2024-11-21 19:04:18.160506') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 3, 1, '2024-11-21 19:04:21.995934', '2024-11-21 19:04:21.995934') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (1.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (1.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (1.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' /*application='EvermoodChallenge'*/[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:24 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (2.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.4ms | GC: 0.1ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 7.5ms | GC: 1.8ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 6.0ms | GC: 0.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 34.1ms | GC: 2.4ms)
  Rendered layout layouts/application.html.erb (Duration: 35.2ms | GC: 2.5ms)
Completed 200 OK in 70ms (Views: 24.2ms | ActiveRecord: 17.0ms (28 queries, 12 cached) | GC: 2.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:24 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:24 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:26 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 7.1ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.1ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.9ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 26.9ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 27.4ms | GC: 0.3ms)
Completed 200 OK in 64ms (Views: 20.5ms | ActiveRecord: 7.2ms (28 queries, 12 cached) | GC: 0.3ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:26 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:26 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:26 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 7.3ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.8ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.7ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 27.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.1ms | GC: 0.0ms)
Completed 200 OK in 65ms (Views: 20.3ms | ActiveRecord: 8.1ms (28 queries, 12 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:28 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:28 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:28 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:29 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 6.5ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 7.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.1ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 24.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | GC: 0.0ms)
Completed 200 OK in 59ms (Views: 19.5ms | ActiveRecord: 5.6ms (28 queries, 12 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:29 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:29 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:29 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:30 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 7.4ms | GC: 0.9ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.2ms | GC: 0.8ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.6ms | GC: 0.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 26.8ms | GC: 2.5ms)
  Rendered layout layouts/application.html.erb (Duration: 27.2ms | GC: 2.5ms)
Completed 200 OK in 61ms (Views: 20.5ms | ActiveRecord: 7.0ms (28 queries, 12 cached) | GC: 2.5ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:30 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:30 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:30 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:31 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 6.8ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.2ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.7ms | GC: 0.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 26.0ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 26.4ms | GC: 0.8ms)
Completed 200 OK in 64ms (Views: 19.8ms | ActiveRecord: 6.8ms (28 queries, 12 cached) | GC: 0.8ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:31 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:31 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:31 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:31 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 6.8ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 6.7ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 7.5ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 23.4ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | GC: 0.2ms)
Completed 200 OK in 62ms (Views: 17.7ms | ActiveRecord: 6.5ms (28 queries, 12 cached) | GC: 0.2ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:32 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:10:32 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:10:32 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:10:45 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  Rendered orders/_order.html.erb (Duration: 13.4ms | GC: 0.9ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 20.7ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 20.8ms | GC: 1.3ms)
Completed 500 Internal Server Error in 55ms (ActiveRecord: 18.8ms (3 queries, 0 cached) | GC: 3.4ms)


  
ActionView::Template::Error (uninitialized constant Order::Orders)
Caused by: NameError (uninitialized constant Order::Orders)

Information for: ActionView::Template::Error (uninitialized constant Order::Orders):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NameError (uninitialized constant Order::Orders):
  
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/favicon.ico" for 127.0.0.1 at 2024-11-22 00:10:45 +0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:11:04 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  Rendered orders/_order.html.erb (Duration: 8.6ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 9.6ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (uninitialized constant Orders)
Caused by: NameError (uninitialized constant Orders)

Information for: ActionView::Template::Error (uninitialized constant Orders):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NameError (uninitialized constant Orders):
  
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:11:05 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  Rendered orders/_order.html.erb (Duration: 3.4ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 5.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.0ms)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 1.8ms (3 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (uninitialized constant Orders)
Caused by: NameError (uninitialized constant Orders)

Information for: ActionView::Template::Error (uninitialized constant Orders):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NameError (uninitialized constant Orders):
  
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:12:15 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 59.5ms | GC: 14.9ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.5ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  Rendered orders/_order.html.erb (Duration: 13.7ms | GC: 5.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 93.9ms | GC: 20.4ms)
  Rendered layout layouts/application.html.erb (Duration: 94.0ms | GC: 20.4ms)
Completed 500 Internal Server Error in 165ms (ActiveRecord: 46.7ms (40 queries, 10 cached) | GC: 26.5ms)


  
ActionView::Template::Error (undefined method `name' for an instance of Promotion)
Caused by: NoMethodError (undefined method `name' for an instance of Promotion)

Information for: ActionView::Template::Error (undefined method `name' for an instance of Promotion):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:25:in `uniq'
app/services/orders/amount_calculator.rb:25:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `name' for an instance of Promotion):
  
app/services/orders/amount_calculator.rb:25:in `uniq'
app/services/orders/amount_calculator.rb:25:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:12:16 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.7ms | GC: 1.7ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.9ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (12.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.5ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (2.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (3.1ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 73.5ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  Rendered orders/_order.html.erb (Duration: 6.8ms | GC: 0.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 91.9ms | GC: 2.9ms)
  Rendered layout layouts/application.html.erb (Duration: 92.0ms | GC: 2.9ms)
Completed 500 Internal Server Error in 112ms (ActiveRecord: 28.6ms (40 queries, 10 cached) | GC: 2.9ms)


  
ActionView::Template::Error (undefined method `name' for an instance of Promotion)
Caused by: NoMethodError (undefined method `name' for an instance of Promotion)

Information for: ActionView::Template::Error (undefined method `name' for an instance of Promotion):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:25:in `uniq'
app/services/orders/amount_calculator.rb:25:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `name' for an instance of Promotion):
  
app/services/orders/amount_calculator.rb:25:in `uniq'
app/services/orders/amount_calculator.rb:25:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:12:17 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.2ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  Rendered orders/_order.html.erb (Duration: 8.4ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 34.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 34.7ms | GC: 0.0ms)
Completed 500 Internal Server Error in 71ms (ActiveRecord: 10.2ms (40 queries, 10 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method `name' for an instance of Promotion)
Caused by: NoMethodError (undefined method `name' for an instance of Promotion)

Information for: ActionView::Template::Error (undefined method `name' for an instance of Promotion):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:25:in `uniq'
app/services/orders/amount_calculator.rb:25:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `name' for an instance of Promotion):
  
app/services/orders/amount_calculator.rb:25:in `uniq'
app/services/orders/amount_calculator.rb:25:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:12:31 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 33.7ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.5ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:39:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 18.5ms | GC: 2.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 66.6ms | GC: 4.0ms)
  Rendered layout layouts/application.html.erb (Duration: 72.1ms | GC: 4.8ms)
Completed 200 OK in 95ms (Views: 44.2ms | ActiveRecord: 30.4ms (56 queries, 22 cached) | GC: 5.9ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:12:31 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:12:31 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:26:41 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.9ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  Rendered orders/_order.html.erb (Duration: 18.6ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 22.3ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 22.4ms | GC: 0.7ms)
Completed 500 Internal Server Error in 62ms (ActiveRecord: 15.8ms (7 queries, 0 cached) | GC: 1.7ms)


  
ActionView::Template::Error (undefined method `positive?' for nil)
Caused by: NoMethodError (undefined method `positive?' for nil)

Information for: ActionView::Template::Error (undefined method `positive?' for nil):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order_item.rb:10:in `amount'
app/services/orders/amount_calculator.rb:20:in `block in calculate_base_amount'
app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
app/services/orders/amount_calculator.rb:11:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `positive?' for nil):
  
app/models/order_item.rb:10:in `amount'
app/services/orders/amount_calculator.rb:20:in `block in calculate_base_amount'
app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
app/services/orders/amount_calculator.rb:11:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:26:59 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 37.6ms | GC: 2.9ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.0ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:20:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:39:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:16:in `size_price_multiplier'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.6ms | GC: 0.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 70.3ms | GC: 4.0ms)
  Rendered layout layouts/application.html.erb (Duration: 73.8ms | GC: 6.1ms)
Completed 200 OK in 104ms (Views: 48.0ms | ActiveRecord: 31.7ms (56 queries, 22 cached) | GC: 6.1ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:26:59 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:26:59 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:28:22 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 35.0ms | GC: 2.7ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.7ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:22:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:39:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:18:in `size_price_multiplier'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.4ms | GC: 2.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 68.3ms | GC: 5.7ms)
  Rendered layout layouts/application.html.erb (Duration: 69.4ms | GC: 5.8ms)
Completed 200 OK in 94ms (Views: 46.4ms | ActiveRecord: 26.1ms (59 queries, 25 cached) | GC: 5.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:28:22 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:28:22 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:28:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 28.7ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.5ms | GC: 1.9ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:39:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:19:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:19:in `size_price_multiplier'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.5ms | GC: 1.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 61.1ms | GC: 3.7ms)
  Rendered layout layouts/application.html.erb (Duration: 62.0ms | GC: 3.7ms)
Completed 200 OK in 83ms (Views: 39.8ms | ActiveRecord: 24.6ms (59 queries, 25 cached) | GC: 3.9ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:28:56 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:28:56 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 00:29:27 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 36.4ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.9ms | GC: 2.8ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:20:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:24:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:25:in `uniq'
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" INNER JOIN "pizzas" ON "pizzas"."id" = "order_items"."pizza_id" INNER JOIN "pizza_sizes" ON "pizza_sizes"."id" = "order_items"."pizza_size_id" WHERE "order_items"."order_id" = 6 AND "pizzas"."name" = 'Salami' AND "pizza_sizes"."name" = 'Small' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:39:in `calculate_promotion_for_items'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:20:in `size_price_multiplier'
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/models/order_item.rb:20:in `size_price_multiplier'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 39.2ms | GC: 17.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 96.9ms | GC: 20.9ms)
  Rendered layout layouts/application.html.erb (Duration: 102.6ms | GC: 25.3ms)
Completed 200 OK in 124ms (Views: 72.5ms | ActiveRecord: 33.2ms (56 queries, 22 cached) | GC: 25.4ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 00:29:28 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 00:29:28 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/cable" for 127.0.0.1 at 2024-11-22 01:06:16 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 01:06:16 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('0d617cbe-a695-4320-9445-11bbcac27fd0', 'OPEN', '2024-11-21 20:14:15.592033', '2024-11-21 20:14:15.592033') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (2.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('68db1728-c502-4d6f-83d7-3f940db45e37', 'OPEN', '2024-11-21 20:15:16.439164', '2024-11-21 20:15:16.439164') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('7c7e17b4-d339-45b4-9dff-fe03d4054e4f', 'OPEN', '2024-11-21 20:15:20.269170', '2024-11-21 20:15:20.269170') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ingredients" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "oder_offers" DISABLE TRIGGER ALL;ALTER TABLE "offers" DISABLE TRIGGER ALL;ALTER TABLE "order_items" DISABLE TRIGGER ALL;ALTER TABLE "pizzas" DISABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" DISABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mFixtures Load (3.8ms)[0m  [1m[31mDELETE FROM "offers";
DELETE FROM "ingredients";
DELETE FROM "oder_offers";
DELETE FROM "order_items";
DELETE FROM "orders";
DELETE FROM "pizza_sizes";
DELETE FROM "pizzas";
INSERT INTO "offers" ("id", "code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES (650716369, '2FOR1', DEFAULT, DEFAULT, 'Salami', 'Small', 2, 1, '2024-11-21 20:42:47.241010', '2024-11-21 20:42:47.241010'), (980190962, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:42:47.231793', '2024-11-21 20:42:47.231793'), (298486374, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:42:47.231793', '2024-11-21 20:42:47.231793'), (486318072, 'SAVE5', DEFAULT, 5, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2024-11-21 20:42:47.185650', '2024-11-21 20:42:47.185650');
INSERT INTO "ingredients" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (980190962, 'MyString', 1.5, '2024-11-21 20:42:47.220394', '2024-11-21 20:42:47.220394'), (298486374, 'MyString', 1.5, '2024-11-21 20:42:47.220394', '2024-11-21 20:42:47.220394');
INSERT INTO "oder_offers" ("id", "order_id", "offer_id", "created_at", "updated_at") VALUES (374990698, 980190962, 486318072, '2024-11-21 20:42:47.224943', '2024-11-21 20:42:47.224943');
INSERT INTO "order_items" ("id", "order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1015095155, 959957393, 980190962, 426453439, DEFAULT, DEFAULT, '2024-11-21 20:42:47.231896', '2024-11-21 20:42:47.231896'), (388436965, 311543047, 298486374, 893774356, DEFAULT, DEFAULT, '2024-11-21 20:42:47.231896', '2024-11-21 20:42:47.231896');
INSERT INTO "orders" ("id", "uuid", "state", "created_at", "updated_at") VALUES (959957393, '58339e32-1cbc-4559-af69-c3ce9e007965', 'OPEN', '2024-11-21 20:42:47.238289', '2024-11-21 20:42:47.238289'), (311543047, 'ef42258a-2a90-4c16-90f9-b756d8298f2f', 'COMPLETED', '2024-11-21 20:42:47.238289', '2024-11-21 20:42:47.238289');
INSERT INTO "pizza_sizes" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (426453439, 'Large', 1.5, '2024-11-21 20:42:47.239370', '2024-11-21 20:42:47.239370'), (108217786, 'Medium', 1.0, '2024-11-21 20:42:47.239370', '2024-11-21 20:42:47.239370'), (893774356, 'Small', 0.7, '2024-11-21 20:42:47.239370', '2024-11-21 20:42:47.239370');
INSERT INTO "pizzas" ("id", "name", "price", "created_at", "updated_at") VALUES (980190962, 'Tikka', 1.5, '2024-11-21 20:42:47.240210', '2024-11-21 20:42:47.240210'), (298486374, 'supreme', 1.5, '2024-11-21 20:42:47.240210', '2024-11-21 20:42:47.240210')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ingredients" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "oder_offers" ENABLE TRIGGER ALL;ALTER TABLE "offers" ENABLE TRIGGER ALL;ALTER TABLE "order_items" ENABLE TRIGGER ALL;ALTER TABLE "pizzas" ENABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" ENABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (12.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ingredients" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "oder_offers" DISABLE TRIGGER ALL;ALTER TABLE "offers" DISABLE TRIGGER ALL;ALTER TABLE "order_items" DISABLE TRIGGER ALL;ALTER TABLE "pizzas" DISABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" DISABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mFixtures Load (5.9ms)[0m  [1m[31mDELETE FROM "offers";
DELETE FROM "ingredients";
DELETE FROM "oder_offers";
DELETE FROM "order_items";
DELETE FROM "orders";
DELETE FROM "pizza_sizes";
DELETE FROM "pizzas";
INSERT INTO "offers" ("id", "code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES (650716369, '2FOR1', DEFAULT, DEFAULT, 'Salami', 'Small', 2, 1, '2024-11-21 20:43:15.355690', '2024-11-21 20:43:15.355690'), (980190962, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:43:15.338413', '2024-11-21 20:43:15.338413'), (298486374, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:43:15.338413', '2024-11-21 20:43:15.338413'), (486318072, 'SAVE5', DEFAULT, 5, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2024-11-21 20:43:15.288983', '2024-11-21 20:43:15.288983');
INSERT INTO "ingredients" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (980190962, 'MyString', 1.5, '2024-11-21 20:43:15.325748', '2024-11-21 20:43:15.325748'), (298486374, 'MyString', 1.5, '2024-11-21 20:43:15.325748', '2024-11-21 20:43:15.325748');
INSERT INTO "oder_offers" ("id", "order_id", "offer_id", "created_at", "updated_at") VALUES (374990698, 311543047, 486318072, '2024-11-21 20:43:15.330962', '2024-11-21 20:43:15.330962');
INSERT INTO "order_items" ("id", "order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1015095155, 959957393, 980190962, 426453439, DEFAULT, DEFAULT, '2024-11-21 20:43:15.338526', '2024-11-21 20:43:15.338526'), (388436965, 311543047, 298486374, 893774356, DEFAULT, DEFAULT, '2024-11-21 20:43:15.338526', '2024-11-21 20:43:15.338526');
INSERT INTO "orders" ("id", "uuid", "state", "created_at", "updated_at") VALUES (959957393, '8ee04884-3f9c-49a6-b631-3e314ed1b864', 'OPEN', '2024-11-21 20:43:15.350374', '2024-11-21 20:43:15.350374'), (311543047, '5723feee-d5c9-46e8-b448-faf5736e8fe3', 'COMPLETED', '2024-11-21 20:43:15.350374', '2024-11-21 20:43:15.350374');
INSERT INTO "pizza_sizes" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (426453439, 'Large', 1.5, '2024-11-21 20:43:15.352323', '2024-11-21 20:43:15.352323'), (108217786, 'Medium', 1.0, '2024-11-21 20:43:15.352323', '2024-11-21 20:43:15.352323'), (893774356, 'Small', 0.7, '2024-11-21 20:43:15.352323', '2024-11-21 20:43:15.352323');
INSERT INTO "pizzas" ("id", "name", "price", "created_at", "updated_at") VALUES (980190962, 'Tikka', 1.5, '2024-11-21 20:43:15.354023', '2024-11-21 20:43:15.354023'), (298486374, 'supreme', 1.5, '2024-11-21 20:43:15.354023', '2024-11-21 20:43:15.354023')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ingredients" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "oder_offers" ENABLE TRIGGER ALL;ALTER TABLE "offers" ENABLE TRIGGER ALL;ALTER TABLE "order_items" ENABLE TRIGGER ALL;ALTER TABLE "pizzas" ENABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" ENABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (12.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (70.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35m (118.4ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (8.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 20:43:22.096647', '2024-11-21 20:43:22.096650') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-21 20:43:22.099992' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'cba8f02dfcfc755a9e6e5619e6808a1e62d5fb2c', '2024-11-21 20:43:22.102035', '2024-11-21 20:43:22.102036') RETURNING "key" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ingredients" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "oder_offers" DISABLE TRIGGER ALL;ALTER TABLE "offers" DISABLE TRIGGER ALL;ALTER TABLE "order_items" DISABLE TRIGGER ALL;ALTER TABLE "pizzas" DISABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" DISABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mFixtures Load (8.1ms)[0m  [1m[31mDELETE FROM "offers";
DELETE FROM "ingredients";
DELETE FROM "oder_offers";
DELETE FROM "order_items";
DELETE FROM "orders";
DELETE FROM "pizza_sizes";
DELETE FROM "pizzas";
INSERT INTO "offers" ("id", "code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES (88, '2FOR1', DEFAULT, DEFAULT, 'Salami', 'Small', 2, 1, '2024-11-21 20:51:30.127830', '2024-11-21 20:51:30.127830'), (61, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:51:30.112028', '2024-11-21 20:51:30.112028'), (62, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:51:30.112028', '2024-11-21 20:51:30.112028'), (99, 'SAVE5', DEFAULT, 5, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2024-11-21 20:51:30.057014', '2024-11-21 20:51:30.057014');
INSERT INTO "ingredients" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (71, 'MyString', 1.5, '2024-11-21 20:51:30.098992', '2024-11-21 20:51:30.098992'), (72, 'MyString', 1.5, '2024-11-21 20:51:30.098992', '2024-11-21 20:51:30.098992');
INSERT INTO "oder_offers" ("id", "order_id", "offer_id", "created_at", "updated_at") VALUES (21, 311543047, 486318072, '2024-11-21 20:51:30.104095', '2024-11-21 20:51:30.104095');
INSERT INTO "order_items" ("id", "order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (51, 959957393, 163500997, 426453439, DEFAULT, DEFAULT, '2024-11-21 20:51:30.112125', '2024-11-21 20:51:30.112125'), (52, 311543047, 572055383, 893774356, DEFAULT, DEFAULT, '2024-11-21 20:51:30.112125', '2024-11-21 20:51:30.112125');
INSERT INTO "orders" ("id", "uuid", "state", "created_at", "updated_at") VALUES (1, 'asdsadsadas', 'OPEN', '2024-11-21 20:51:30.122749', '2024-11-21 20:51:30.122749'), (2, 'jabcjsabcjasasjbcja', 'COMPLETED', '2024-11-21 20:51:30.122749', '2024-11-21 20:51:30.122749');
INSERT INTO "pizza_sizes" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (41, 'Large', 1.5, '2024-11-21 20:51:30.124514', '2024-11-21 20:51:30.124514'), (42, 'Medium', 1.0, '2024-11-21 20:51:30.124514', '2024-11-21 20:51:30.124514'), (43, 'Small', 0.7, '2024-11-21 20:51:30.124514', '2024-11-21 20:51:30.124514');
INSERT INTO "pizzas" ("id", "name", "price", "created_at", "updated_at") VALUES (31, 'Tikka', 1.5, '2024-11-21 20:51:30.126163', '2024-11-21 20:51:30.126163'), (32, 'supreme', 1.5, '2024-11-21 20:51:30.126163', '2024-11-21 20:51:30.126163')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ingredients" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "oder_offers" ENABLE TRIGGER ALL;ALTER TABLE "offers" ENABLE TRIGGER ALL;ALTER TABLE "order_items" ENABLE TRIGGER ALL;ALTER TABLE "pizzas" ENABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" ENABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (12.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ingredients" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "oder_offers" DISABLE TRIGGER ALL;ALTER TABLE "offers" DISABLE TRIGGER ALL;ALTER TABLE "order_items" DISABLE TRIGGER ALL;ALTER TABLE "pizzas" DISABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" DISABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mFixtures Load (5.4ms)[0m  [1m[31mDELETE FROM "offers";
DELETE FROM "ingredients";
DELETE FROM "oder_offers";
DELETE FROM "order_items";
DELETE FROM "orders";
DELETE FROM "pizza_sizes";
DELETE FROM "pizzas";
INSERT INTO "offers" ("id", "code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES (88, '2FOR1', DEFAULT, DEFAULT, 'Salami', 'Small', 2, 1, '2024-11-21 20:53:16.296195', '2024-11-21 20:53:16.296195'), (61, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:53:16.280021', '2024-11-21 20:53:16.280021'), (62, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:53:16.280021', '2024-11-21 20:53:16.280021'), (99, 'SAVE5', DEFAULT, 5, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2024-11-21 20:53:16.225772', '2024-11-21 20:53:16.225772');
INSERT INTO "ingredients" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (71, 'MyString', 1.5, '2024-11-21 20:53:16.266268', '2024-11-21 20:53:16.266268'), (72, 'MyString', 1.5, '2024-11-21 20:53:16.266268', '2024-11-21 20:53:16.266268');
INSERT INTO "oder_offers" ("id", "order_id", "offer_id", "created_at", "updated_at") VALUES (21, 311543047, 486318072, '2024-11-21 20:53:16.271654', '2024-11-21 20:53:16.271654');
INSERT INTO "order_items" ("id", "order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (51, 64810937, 611088376, 724427060, DEFAULT, DEFAULT, '2024-11-21 20:53:16.280137', '2024-11-21 20:53:16.280137'), (52, 450215437, 1030039120, 841265288, DEFAULT, DEFAULT, '2024-11-21 20:53:16.280137', '2024-11-21 20:53:16.280137');
INSERT INTO "orders" ("id", "uuid", "state", "created_at", "updated_at") VALUES (1, 'asdsadsadas', 'OPEN', '2024-11-21 20:53:16.290945', '2024-11-21 20:53:16.290945'), (2, 'jabcjsabcjasasjbcja', 'COMPLETED', '2024-11-21 20:53:16.290945', '2024-11-21 20:53:16.290945');
INSERT INTO "pizza_sizes" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (41, 'Large', 1.5, '2024-11-21 20:53:16.292711', '2024-11-21 20:53:16.292711'), (42, 'Medium', 1.0, '2024-11-21 20:53:16.292711', '2024-11-21 20:53:16.292711'), (43, 'Small', 0.7, '2024-11-21 20:53:16.292711', '2024-11-21 20:53:16.292711');
INSERT INTO "pizzas" ("id", "name", "price", "created_at", "updated_at") VALUES (31, 'Tikka', 1.5, '2024-11-21 20:53:16.294364', '2024-11-21 20:53:16.294364'), (32, 'supreme', 1.5, '2024-11-21 20:53:16.294364', '2024-11-21 20:53:16.294364')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ingredients" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "oder_offers" ENABLE TRIGGER ALL;ALTER TABLE "offers" ENABLE TRIGGER ALL;ALTER TABLE "order_items" ENABLE TRIGGER ALL;ALTER TABLE "pizzas" ENABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" ENABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (10.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ingredients" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "oder_offers" DISABLE TRIGGER ALL;ALTER TABLE "offers" DISABLE TRIGGER ALL;ALTER TABLE "order_items" DISABLE TRIGGER ALL;ALTER TABLE "pizzas" DISABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" DISABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mFixtures Load (6.1ms)[0m  [1m[31mDELETE FROM "offers";
DELETE FROM "ingredients";
DELETE FROM "oder_offers";
DELETE FROM "order_items";
DELETE FROM "orders";
DELETE FROM "pizza_sizes";
DELETE FROM "pizzas";
INSERT INTO "offers" ("id", "code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES (88, '2FOR1', DEFAULT, DEFAULT, 'Salami', 'Small', 2, 1, '2024-11-21 20:53:21.072373', '2024-11-21 20:53:21.072373'), (61, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:53:21.057060', '2024-11-21 20:53:21.057060'), (62, 'MyString', 'MyString', 1, 'MyString', 'MyString', 1, 1, '2024-11-21 20:53:21.057060', '2024-11-21 20:53:21.057060'), (99, 'SAVE5', DEFAULT, 5, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2024-11-21 20:53:21.019757', '2024-11-21 20:53:21.019757');
INSERT INTO "ingredients" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (71, 'MyString', 1.5, '2024-11-21 20:53:21.045461', '2024-11-21 20:53:21.045461'), (72, 'MyString', 1.5, '2024-11-21 20:53:21.045461', '2024-11-21 20:53:21.045461');
INSERT INTO "oder_offers" ("id", "order_id", "offer_id", "created_at", "updated_at") VALUES (21, 311543047, 486318072, '2024-11-21 20:53:21.049372', '2024-11-21 20:53:21.049372');
INSERT INTO "order_items" ("id", "order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (51, 64810937, 611088376, 724427060, DEFAULT, DEFAULT, '2024-11-21 20:53:21.057163', '2024-11-21 20:53:21.057163'), (52, 450215437, 1030039120, 841265288, DEFAULT, DEFAULT, '2024-11-21 20:53:21.057163', '2024-11-21 20:53:21.057163');
INSERT INTO "orders" ("id", "uuid", "state", "created_at", "updated_at") VALUES (1, 'asdsadsadas', 'OPEN', '2024-11-21 20:53:21.067129', '2024-11-21 20:53:21.067129'), (2, 'jabcjsabcjasasjbcja', 'COMPLETED', '2024-11-21 20:53:21.067129', '2024-11-21 20:53:21.067129');
INSERT INTO "pizza_sizes" ("id", "name", "multiplier", "created_at", "updated_at") VALUES (41, 'Large', 1.5, '2024-11-21 20:53:21.068905', '2024-11-21 20:53:21.068905'), (42, 'Medium', 1.0, '2024-11-21 20:53:21.068905', '2024-11-21 20:53:21.068905'), (43, 'Small', 0.7, '2024-11-21 20:53:21.068905', '2024-11-21 20:53:21.068905');
INSERT INTO "pizzas" ("id", "name", "price", "created_at", "updated_at") VALUES (31, 'Tikka', 1.5, '2024-11-21 20:53:21.070636', '2024-11-21 20:53:21.070636'), (32, 'supreme', 1.5, '2024-11-21 20:53:21.070636', '2024-11-21 20:53:21.070636')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ingredients" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "oder_offers" ENABLE TRIGGER ALL;ALTER TABLE "offers" ENABLE TRIGGER ALL;ALTER TABLE "order_items" ENABLE TRIGGER ALL;ALTER TABLE "pizzas" ENABLE TRIGGER ALL;ALTER TABLE "pizza_sizes" ENABLE TRIGGER ALL /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (10.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.1ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('7299175b-eefa-45fb-8e47-57481d724355', 'OPEN', '2024-11-21 20:59:13.396264', '2024-11-21 20:59:13.396264') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('fcfd0c09-8066-4887-b552-50d3cff23fc5', 'OPEN', '2024-11-21 20:59:33.751771', '2024-11-21 20:59:33.751771') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.3ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('f672c0c6-8f08-4494-997e-eb8ff2db1b46', 'OPEN', '2024-11-21 21:01:03.694177', '2024-11-21 21:01:03.694177') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:01:16 +0500
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:01:16 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.9ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('4233815f-f88a-481c-ab77-f9ddc198e5c8', 'OPEN', '2024-11-21 21:08:57.956838', '2024-11-21 21:08:57.956838') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.1ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('5fd4e382-24dd-45ca-a5e2-369912c61b7f', 'OPEN', '2024-11-21 21:09:17.682148', '2024-11-21 21:09:17.682148') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Supreme', 5.0, '2024-11-21 21:09:17.703426', '2024-11-21 21:09:17.703426') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.0ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 21:09:17.715621', '2024-11-21 21:09:17.715621') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (2.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (959957398, 980190963, 893774357, NULL, NULL, '2024-11-21 21:09:17.719388', '2024-11-21 21:09:17.719388') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Supreme', 5.0, '2024-11-21 21:09:17.723950', '2024-11-21 21:09:17.723950') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 21:09:17.725437', '2024-11-21 21:09:17.725437') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (959957398, 980190964, 893774358, NULL, NULL, '2024-11-21 21:09:17.726915', '2024-11-21 21:09:17.726915') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:40:30 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  Rendered orders/_order.html.erb (Duration: 19.7ms | GC: 0.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 30.4ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 30.5ms | GC: 1.1ms)
Completed 500 Internal Server Error in 177ms (ActiveRecord: 21.4ms (3 queries, 0 cached) | GC: 1.7ms)


  
ActionView::Template::Error (undefined local variable or method `order_items' for class Orders::AmountCalculator)
Caused by: NameError (undefined local variable or method `order_items' for class Orders::AmountCalculator)

Information for: ActionView::Template::Error (undefined local variable or method `order_items' for class Orders::AmountCalculator):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:4:in `<class:AmountCalculator>'
app/services/orders/amount_calculator.rb:2:in `<module:Orders>'
app/services/orders/amount_calculator.rb:1:in `<main>'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NameError (undefined local variable or method `order_items' for class Orders::AmountCalculator):
  
app/services/orders/amount_calculator.rb:4:in `<class:AmountCalculator>'
app/services/orders/amount_calculator.rb:2:in `<module:Orders>'
app/services/orders/amount_calculator.rb:1:in `<main>'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:40:38 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 27.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 10.5ms | GC: 3.6ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 6.2ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.9ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.0ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (1.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 36.5ms | GC: 2.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 94.3ms | GC: 7.3ms)
  Rendered layout layouts/application.html.erb (Duration: 100.4ms | GC: 7.3ms)
Completed 200 OK in 123ms (Views: 66.8ms | ActiveRecord: 36.5ms (45 queries, 7 cached) | GC: 7.3ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:40:39 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:40:39 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:40:49 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 20.0ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.9ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 8.5ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.3ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 8.6ms | GC: 3.9ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.7ms | GC: 0.7ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 27.3ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 80.1ms | GC: 5.6ms)
  Rendered layout layouts/application.html.erb (Duration: 81.3ms | GC: 5.7ms)
Completed 200 OK in 109ms (Views: 52.0ms | ActiveRecord: 32.2ms (45 queries, 7 cached) | GC: 5.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:40:49 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:40:49 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:40:51 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.9ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 11.4ms | GC: 4.4ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 6.2ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 7.2ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (1.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.8ms | GC: 0.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 52.9ms | GC: 5.6ms)
  Rendered layout layouts/application.html.erb (Duration: 53.3ms | GC: 5.6ms)
Completed 200 OK in 84ms (Views: 36.9ms | ActiveRecord: 16.6ms (45 queries, 7 cached) | GC: 5.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:40:51 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:40:51 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:40:51 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:40:52 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 8.8ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.3ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 10.6ms | GC: 3.6ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (1.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.3ms | GC: 1.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 51.6ms | GC: 5.6ms)
  Rendered layout layouts/application.html.erb (Duration: 52.0ms | GC: 5.6ms)
Completed 200 OK in 83ms (Views: 36.7ms | ActiveRecord: 15.8ms (45 queries, 7 cached) | GC: 5.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:40:52 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:40:52 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:40:52 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:41:58 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 34.0ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.3ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.5ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.8ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.2ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 28.3ms | GC: 3.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 87.3ms | GC: 4.7ms)
  Rendered layout layouts/application.html.erb (Duration: 88.4ms | GC: 4.7ms)
Completed 200 OK in 120ms (Views: 53.7ms | ActiveRecord: 38.2ms (45 queries, 7 cached) | GC: 9.9ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:41:58 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:41:58 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:42:21 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 22.3ms | GC: 0.9ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.6ms | GC: 0.1ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 3.3ms | GC: 0.1ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.7ms | GC: 0.1ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.8ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 22.2ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 68.9ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 73.2ms | GC: 4.5ms)
Completed 200 OK in 96ms (Views: 46.7ms | ActiveRecord: 29.7ms (45 queries, 7 cached) | GC: 4.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:42:21 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:42:21 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:42:28 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 8.3ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.8ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.8ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.9ms | GC: 0.1ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 6.4ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.0ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 51.1ms | GC: 3.9ms)
  Rendered layout layouts/application.html.erb (Duration: 51.8ms | GC: 3.9ms)
Completed 200 OK in 77ms (Views: 37.8ms | ActiveRecord: 14.4ms (45 queries, 7 cached) | GC: 3.9ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:42:28 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:42:28 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:42:28 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:42:44 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 22.6ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.9ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 4.4ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 3.6ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 3.1ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 30.4ms | GC: 4.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 74.0ms | GC: 5.2ms)
  Rendered layout layouts/application.html.erb (Duration: 75.3ms | GC: 5.3ms)
Completed 200 OK in 103ms (Views: 46.2ms | ActiveRecord: 32.6ms (45 queries, 7 cached) | GC: 5.4ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:42:44 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:42:44 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:42:53 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 1[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 6.9ms | GC: 0.8ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957394 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957394[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 7.9ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957395 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957395[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.4ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957396 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957396[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 5.3ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957397 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957397[0m
  ↳ app/views/orders/_order.html.erb:12
  Rendered orders/_order.html.erb (Duration: 9.5ms | GC: 4.1ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (980190963, 980190964) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (893774357, 893774358) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 959957398 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 959957398[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190963 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 980190964 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.6ms | GC: 1.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 51.6ms | GC: 6.3ms)
  Rendered layout layouts/application.html.erb (Duration: 52.0ms | GC: 6.3ms)
Completed 200 OK in 80ms (Views: 36.2ms | ActiveRecord: 16.0ms (45 queries, 7 cached) | GC: 6.3ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:42:53 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:42:53 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:42:53 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 51 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 52 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1015095156 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1015095157 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.0ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 21 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.3ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 31 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 32 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 980190963 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 980190964 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 41 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.6ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 42 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.9ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 43 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.5ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774357 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 893774358 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.9ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 71 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 72 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (7911.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (911.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (38.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (109.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (50.1ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (11.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 21:44:20.891339', '2024-11-21 21:44:20.891341') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'cba8f02dfcfc755a9e6e5619e6808a1e62d5fb2c', '2024-11-21 21:44:20.893883', '2024-11-21 21:44:20.893884') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (7.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 21:44:20.942587', '2024-11-21 21:44:20.942591') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-21 21:44:20.954402' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'cba8f02dfcfc755a9e6e5619e6808a1e62d5fb2c', '2024-11-21 21:44:20.955547', '2024-11-21 21:44:20.955548') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-21 21:44:20.999033', '2024-11-21 21:44:20.999033') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-21 21:44:21.001469', '2024-11-21 21:44:21.001469') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.8ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-21 21:44:21.003307', '2024-11-21 21:44:21.003307') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.9ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 21:44:21.008254', '2024-11-21 21:44:21.008254') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-21 21:44:21.011257', '2024-11-21 21:44:21.011257') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-21 21:44:21.012941', '2024-11-21 21:44:21.012941') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-21 21:44:21.017469', '2024-11-21 21:44:21.017469') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-21 21:44:21.019542', '2024-11-21 21:44:21.019542') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-21 21:44:21.027556', '2024-11-21 21:44:21.027556') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (1.1ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-21 21:44:21.036503', '2024-11-21 21:44:21.036503') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-21 21:44:21.040967', '2024-11-21 21:44:21.040967') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('a29ea526-4f70-45b7-a8ba-ce3039d76aa5', 'OPEN', '2024-11-21 21:44:21.046301', '2024-11-21 21:44:21.046301') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-21 21:44:21.057638', '2024-11-21 21:44:21.057638') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('ca644fd2-8cbb-446c-9e3b-9dd27fe327bc', 'OPEN', '2024-11-21 21:44:21.059493', '2024-11-21 21:44:21.059493') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-21 21:44:21.062353', '2024-11-21 21:44:21.062353') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-21 21:44:21.065011', '2024-11-21 21:44:21.065011') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-21 21:44:21.072843', '2024-11-21 21:44:21.072843') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('d15f8043-dc07-4b80-880e-7f926e1480f6', 'OPEN', '2024-11-21 21:44:21.074781', '2024-11-21 21:44:21.074781') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-21 21:44:21.079157', '2024-11-21 21:44:21.079157') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 21:44:21.082320', '2024-11-21 21:44:21.082320') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 21:44:21.084626', '2024-11-21 21:44:21.084626') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 21:44:21.088230', '2024-11-21 21:44:21.088230') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-21 21:44:21.091554', '2024-11-21 21:44:21.091554') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (1.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-21 21:44:21.098199', '2024-11-21 21:44:21.098199') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.7ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-21 21:44:21.102398', '2024-11-21 21:44:21.102398') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (54.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (36.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (58.9ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (41.9ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (9.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 21:44:23.837416', '2024-11-21 21:44:23.837418') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'cba8f02dfcfc755a9e6e5619e6808a1e62d5fb2c', '2024-11-21 21:44:23.839577', '2024-11-21 21:44:23.839578') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (5.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "oder_offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "oder_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_offer_id" ON "oder_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_oder_offers_on_order_id" ON "oder_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_de7fd5f830"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "oder_offers" ADD CONSTRAINT "fk_rails_d2cb926799"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 21:44:23.877618', '2024-11-21 21:44:23.877618') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-21 21:44:23.884770' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'cba8f02dfcfc755a9e6e5619e6808a1e62d5fb2c', '2024-11-21 21:44:23.885682', '2024-11-21 21:44:23.885683') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (0.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.0ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-21 21:44:23.924705', '2024-11-21 21:44:23.924705') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-21 21:44:23.927375', '2024-11-21 21:44:23.927375') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-21 21:44:23.929400', '2024-11-21 21:44:23.929400') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.0ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 21:44:23.936482', '2024-11-21 21:44:23.936482') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-21 21:44:23.938993', '2024-11-21 21:44:23.938993') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-21 21:44:23.940777', '2024-11-21 21:44:23.940777') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.8ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-21 21:44:23.944693', '2024-11-21 21:44:23.944693') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-21 21:44:23.946535', '2024-11-21 21:44:23.946535') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-21 21:44:23.953146', '2024-11-21 21:44:23.953146') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.8ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-21 21:44:23.961133', '2024-11-21 21:44:23.961133') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-21 21:44:23.964879', '2024-11-21 21:44:23.964879') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('5c28931e-65c2-4441-94dd-8f121433e22b', 'OPEN', '2024-11-21 21:44:23.972236', '2024-11-21 21:44:23.972236') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-21 21:44:23.981371', '2024-11-21 21:44:23.981371') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('d0b81932-62c9-41aa-99ca-6650b23bdba5', 'OPEN', '2024-11-21 21:44:23.982851', '2024-11-21 21:44:23.982851') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-21 21:44:23.985978', '2024-11-21 21:44:23.985978') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-21 21:44:23.988738', '2024-11-21 21:44:23.988738') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-21 21:44:23.994763', '2024-11-21 21:44:23.994763') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('cb113149-6463-47d1-a944-77aed8a2fb5c', 'OPEN', '2024-11-21 21:44:23.996099', '2024-11-21 21:44:23.996099') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (1.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-21 21:44:23.999584', '2024-11-21 21:44:23.999584') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 21:44:24.003132', '2024-11-21 21:44:24.003132') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 21:44:24.005524', '2024-11-21 21:44:24.005524') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 21:44:24.007842', '2024-11-21 21:44:24.007842') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-21 21:44:24.010075', '2024-11-21 21:44:24.010075') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.3ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-21 21:44:24.014734', '2024-11-21 21:44:24.014734') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.1ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 2, '2024-11-21 21:44:24.016922', '2024-11-21 21:44:24.016922') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Load (1.3ms)[0m  [1m[34mSELECT "oder_offers".* FROM "oder_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.9ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Destroy (0.6ms)[0m  [1m[31mDELETE FROM "oder_offers" WHERE "oder_offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.2ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (1.0ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.7ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.2ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.6ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (1.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.7ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.9ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-21 21:44:35.028730', '2024-11-21 21:44:35.028730') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-21 21:44:35.030829', '2024-11-21 21:44:35.030829') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-21 21:44:35.032320', '2024-11-21 21:44:35.032320') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.8ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 21:44:35.033861', '2024-11-21 21:44:35.033861') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (4.1ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-21 21:44:35.035550', '2024-11-21 21:44:35.035550') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-21 21:44:35.040955', '2024-11-21 21:44:35.040955') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.6ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-21 21:44:35.042540', '2024-11-21 21:44:35.042540') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (1.0ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-21 21:44:35.043915', '2024-11-21 21:44:35.043915') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.5ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-21 21:44:35.045849', '2024-11-21 21:44:35.045849') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-21 21:44:35.047159', '2024-11-21 21:44:35.047159') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.6ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-21 21:44:35.048481', '2024-11-21 21:44:35.048481') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('37009a90-d568-4917-bbc3-83789e3ad326', 'OPEN', '2024-11-21 21:44:35.050048', '2024-11-21 21:44:35.050048') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (3.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-21 21:44:35.055604', '2024-11-21 21:44:35.055604') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.4ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('e24543da-efb8-431c-842b-ba177c989105', 'OPEN', '2024-11-21 21:44:35.060596', '2024-11-21 21:44:35.060596') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-21 21:44:35.064399', '2024-11-21 21:44:35.064399') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-21 21:44:35.067460', '2024-11-21 21:44:35.067460') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (3.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-21 21:44:35.073081', '2024-11-21 21:44:35.073081') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('135b83a7-d663-4a27-acfd-0229b0d231be', 'OPEN', '2024-11-21 21:44:35.074636', '2024-11-21 21:44:35.074636') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-21 21:44:35.077779', '2024-11-21 21:44:35.077779') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-21 21:44:35.080467', '2024-11-21 21:44:35.080467') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-21 21:44:35.083210', '2024-11-21 21:44:35.083210') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-21 21:44:35.085533', '2024-11-21 21:44:35.085533') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-21 21:44:35.087647', '2024-11-21 21:44:35.087647') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.5ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-21 21:44:35.091430', '2024-11-21 21:44:35.091430') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOderOffer Create (0.5ms)[0m  [1m[32mINSERT INTO "oder_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-21 21:44:35.094151', '2024-11-21 21:44:35.094151') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:44:40 +0500
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:44:40 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:44:45 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.0ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (1.4ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 68.3ms | GC: 20.5ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 10.5ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  Rendered orders/_order.html.erb (Duration: 14699.9ms | GC: 34.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14792.2ms | GC: 55.1ms)
  Rendered layout layouts/application.html.erb (Duration: 14792.5ms | GC: 55.1ms)
Completed 500 Internal Server Error in 14870ms (ActiveRecord: 38.4ms (40 queries, 10 cached) | GC: 64.6ms)


  
ActionView::Template::Error (undefined method `pizza_sizes' for an instance of OrderItem)
Caused by: NoMethodError (undefined method `pizza_sizes' for an instance of OrderItem)

Information for: ActionView::Template::Error (undefined method `pizza_sizes' for an instance of OrderItem):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:35:in `block in fetch_promotion_items'
app/services/orders/amount_calculator.rb:35:in `fetch_promotion_items'
app/services/orders/amount_calculator.rb:27:in `block in calculate_promotion_amount'
app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:13:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `pizza_sizes' for an instance of OrderItem):
  
app/services/orders/amount_calculator.rb:35:in `block in fetch_promotion_items'
app/services/orders/amount_calculator.rb:35:in `fetch_promotion_items'
app/services/orders/amount_calculator.rb:27:in `block in calculate_promotion_amount'
app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:13:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:45:00 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:45:16 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 60.8ms | GC: 19.0ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.2ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (1.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mDiscount Sum (2.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:53:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 4309.6ms | GC: 0.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 4390.6ms | GC: 24.9ms)
  Rendered layout layouts/application.html.erb (Duration: 4405.0ms | GC: 30.5ms)
Completed 200 OK in 4436ms (Views: 4374.7ms | ActiveRecord: 35.3ms (53 queries, 20 cached) | GC: 34.7ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:45:20 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:45:20 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:46:02 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 43.3ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 8.4ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.1ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 21.6ms | GC: 4.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 79.5ms | GC: 5.2ms)
  Rendered layout layouts/application.html.erb (Duration: 81.0ms | GC: 5.5ms)
Completed 200 OK in 112ms (Views: 50.6ms | ActiveRecord: 33.0ms (53 queries, 20 cached) | GC: 5.7ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:46:02 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:46:02 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:46:05 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.3ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.3ms | GC: 0.9ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Sum (0.2ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mIngredient Sum (0.3ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Sum (0.0ms)[0m  [1m[34mSELECT SUM("ingredients"."multiplier") FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.8ms | GC: 0.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 46.0ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 46.5ms | GC: 1.9ms)
Completed 200 OK in 77ms (Views: 34.0ms | ActiveRecord: 12.9ms (53 queries, 20 cached) | GC: 1.9ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:46:05 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:46:05 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:46:05 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:47:24 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.9ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 42.6ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.0ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.6ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 79.0ms | GC: 2.0ms)
  Rendered layout layouts/application.html.erb (Duration: 80.3ms | GC: 2.0ms)
Completed 200 OK in 113ms (Views: 47.5ms | ActiveRecord: 35.4ms (53 queries, 20 cached) | GC: 2.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:47:25 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:47:25 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:47:26 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.9ms | GC: 4.4ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.3ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.4ms | GC: 0.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 50.1ms | GC: 6.3ms)
  Rendered layout layouts/application.html.erb (Duration: 50.5ms | GC: 6.3ms)
Completed 200 OK in 81ms (Views: 36.5ms | ActiveRecord: 14.2ms (53 queries, 20 cached) | GC: 6.3ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:47:26 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:47:26 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:47:26 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:47:26 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.4ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.9ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 40.6ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 41.0ms | GC: 0.5ms)
Completed 200 OK in 70ms (Views: 29.0ms | ActiveRecord: 12.3ms (53 queries, 20 cached) | GC: 0.5ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:47:27 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:47:27 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:47:27 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:48:43 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  Rendered orders/_order.html.erb (Duration: 11.5ms | GC: 0.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 17.6ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | GC: 0.5ms)
Completed 500 Internal Server Error in 43ms (ActiveRecord: 11.1ms (3 queries, 0 cached) | GC: 0.8ms)


  
SyntaxError (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/models/order_item.rb:32: syntax error, unexpected end-of-input, expecting `end' or dummy end):
  
app/models/order_item.rb:32: syntax error, unexpected end-of-input, expecting `end' or dummy end
app/services/orders/amount_calculator.rb:8:in `initialize'
app/models/order.rb:12:in `new'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:48:53 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  Rendered orders/_order.html.erb (Duration: 36.3ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 42.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 42.8ms | GC: 0.0ms)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 20.0ms (7 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method `positive?' for an instance of Array)
Caused by: NoMethodError (undefined method `positive?' for an instance of Array)

Information for: ActionView::Template::Error (undefined method `positive?' for an instance of Array):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order_item.rb:12:in `amount'
app/services/orders/amount_calculator.rb:21:in `block in calculate_base_amount'
app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `positive?' for an instance of Array):
  
app/models/order_item.rb:12:in `amount'
app/services/orders/amount_calculator.rb:21:in `block in calculate_base_amount'
app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:49:01 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 46.1ms | GC: 2.0ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (1.9ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.8ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `add_on_multiplier'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 20.4ms | GC: 3.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 96.1ms | GC: 10.2ms)
  Rendered layout layouts/application.html.erb (Duration: 98.4ms | GC: 10.6ms)
Completed 200 OK in 124ms (Views: 66.5ms | ActiveRecord: 34.2ms (50 queries, 17 cached) | GC: 10.6ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:49:01 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:49:01 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:50:58 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 53.7ms | GC: 6.6ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.7ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:26:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 18.7ms | GC: 3.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 93.8ms | GC: 10.2ms)
  Rendered layout layouts/application.html.erb (Duration: 95.1ms | GC: 10.2ms)
Completed 200 OK in 123ms (Views: 59.5ms | ActiveRecord: 40.9ms (53 queries, 20 cached) | GC: 10.2ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:50:58 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:50:58 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:51:54 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 43.8ms | GC: 4.6ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.5ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.3ms | GC: 0.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 75.8ms | GC: 5.5ms)
  Rendered layout layouts/application.html.erb (Duration: 76.9ms | GC: 5.5ms)
Completed 200 OK in 101ms (Views: 48.2ms | ActiveRecord: 31.6ms (46 queries, 20 cached) | GC: 5.5ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:51:54 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:51:54 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:53:16 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  Rendered orders/_order.html.erb (Duration: 36.1ms | GC: 3.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 41.8ms | GC: 3.6ms)
  Rendered layout layouts/application.html.erb (Duration: 41.9ms | GC: 3.6ms)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 19.6ms (7 queries, 0 cached) | GC: 4.3ms)


  
ActionView::Template::Error (undefined local variable or method `promo_amount' for an instance of Orders::AmountCalculator)
Caused by: NameError (undefined local variable or method `promo_amount' for an instance of Orders::AmountCalculator)

Information for: ActionView::Template::Error (undefined local variable or method `promo_amount' for an instance of Orders::AmountCalculator):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:13:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NameError (undefined local variable or method `promo_amount' for an instance of Orders::AmountCalculator):
  
app/services/orders/amount_calculator.rb:13:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:53:47 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 41.5ms | GC: 1.9ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.2ms | GC: 1.2ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.6ms | GC: 3.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 86.6ms | GC: 8.3ms)
  Rendered layout layouts/application.html.erb (Duration: 87.7ms | GC: 8.3ms)
Completed 200 OK in 111ms (Views: 55.9ms | ActiveRecord: 34.1ms (53 queries, 20 cached) | GC: 8.3ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:53:47 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:53:47 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:54:00 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 42.0ms | GC: 4.7ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.2ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 22.6ms | GC: 4.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 85.7ms | GC: 9.3ms)
  Rendered layout layouts/application.html.erb (Duration: 87.0ms | GC: 9.5ms)
Completed 200 OK in 113ms (Views: 60.3ms | ActiveRecord: 29.5ms (53 queries, 20 cached) | GC: 9.5ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:54:01 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:54:01 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:54:02 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 20.0ms | GC: 6.3ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (1.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 46.4ms | GC: 27.8ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 20.1ms | GC: 3.4ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 92.3ms | GC: 38.7ms)
  Rendered layout layouts/application.html.erb (Duration: 92.7ms | GC: 38.7ms)
Completed 200 OK in 124ms (Views: 76.7ms | ActiveRecord: 16.3ms (53 queries, 20 cached) | GC: 38.7ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:54:02 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:54:02 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:54:02 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:54:02 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.9ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.0ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.6ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 43.6ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 47.8ms | GC: 4.7ms)
Completed 200 OK in 78ms (Views: 34.9ms | ActiveRecord: 13.2ms (53 queries, 20 cached) | GC: 4.7ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:54:03 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:54:03 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:54:03 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:55:36 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `discounted_amount'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 52.4ms | GC: 4.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `discounted_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.3ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `discounted_amount'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `discounted_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.5ms | GC: 3.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 87.5ms | GC: 7.5ms)
  Rendered layout layouts/application.html.erb (Duration: 89.6ms | GC: 7.5ms)
Completed 200 OK in 118ms (Views: 55.9ms | ActiveRecord: 37.6ms (53 queries, 20 cached) | GC: 7.9ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:55:37 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:55:37 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:55:37 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `discounted_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.5ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `discounted_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.3ms | GC: 1.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `discounted_amount'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `discounted_amount'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.3ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 39.4ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 39.8ms | GC: 1.2ms)
Completed 200 OK in 70ms (Views: 29.4ms | ActiveRecord: 10.7ms (53 queries, 20 cached) | GC: 1.5ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:55:37 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:55:37 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:55:37 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:57:58 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 71.7ms | GC: 6.0ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 25.5ms | GC: 12.3ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mDiscount Sum (0.2ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 34.0ms | GC: 17.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 156.4ms | GC: 36.2ms)
  Rendered layout layouts/application.html.erb (Duration: 157.8ms | GC: 36.4ms)
Completed 200 OK in 211ms (Views: 122.4ms | ActiveRecord: 43.4ms (53 queries, 20 cached) | GC: 36.4ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:57:58 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:57:58 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:58:07 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 50.8ms | GC: 5.4ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 17.1ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:48:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:50:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 23.9ms | GC: 3.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 98.3ms | GC: 9.6ms)
  Rendered layout layouts/application.html.erb (Duration: 99.7ms | GC: 9.6ms)
Completed 200 OK in 127ms (Views: 64.0ms | ActiveRecord: 38.8ms (53 queries, 20 cached) | GC: 9.6ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:58:07 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:58:07 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:59:16 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 36.2ms | GC: 1.6ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.1ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.0ms | GC: 2.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 76.7ms | GC: 9.6ms)
  Rendered layout layouts/application.html.erb (Duration: 77.8ms | GC: 9.6ms)
Completed 200 OK in 108ms (Views: 51.4ms | ActiveRecord: 31.8ms (49 queries, 20 cached) | GC: 9.6ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:59:16 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:59:16 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:59:17 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 9.2ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.2ms | GC: 0.6ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.6ms | GC: 3.7ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 41.3ms | GC: 4.7ms)
  Rendered layout layouts/application.html.erb (Duration: 41.9ms | GC: 4.7ms)
Completed 200 OK in 73ms (Views: 31.4ms | ActiveRecord: 10.8ms (49 queries, 20 cached) | GC: 4.7ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:59:17 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:59:17 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:59:17 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:59:18 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 12.3ms | GC: 0.3ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.7ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.0ms | GC: 0.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 43.7ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 44.1ms | GC: 1.2ms)
Completed 200 OK in 74ms (Views: 31.3ms | ActiveRecord: 13.1ms (49 queries, 20 cached) | GC: 1.2ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:59:18 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:59:18 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 02:59:18 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 02:59:41 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
Started GET "/cable" for 127.0.0.1 at 2024-11-22 02:59:48 +0500
  [1m[36mOrderItem Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ (pry):6:in `total_amount'
  [1m[36mCACHE OrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 72869.0ms | GC: 140.8ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /* loading for pp */ LIMIT 11 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:16:in `total_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 18466.3ms | GC: 11.0ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mOrderItem Load (0.7ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:16:in `total_amount'
  [1m[36mPromotion Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ (pry):15:in `total_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 184767.1ms | GC: 175.5ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 276110.4ms | GC: 327.7ms)
  Rendered layout layouts/application.html.erb (Duration: 276113.6ms | GC: 327.7ms)
Completed 200 OK in 276139ms (Views: 276076.1ms | ActiveRecord: 40.1ms (53 queries, 20 cached) | GC: 327.7ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
WebSocket error occurred: Broken pipe
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
WebSocket error occurred: Broken pipe
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:04:17 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:04:26 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 43.3ms | GC: 3.5ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.5ms | GC: 0.2ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  Rendered orders/_order.html.erb (Duration: 44.0ms | GC: 29.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 107.6ms | GC: 33.1ms)
  Rendered layout layouts/application.html.erb (Duration: 107.7ms | GC: 33.1ms)
Completed 500 Internal Server Error in 133ms (ActiveRecord: 32.6ms (38 queries, 10 cached) | GC: 33.1ms)


  
ActionView::Template::Error (undefined method `size_price_multiplier' for an instance of OrderItem)
Caused by: NoMethodError (undefined method `size_price_multiplier' for an instance of OrderItem)

Information for: ActionView::Template::Error (undefined method `size_price_multiplier' for an instance of OrderItem):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discounts.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:44:in `calculate_promotion_for_items'
app/services/orders/amount_calculator.rb:30:in `block in calculate_promotion_amount'
app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:13:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `size_price_multiplier' for an instance of OrderItem):
  
app/services/orders/amount_calculator.rb:44:in `calculate_promotion_for_items'
app/services/orders/amount_calculator.rb:30:in `block in calculate_promotion_amount'
app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
app/services/orders/amount_calculator.rb:13:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:05:15 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 45.0ms | GC: 2.2ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.0ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.6ms | GC: 3.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 81.4ms | GC: 5.7ms)
  Rendered layout layouts/application.html.erb (Duration: 82.5ms | GC: 5.7ms)
Completed 200 OK in 107ms (Views: 51.3ms | ActiveRecord: 33.3ms (49 queries, 20 cached) | GC: 5.9ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:05:15 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:05:15 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:05:29 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 2903.9ms | GC: 17.1ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.6ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (1.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.8ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 1430.9ms | GC: 3.2ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (1.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:05:37 +0500
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 76419.3ms | GC: 20.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 80762.3ms | GC: 41.4ms)
  Rendered layout layouts/application.html.erb (Duration: 80764.2ms | GC: 41.6ms)
Completed 200 OK in 80790ms (Views: 80731.1ms | ActiveRecord: 36.2ms (49 queries, 20 cached) | GC: 41.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:06:50 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:06:50 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
WebSocket error occurred: Broken pipe
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:06:50 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:06:50 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:06:52 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 47.5ms | GC: 5.2ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 13.4ms | GC: 1.4ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mOrderItem Load (1.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /* loading for pp */ LIMIT 11 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:45:in `calculate_promotion_for_items'
  [1m[36mCACHE OrderItem Load (0.1ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (1.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 180265.8ms | GC: 66.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 180331.7ms | GC: 72.7ms)
  Rendered layout layouts/application.html.erb (Duration: 180335.3ms | GC: 72.7ms)
Completed 200 OK in 180367ms (Views: 180308.0ms | ActiveRecord: 29.8ms (50 queries, 20 cached) | GC: 72.9ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:09:52 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:09:52 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:09:52 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:09:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 54.2ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 21.7ms | GC: 3.7ms)
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.1ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.7ms | GC: 1.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 99.4ms | GC: 4.8ms)
  Rendered layout layouts/application.html.erb (Duration: 100.6ms | GC: 5.0ms)
Completed 200 OK in 133ms (Views: 59.8ms | ActiveRecord: 43.3ms (49 queries, 20 cached) | GC: 5.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:09:56 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:09:56 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:09:56 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:10:09 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 48.1ms | GC: 5.9ms)
  [1m[36mPromotion Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.7ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:23:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:28:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.3ms | GC: 0.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 86.2ms | GC: 6.8ms)
  Rendered layout layouts/application.html.erb (Duration: 87.5ms | GC: 6.8ms)
Completed 200 OK in 117ms (Views: 57.3ms | ActiveRecord: 32.5ms (53 queries, 20 cached) | GC: 6.8ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:10:10 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:10:10 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:27:50 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  Rendered orders/_order.html.erb (Duration: 9.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 14.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | GC: 0.0ms)
Completed 500 Internal Server Error in 147ms (ActiveRecord: 11.1ms (2 queries, 0 cached) | GC: 0.3ms)


  
ActionView::Template::Error (Cannot have a has_one :through association 'Order#discount' where the :through association 'Order#oder_offers' is a collection. Specify a has_one or belongs_to association in the :through option instead.)
Caused by: ActiveRecord::HasOneThroughCantAssociateThroughCollection (Cannot have a has_one :through association 'Order#discount' where the :through association 'Order#oder_offers' is a collection. Specify a has_one or belongs_to association in the :through option instead.)

Information for: ActionView::Template::Error (Cannot have a has_one :through association 'Order#discount' where the :through association 'Order#oder_offers' is a collection. Specify a has_one or belongs_to association in the :through option instead.):
    4:       <p>Order ID: <%= order.uuid %></p>
    5:       <p>Created At: <%= order.created_at %></p>
    6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
    7:       <p>Discounts: <%= "#{order.discount.code.presence || '-'}" %></p>
    8:       <p>Total price: <%= order.amount %></p>
    9:     </div>
   10:     <div class="order-right">
  
app/views/orders/_order.html.erb:7
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: ActiveRecord::HasOneThroughCantAssociateThroughCollection (Cannot have a has_one :through association 'Order#discount' where the :through association 'Order#oder_offers' is a collection. Specify a has_one or belongs_to association in the :through option instead.):
  
app/views/orders/_order.html.erb:7
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:29:41 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  Rendered orders/_order.html.erb (Duration: 12.1ms | GC: 2.1ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 24.0ms | GC: 4.6ms)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | GC: 4.6ms)
Completed 500 Internal Server Error in 57ms (ActiveRecord: 17.1ms (2 queries, 0 cached) | GC: 9.0ms)


  
ActionView::Template::Error (undefined method `code' for an instance of ActiveRecord::Associations::CollectionProxy)
Caused by: NoMethodError (undefined method `code' for an instance of ActiveRecord::Associations::CollectionProxy)

Information for: ActionView::Template::Error (undefined method `code' for an instance of ActiveRecord::Associations::CollectionProxy):
    4:       <p>Order ID: <%= order.uuid %></p>
    5:       <p>Created At: <%= order.created_at %></p>
    6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
    7:       <p>Discounts: <%= "#{order.discount.code.presence || '-'}" %></p>
    8:       <p>Total price: <%= order.amount %></p>
    9:     </div>
   10:     <div class="order-right">
  
app/views/orders/_order.html.erb:7
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `code' for an instance of ActiveRecord::Associations::CollectionProxy):
  
app/views/orders/_order.html.erb:7
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:29:54 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  Rendered orders/_order.html.erb (Duration: 44.0ms | GC: 1.8ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 49.9ms | GC: 2.6ms)
  Rendered layout layouts/application.html.erb (Duration: 50.0ms | GC: 2.6ms)
Completed 500 Internal Server Error in 78ms (ActiveRecord: 23.1ms (7 queries, 0 cached) | GC: 5.4ms)


  
ActionView::Template::Error (undefined local variable or method `pizza_size_amount' for an instance of OrderItem)
Caused by: NameError (undefined local variable or method `pizza_size_amount' for an instance of OrderItem)

Information for: ActionView::Template::Error (undefined local variable or method `pizza_size_amount' for an instance of OrderItem):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discount.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/models/order_item.rb:12:in `amount'
app/services/orders/amount_calculator.rb:21:in `block in calculate_base_amount'
app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NameError (undefined local variable or method `pizza_size_amount' for an instance of OrderItem):
  
app/models/order_item.rb:12:in `amount'
app/services/orders/amount_calculator.rb:21:in `block in calculate_base_amount'
app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
app/services/orders/amount_calculator.rb:12:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:30:33 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.1ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  Rendered orders/_order.html.erb (Duration: 44.1ms | GC: 5.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 49.8ms | GC: 5.0ms)
  Rendered layout layouts/application.html.erb (Duration: 49.9ms | GC: 5.0ms)
Completed 500 Internal Server Error in 72ms (ActiveRecord: 24.2ms (8 queries, 0 cached) | GC: 5.0ms)


  
ActionView::Template::Error (undefined method `discounts' for an instance of Order)
Caused by: NoMethodError (undefined method `discounts' for an instance of Order)

Information for: ActionView::Template::Error (undefined method `discounts' for an instance of Order):
     5:       <p>Created At: <%= order.created_at %></p>
     6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
     7:       <p>Discounts: <%= "#{order.discount.pluck(:code).join(', ').presence || '-'}" %></p>
     8:       <p>Total price: <%= order.amount %></p>
     9:     </div>
    10:     <div class="order-right">
    11:       <ul>
  
app/services/orders/amount_calculator.rb:47:in `apply_discounts'
app/services/orders/amount_calculator.rb:14:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `discounts' for an instance of Order):
  
app/services/orders/amount_calculator.rb:47:in `apply_discounts'
app/services/orders/amount_calculator.rb:14:in `total_amount'
app/models/order.rb:12:in `amount'
app/views/orders/_order.html.erb:8
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:30:56 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  Rendered orders/_order.html.erb (Duration: 9.8ms | GC: 0.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 16.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | GC: 0.0ms)
Completed 500 Internal Server Error in 44ms (ActiveRecord: 11.2ms (2 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method `discount' for an instance of Order)
Caused by: NoMethodError (undefined method `discount' for an instance of Order)

Information for: ActionView::Template::Error (undefined method `discount' for an instance of Order):
    4:       <p>Order ID: <%= order.uuid %></p>
    5:       <p>Created At: <%= order.created_at %></p>
    6:       <p>Promotions: <%= "#{order.promotions.pluck(:code).join(', ').presence || '-'}" %></p>
    7:       <p>Discounts: <%= "#{order.discount.pluck(:code).join(', ').presence || '-'}" %></p>
    8:       <p>Total price: <%= order.amount %></p>
    9:     </div>
   10:     <div class="order-right">
  
app/views/orders/_order.html.erb:7
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8

Information for cause: NoMethodError (undefined method `discount' for an instance of Order):
  
app/views/orders/_order.html.erb:7
app/views/orders/_order.html.erb:1
app/views/orders/index.html.erb:10
app/views/orders/index.html.erb:8
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:31:05 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 45.5ms | GC: 3.2ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.6ms | GC: 3.5ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.8ms | GC: 1.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 89.5ms | GC: 7.9ms)
  Rendered layout layouts/application.html.erb (Duration: 90.7ms | GC: 8.0ms)
Completed 200 OK in 116ms (Views: 59.5ms | ActiveRecord: 33.2ms (53 queries, 20 cached) | GC: 8.1ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:31:06 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:06 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/4" for 127.0.0.1 at 2024-11-22 03:31:14 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 4 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:25:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mOrder Update (1.2ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-21 22:31:14.114447' WHERE "orders"."id" = 4 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
Completed 200 OK in 36ms (Views: 0.1ms | ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:17 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:31:17 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:17 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:18 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:31:18 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:18 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:31:19 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 19.6ms | GC: 4.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 15.6ms | GC: 1.6ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 37.6ms | GC: 5.7ms)
  Rendered layout layouts/application.html.erb (Duration: 38.1ms | GC: 5.7ms)
Completed 200 OK in 70ms (Views: 29.0ms | ActiveRecord: 9.3ms (42 queries, 16 cached) | GC: 5.7ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:20 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:31:20 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:20 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/5" for 127.0.0.1 at 2024-11-22 03:31:35 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"5"}
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 5 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:25:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mOrder Update (1.3ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-21 22:31:35.997392' WHERE "orders"."id" = 5 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
Completed 200 OK in 52ms (Views: 0.1ms | ActiveRecord: 3.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:31:41 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.6ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.4ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 21.7ms | GC: 2.0ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 24.6ms | GC: 2.0ms)
  Rendered layout layouts/application.html.erb (Duration: 25.3ms | GC: 2.0ms)
Completed 200 OK in 54ms (Views: 19.6ms | ActiveRecord: 6.1ms (24 queries, 10 cached) | GC: 2.0ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:41 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:31:41 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:41 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 03:31:42 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (0.5ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "oder_offers" ON "offers"."id" = "oder_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "oder_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 27.7ms | GC: 8.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 29.3ms | GC: 8.3ms)
  Rendered layout layouts/application.html.erb (Duration: 29.6ms | GC: 8.3ms)
Completed 200 OK in 60ms (Views: 24.0ms | ActiveRecord: 5.9ms (24 queries, 10 cached) | GC: 8.3ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:42 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 03:31:42 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 03:31:42 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (95.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (35.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (12.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (8.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (215.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (75.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:42:45.902340', '2024-11-21 22:42:45.902342') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'da39a3ee5e6b4b0d3255bfef95601890afd80709', '2024-11-21 22:42:45.903740', '2024-11-21 22:42:45.903741') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to CreateOffers (20241119125642)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125642') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrders (20241119125857)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125857') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzas (20241119131450)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131450') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateIngredients (20241119131502)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131502') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzaSizes (20241119132025)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119132025') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOderOffers (20241119135237)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "order_offer" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_eaf1c35815"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_7f7dba1181"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_order_id" ON "order_offer" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_offer_id" ON "order_offer" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119135237') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119161418') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (2.0ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (1.7ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (76.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (33.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (120.4ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (10.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_offer" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "order_offer" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_offer_id" ON "order_offer" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_order_id" ON "order_offer" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_7f7dba1181"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_eaf1c35815"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:46:16.925611', '2024-11-21 22:46:16.925612') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '1cc63f9c45356f6bcc4bed58d4329a476be716d9', '2024-11-21 22:46:16.927401', '2024-11-21 22:46:16.927402') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (6.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_offer" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "order_offer" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_offer_id" ON "order_offer" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_order_id" ON "order_offer" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_7f7dba1181"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_eaf1c35815"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:46:16.965878', '2024-11-21 22:46:16.965879') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-21 22:46:16.967027' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '1cc63f9c45356f6bcc4bed58d4329a476be716d9', '2024-11-21 22:46:16.967896', '2024-11-21 22:46:16.967897') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (0.3ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (228.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (35.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (58.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (49.6ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (9.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_offer" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "order_offer" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_offer_id" ON "order_offer" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_order_id" ON "order_offer" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_7f7dba1181"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_eaf1c35815"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:46:26.163839', '2024-11-21 22:46:26.163840') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '1cc63f9c45356f6bcc4bed58d4329a476be716d9', '2024-11-21 22:46:26.166263', '2024-11-21 22:46:26.166263') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (7.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "ingredients" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "offers" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_items" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "order_offer" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "order_offer" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_offer_id" ON "order_offer" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_order_id" ON "order_offer" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizza_sizes" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "pizzas" CASCADE /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "order_items" ADD CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_7f7dba1181"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "order_offer" ADD CONSTRAINT "fk_rails_eaf1c35815"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
 /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20241119161418) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20241119135237),
(20241119132025),
(20241119131502),
(20241119131450),
(20241119125857),
(20241119125642); /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:46:26.217197', '2024-11-21 22:46:26.217199') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = 'test', "updated_at" = '2024-11-21 22:46:26.218570' WHERE "ar_internal_metadata"."key" = 'environment' /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '1cc63f9c45356f6bcc4bed58d4329a476be716d9', '2024-11-21 22:46:26.219503', '2024-11-21 22:46:26.219504') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (0.6ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (63.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (27.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (11.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (7.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (155.2ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (59.3ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:46:59.343002', '2024-11-21 22:46:59.343007') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'da39a3ee5e6b4b0d3255bfef95601890afd80709', '2024-11-21 22:46:59.345497', '2024-11-21 22:46:59.345499') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2024-11-21 22:46:59.359277', '2024-11-21 22:46:59.359280') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'da39a3ee5e6b4b0d3255bfef95601890afd80709', '2024-11-21 22:46:59.361388', '2024-11-21 22:46:59.361390') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to CreateOffers (20241119125642)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125642') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrders (20241119125857)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125857') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzas (20241119131450)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131450') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateIngredients (20241119131502)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131502') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzaSizes (20241119132025)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119132025') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderOffers (20241119135237)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "order_offer" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_eaf1c35815"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_7f7dba1181"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_order_id" ON "order_offer" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_offer_on_offer_id" ON "order_offer" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119135237') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119161418') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrderOffer Count (31.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Count (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (69.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (26.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (13.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (10.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "evermood_challenge_test" /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (142.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='EvermoodChallenge'*/[0m
  [1m[35m (51.0ms)[0m  [1m[35mCREATE DATABASE "evermood_challenge_test" ENCODING = 'utf8' /*application='EvermoodChallenge'*/[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-11-21 22:50:21.814713', '2024-11-21 22:50:21.814740') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'da39a3ee5e6b4b0d3255bfef95601890afd80709', '2024-11-21 22:50:21.816725', '2024-11-21 22:50:21.816727') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2024-11-21 22:50:21.829356', '2024-11-21 22:50:21.829361') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'schema_sha1' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'da39a3ee5e6b4b0d3255bfef95601890afd80709', '2024-11-21 22:50:21.831200', '2024-11-21 22:50:21.831203') RETURNING "key" /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
Migrating to CreateOffers (20241119125642)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "offers" ("id" bigserial primary key, "code" character varying, "type" character varying, "discount" integer, "target" character varying, "target_size" character varying, "from" integer, "to" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125642') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrders (20241119125857)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "uuid" text NOT NULL, "state" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119125857') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzas (20241119131450)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "pizzas" ("id" bigserial primary key, "name" character varying, "price" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131450') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateIngredients (20241119131502)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "ingredients" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119131502') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreatePizzaSizes (20241119132025)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "pizza_sizes" ("id" bigserial primary key, "name" character varying, "multiplier" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119132025') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderOffers (20241119135237)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "order_offers" ("id" bigserial primary key, "order_id" bigint NOT NULL, "offer_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_294b8254cf"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_562d653584"
FOREIGN KEY ("offer_id")
  REFERENCES "offers" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_order_offers_on_order_id" ON "order_offers" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_order_offers_on_offer_id" ON "order_offers" ("offer_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119135237') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
Migrating to CreateOrderItems (20241119161418)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "order_items" ("id" bigserial primary key, "order_id" bigint NOT NULL, "pizza_id" bigint NOT NULL, "pizza_size_id" bigint NOT NULL, "add" text[], "remove" text[], "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e3cb28f071"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
, CONSTRAINT "fk_rails_d28b17c368"
FOREIGN KEY ("pizza_id")
  REFERENCES "pizzas" ("id")
, CONSTRAINT "fk_rails_749da3fb67"
FOREIGN KEY ("pizza_size_id")
  REFERENCES "pizza_sizes" ("id")
) /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_order_id" ON "order_items" ("order_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_id" ON "order_items" ("pizza_id") /*application='EvermoodChallenge'*/[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_order_items_on_pizza_size_id" ON "order_items" ("pizza_size_id") /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241119161418') RETURNING "version" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(5343263981261228505) /*application='EvermoodChallenge'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (0.8ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (0.8ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.5ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.5ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-21 22:50:28.035967', '2024-11-21 22:50:28.035967') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-21 22:50:28.038755', '2024-11-21 22:50:28.038755') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-21 22:50:28.040237', '2024-11-21 22:50:28.040237') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (1.3ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 22:50:28.046476', '2024-11-21 22:50:28.046476') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-21 22:50:28.048752', '2024-11-21 22:50:28.048752') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-21 22:50:28.050332', '2024-11-21 22:50:28.050332') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-21 22:50:28.057348', '2024-11-21 22:50:28.057348') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-21 22:50:28.059022', '2024-11-21 22:50:28.059022') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-21 22:50:28.060582', '2024-11-21 22:50:28.060582') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-21 22:50:28.073026', '2024-11-21 22:50:28.073026') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (1.0ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-21 22:50:28.076463', '2024-11-21 22:50:28.076463') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (1.2ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('f5c859e4-94ff-4ae5-996e-53db002a05b3', 'OPEN', '2024-11-21 22:50:28.082884', '2024-11-21 22:50:28.082884') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (1.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (1, 3, 3, NULL, NULL, '2024-11-21 22:50:28.095513', '2024-11-21 22:50:28.095513') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('108bde89-1998-4a63-b2af-3b4a25eb057b', 'OPEN', '2024-11-21 22:50:28.098311', '2024-11-21 22:50:28.098311') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 3, '{Onions,Cheese,Olives}', NULL, '2024-11-21 22:50:28.100937', '2024-11-21 22:50:28.100937') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 3, 2, NULL, '{Onions,Olives}', '2024-11-21 22:50:28.103524', '2024-11-21 22:50:28.103524') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 1 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (2, 1, 1, NULL, NULL, '2024-11-21 22:50:28.106099', '2024-11-21 22:50:28.106099') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('b8da1092-5bd2-4928-9a28-697de97bed1a', 'OPEN', '2024-11-21 22:50:28.107165', '2024-11-21 22:50:28.107165') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 2, '{Onions}', '{Cheese}', '2024-11-21 22:50:28.109666', '2024-11-21 22:50:28.109666') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 22:50:28.112374', '2024-11-21 22:50:28.112374') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 22:50:28.114813', '2024-11-21 22:50:28.114813') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{}', '{}', '2024-11-21 22:50:28.121022', '2024-11-21 22:50:28.121022') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 2 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (3, 2, 1, '{Olives}', '{}', '2024-11-21 22:50:28.123549', '2024-11-21 22:50:28.123549') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Create (1.3ms)[0m  [1m[32mINSERT INTO "order_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (3, 1, '2024-11-21 22:50:28.134288', '2024-11-21 22:50:28.134288') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Load (1.9ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 4 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 5 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 6 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 7 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 8 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "order_items" WHERE "order_items"."id" = 9 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (0.7ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Destroy (0.8ms)[0m  [1m[31mDELETE FROM "order_offers" WHERE "order_offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (1.1ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizzas" WHERE "pizzas"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Load (0.9ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Destroy (0.8ms)[0m  [1m[31mDELETE FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Load (0.9ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Destroy (0.6ms)[0m  [1m[31mDELETE FROM "ingredients" WHERE "ingredients"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Destroy (1.3ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Destroy (0.9ms)[0m  [1m[31mDELETE FROM "offers" WHERE "offers"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 2 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = 3 /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (1.1ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Margherita', 5.0, '2024-11-21 22:50:42.140645', '2024-11-21 22:50:42.140645') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.6ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Salami', 6.0, '2024-11-21 22:50:42.142728', '2024-11-21 22:50:42.142728') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Create (0.7ms)[0m  [1m[32mINSERT INTO "pizzas" ("name", "price", "created_at", "updated_at") VALUES ('Tonno', 8.0, '2024-11-21 22:50:42.144187', '2024-11-21 22:50:42.144187') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.7ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Small', 0.7, '2024-11-21 22:50:42.145778', '2024-11-21 22:50:42.145778') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Medium', 1.0, '2024-11-21 22:50:42.147452', '2024-11-21 22:50:42.147452') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizzaSize Create (0.6ms)[0m  [1m[32mINSERT INTO "pizza_sizes" ("name", "multiplier", "created_at", "updated_at") VALUES ('Large', 1.3, '2024-11-21 22:50:42.151397', '2024-11-21 22:50:42.151397') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Onions', 1.0, '2024-11-21 22:50:42.152886', '2024-11-21 22:50:42.152886') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.7ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Cheese', 2.0, '2024-11-21 22:50:42.154503', '2024-11-21 22:50:42.154503') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mIngredient Create (0.4ms)[0m  [1m[32mINSERT INTO "ingredients" ("name", "multiplier", "created_at", "updated_at") VALUES ('Olives', 2.5, '2024-11-21 22:50:42.156265', '2024-11-21 22:50:42.156265') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Create (0.9ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('2FOR1', 'Promotion', 50, 'Salami', 'Small', 2, 1, '2024-11-21 22:50:42.157581', '2024-11-21 22:50:42.157581') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Create (0.7ms)[0m  [1m[32mINSERT INTO "offers" ("code", "type", "discount", "target", "target_size", "from", "to", "created_at", "updated_at") VALUES ('SAVE5', 'Discount', 5, NULL, NULL, NULL, NULL, '2024-11-21 22:50:42.159324', '2024-11-21 22:50:42.159324') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('9bea11b5-b093-408a-a561-b12bfe04c91b', 'OPEN', '2024-11-21 22:50:42.161200', '2024-11-21 22:50:42.161200') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (4, 6, 6, NULL, NULL, '2024-11-21 22:50:42.166442', '2024-11-21 22:50:42.166442') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('f41718ac-03e5-45d9-a95c-6495be36c502', 'OPEN', '2024-11-21 22:50:42.168195', '2024-11-21 22:50:42.168195') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 6, '{Onions,Cheese,Olives}', NULL, '2024-11-21 22:50:42.170749', '2024-11-21 22:50:42.170749') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 6, 5, NULL, '{Onions,Olives}', '2024-11-21 22:50:42.173087', '2024-11-21 22:50:42.173087') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (5, 4, 4, NULL, NULL, '2024-11-21 22:50:42.177252', '2024-11-21 22:50:42.177252') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("uuid", "state", "created_at", "updated_at") VALUES ('bddd3a60-045f-40cf-8a58-22ef2985f578', 'OPEN', '2024-11-21 22:50:42.178523', '2024-11-21 22:50:42.178523') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 5, '{Onions}', '{Cheese}', '2024-11-21 22:50:42.181020', '2024-11-21 22:50:42.181020') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-21 22:50:42.184008', '2024-11-21 22:50:42.184008') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-21 22:50:42.186436', '2024-11-21 22:50:42.186436') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{}', '{}', '2024-11-21 22:50:42.189016', '2024-11-21 22:50:42.189016') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO "order_items" ("order_id", "pizza_id", "pizza_size_id", "add", "remove", "created_at", "updated_at") VALUES (6, 5, 4, '{Olives}', '{}', '2024-11-21 22:50:42.191787', '2024-11-21 22:50:42.191787') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Create (0.5ms)[0m  [1m[32mINSERT INTO "order_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 3, '2024-11-21 22:50:42.195959', '2024-11-21 22:50:42.195959') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='EvermoodChallenge'*/[0m
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Create (0.4ms)[0m  [1m[32mINSERT INTO "order_offers" ("order_id", "offer_id", "created_at", "updated_at") VALUES (6, 4, '2024-11-21 22:50:42.198128', '2024-11-21 22:50:42.198128') RETURNING "id" /*application='EvermoodChallenge'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/cable" for 127.0.0.1 at 2024-11-22 04:08:14 +0500
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 04:08:14 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 04:08:15 +0500
Processing by OrdersController#index as HTML
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.3ms)


  
SyntaxError (/Users/suhafbutt/Desktop/Projects/evermood-pizza-challenge/app/models/order.rb:11: syntax error, unexpected ->, expecting `end' or dummy end
  scope :open -> { where(state: 'OPEN') }
              ^~
):
  
app/models/order.rb:11: syntax error, unexpected ->, expecting `end' or dummy end
app/controllers/orders_controller.rb:7:in `index'
Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 04:08:15 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 04:08:53 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (1.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.4ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 53.3ms | GC: 1.5ms)
  [1m[36mPromotion Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 20.4ms | GC: 6.4ms)
  [1m[36mPromotion Pluck (0.9ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.7ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizza Load (0.8ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:21:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.8ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:26:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:47:in `apply_discounts'
  [1m[36mDiscount Sum (2.1ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 21.5ms | GC: 1.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 105.6ms | GC: 9.6ms)
  Rendered layout layouts/application.html.erb (Duration: 118.9ms | GC: 17.0ms)
Completed 200 OK in 187ms (Views: 80.5ms | ActiveRecord: 63.5ms (53 queries, 20 cached) | GC: 22.0ms)


Started GET "/cable" for 127.0.0.1 at 2024-11-22 04:08:53 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 04:08:53 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOffer Load (30.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mOrderOffer Count (123.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "order_offers" /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (1.1ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" /* loading for pp */ LIMIT 11 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (1.2ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" ORDER BY "order_offers"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mPromotion Load (1.9ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Promotion' AND "offers"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (1.0ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" ORDER BY "order_offers"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (0.9ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" ORDER BY "order_offers"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mDiscount Load (1.0ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."type" = 'Discount' AND "offers"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOrderOffer Load (0.4ms)[0m  [1m[34mSELECT "order_offers".* FROM "order_offers" ORDER BY "order_offers"."id" ASC LIMIT 1 /*application='EvermoodChallenge'*/[0m
  [1m[36mOffer Load (0.2ms)[0m  [1m[34mSELECT "offers".* FROM "offers" WHERE "offers"."id" = 3 LIMIT 1 /*application='EvermoodChallenge'*/[0m
[dotenv] Set [36mDATABASE_HOST[0m, [36mDATABASE_PORT[0m, [36mDATABASE_NAME[0m, [36mDATABASE_USER[0m, [36mDATABASE_PASSWORD[0m, and [36mTEST_DATABASE_NAME[0m
[dotenv] Loaded [33m.env[0m
Started GET "/cable" for 127.0.0.1 at 2024-11-22 05:25:02 +0500
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='EvermoodChallenge'*/[0m
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:02 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 05:25:03 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (1.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.6ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.7ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.7ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 52.2ms | GC: 0.0ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.6ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 23.0ms | GC: 8.5ms)
  [1m[36mPromotion Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.4ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mDiscount Sum (0.6ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.1ms | GC: 1.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 105.1ms | GC: 9.8ms)
  Rendered layout layouts/application.html.erb (Duration: 117.1ms | GC: 16.0ms)
Completed 200 OK in 186ms (Views: 76.2ms | ActiveRecord: 51.9ms (53 queries, 20 cached) | GC: 16.5ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:03 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 05:25:03 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:03 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started GET "/orders" for 127.0.0.1 at 2024-11-22 05:25:04 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.5ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 4 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 4[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 11.9ms | GC: 0.5ms)
  [1m[36mPromotion Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.2ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.4ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.4ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 14.3ms | GC: 0.4ms)
  [1m[36mPromotion Pluck (0.3ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.4ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.3ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Onions'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.3ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" = 'Olives'[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.7ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mDiscount Sum (0.3ms)[0m  [1m[34mSELECT SUM("offers"."discount") FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 6 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:51:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 6[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 5 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE PizzaSize Load (0.0ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 23.0ms | GC: 6.3ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 52.4ms | GC: 7.2ms)
  Rendered layout layouts/application.html.erb (Duration: 52.7ms | GC: 7.2ms)
Completed 200 OK in 93ms (Views: 40.2ms | ActiveRecord: 12.8ms (53 queries, 20 cached) | GC: 7.2ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:04 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/cable" for 127.0.0.1 at 2024-11-22 05:25:04 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:04 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
Started PATCH "/orders/4" for 127.0.0.1 at 2024-11-22 05:25:06 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"4"}
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 4 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:25:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mOrder Update (1.4ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-22 00:25:06.952839' WHERE "orders"."id" = 4 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
Completed 200 OK in 42ms (Views: 0.1ms | ActiveRecord: 3.5ms (2 queries, 0 cached) | GC: 0.2ms)


Started PATCH "/orders/6" for 127.0.0.1 at 2024-11-22 05:25:09 +0500
Processing by OrdersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"6"}
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = 6 LIMIT 1 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:25:in `set_order'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mOrder Update (1.2ms)[0m  [1m[33mUPDATE "orders" SET "state" = 'COMPLETED', "updated_at" = '2024-11-22 00:25:09.485921' WHERE "orders"."id" = 6 /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT /*action='update',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/controllers/orders_controller.rb:12:in `block in update'
Completed 200 OK in 41ms (Views: 0.0ms | ActiveRecord: 2.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/orders" for 127.0.0.1 at 2024-11-22 05:25:11 +0500
Processing by OrdersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = 'OPEN' /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/index.html.erb:8
  [1m[36mPromotion Pluck (0.8ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:6
  [1m[36mDiscount Pluck (0.5ms)[0m  [1m[34mSELECT "offers"."code" FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:7
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" IN (4, 6) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mPizzaSize Load (0.3ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" IN (6, 5, 4) /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:22:in `calculate_base_amount'
  [1m[36mIngredient Load (0.2ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives') /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IN ('Onions', 'Cheese', 'Olives')[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mIngredient Load (0.1ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mCACHE Ingredient Load (0.0ms)[0m  [1m[34mSELECT "ingredients".* FROM "ingredients" WHERE "ingredients"."name" IS NULL[0m
  ↳ app/models/order_item.rb:23:in `map'
  [1m[36mPromotion Load (0.6ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Promotion' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:27:in `calculate_promotion_amount'
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "offers".* FROM "offers" INNER JOIN "order_offers" ON "offers"."id" = "order_offers"."offer_id" WHERE "offers"."type" = 'Discount' AND "order_offers"."order_id" = 5 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/services/orders/amount_calculator.rb:49:in `apply_discounts'
  [1m[36mCACHE OrderItem Load (0.0ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 5[0m
  ↳ app/views/orders/_order.html.erb:12
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 6 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.5ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 5 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mCACHE Pizza Load (0.0ms)[0m  [1m[34mSELECT "pizzas".* FROM "pizzas" WHERE "pizzas"."id" = 4 LIMIT 1[0m
  ↳ app/views/orders/_order.html.erb:13
  [1m[36mPizzaSize Load (0.2ms)[0m  [1m[34mSELECT "pizza_sizes".* FROM "pizza_sizes" WHERE "pizza_sizes"."id" = 4 LIMIT 1 /*action='index',application='EvermoodChallenge',controller='orders'*/[0m
  ↳ app/views/orders/_order.html.erb:13
  Rendered orders/_order.html.erb (Duration: 16.4ms | GC: 0.2ms)
  Rendered orders/index.html.erb within layouts/application (Duration: 18.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 18.7ms | GC: 0.4ms)
Completed 200 OK in 53ms (Views: 13.7ms | ActiveRecord: 5.3ms (19 queries, 4 cached) | GC: 0.6ms)


Finished "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:11 +0500
Turbo::StreamsChannel stopped streaming from orders
Started GET "/assets/application-078f7bdf.js" for 127.0.0.1 at 2024-11-22 05:25:11 +0500
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2024-11-22 05:25:12 +0500
Started GET "/cable" for 127.0.0.1 at 2024-11-22 05:25:12 +0500
Started GET "/cable" [WebSocket] for 127.0.0.1 at 2024-11-22 05:25:12 +0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
Turbo::StreamsChannel is transmitting the subscription confirmation
Turbo::StreamsChannel is streaming from orders
